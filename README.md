* [â˜£ï¸ C/C++ â˜ƒï¸](#c/c++)
* [ğŸ“¡ æ¨¡æ¿å…ƒç¼–ç¨‹](#template)
* [ğŸ§­ STL](#STL)
* [ğŸ¡ å¤šçº¿ç¨‹](#multithread)
* [ğŸ’€ Effective C++](#effectivecpp)
* [â˜ï¸ è®¡ç®—æœºç½‘ç»œ](#internet)
* [ğŸ€ å‰‘æŒ‡offer](#algorithm)
* [ğŸ’¾ æ•°æ®åº“](#database)
* [ğŸ“ è®¾è®¡æ¨¡å¼](#1)
* [&#x1F527; GDB](#2)
* [&#x1F3A9; Boost::chrono](#chrono)
* [ğŸ”€ Git](#Git)

<h1 id="c/c++">â˜£ï¸ C/C++ â˜ƒï¸</h1>

## C++ä»ä»£ç åˆ°å¯æ‰§è¡Œç¨‹åºç»å†äº†ä»€ä¹ˆï¼Ÿ
- é¢„å¤„ç†ï¼Œä¸»è¦å¤„ç†æºä»£ç ä¸­çš„ä»¥`#`å¼€å¤´çš„é¢„ç¼–è¯‘æŒ‡ä»¤ï¼Œæ¯”å¦‚å±•å¼€å®å®šä¹‰`#define`ï¼Œå¤„ç†æ¡ä»¶é¢„ç¼–è¯‘æŒ‡ä»¤å¦‚`#ifdef`ã€`#elif`å’Œ`#else`ï¼Œå¤„ç†`#include`é¢„ç¼–è¯‘æŒ‡ä»¤
- ç¼–è¯‘ï¼ŒæŠŠé¢„ç¼–è¯‘åç”Ÿæˆçš„xx.iæ–‡ä»¶ï¼Œè¿›è¡Œè¯­ä¹‰åˆ†æåŠä¼˜åŒ–åï¼Œç”Ÿæˆç›¸åº”çš„æ±‡ç¼–æ–‡ä»¶
- æ±‡ç¼–ï¼Œå°†æ±‡ç¼–ä»£ç è½¬ä¸ºxx.oæœºå™¨ç æ–‡ä»¶
- é“¾æ¥ï¼Œå°†ä¸åŒçš„æºæ–‡ä»¶äº§ç”Ÿçš„ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œä»è€Œå½¢æˆä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„ç¨‹åº

## å†…å­˜åˆ†åŒº
- å †åŒºï¼šè°ƒç”¨newå‡½æ•°åœ¨å †åŒºåˆ†é…å†…å­˜
- æ ˆåŒºï¼šå­˜å‚¨å‡½æ•°çš„è¿”å›åœ°å€ã€å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›å€¼ï¼Œç¨‹åºç»“æŸåè‡ªåŠ¨é‡Šæ”¾
- å…¨å±€é™æ€åŒºï¼šç¨‹åºç¼–è¯‘å°±å·²ç»å­˜åœ¨ï¼Œç”Ÿå‘½å‘¨æœŸä¸ºæ•´ä¸ªç¨‹åºï¼Œå­˜æ”¾é™æ€å’Œå…¨å±€å˜é‡
- å¸¸é‡å‚¨å­˜åŒºï¼šå­˜æ”¾å¸¸é‡å­—ç¬¦ä¸²å’Œå…¶ä»–ç±»å‹çš„å¸¸é‡ï¼Œä¸å…è®¸ä¿®æ”¹ã€‚è™šå‡½æ•°è¡¨vtableå°±å­˜æ”¾å¸¸é‡å­˜å‚¨åŒºçš„åªè¯»æ•°æ®æ®µ
- ä»£ç åŒºï¼šå­˜æ”¾ç¼–è¯‘åçš„äºŒè¿›åˆ¶ä»£ç 

## const
- ä¿®é¥°å˜é‡ï¼Œè¯¥å˜é‡ä¸å¯è¢«æ”¹å˜ï¼Œä½†åœ¨å®šä¹‰ä¹‹åˆå°±å¿…é¡»åˆå§‹åŒ–ï¼ˆå¦åˆ™å†ä¹Ÿæ²¡æœºä¼šèµ‹å€¼ï¼‰
- ä¿®é¥°æŒ‡é’ˆï¼Œåˆ†ä¸ºæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡
    - const void *p; å¸¸é‡æŒ‡é’ˆï¼Œå¯ä»¥æ¢æ–¹å‘ï¼Œä¸å¯ä»¥æ”¹å†…å®¹
    - void * const p; æŒ‡é’ˆå¸¸é‡ï¼Œä¸å¯ä»¥æ¢æ–¹å‘ï¼Œå¯ä»¥æ”¹å†…å®¹
- ä¿®é¥°å¼•ç”¨ï¼Œå¸¸ç”¨äºå‡½æ•°å‚æ•°ï¼Œé¿å…æ‹·è´å¼€é”€
    - å¸¸é‡å¼•ç”¨ï¼Œæ¯”å¦‚`const int& ref = 42;`ï¼Œå¯ä»¥ç»‘å®šåˆ°å³å€¼ï¼Œå¸®åŠ©å»¶é•¿ä¸´æ—¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ
- ä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¯´æ˜è¯¥æˆå‘˜å‡½æ•°å†…ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡

## #defineå’Œconst

| å®å®šä¹‰#define | const |
| ---- | ---- |
| æ— ç±»å‹å®‰å…¨æ£€æŸ¥ | æœ‰ç±»å‹å®‰å…¨æ£€æŸ¥ |
| ä¸åˆ†é…å†…å­˜  | è¦åˆ†é…å†…å­˜ |
| å­˜å‚¨åœ¨ä»£ç æ®µ | å­˜å‚¨åœ¨æ•°æ®æ®µ |
| å¯é€šè¿‡#undefå–æ¶ˆ | ä¸å¯å–æ¶ˆ   |

## static

- æ™®é€šå˜é‡ï¼Œä¿®æ”¹å…¶å­˜å‚¨åŒºåŸŸå’Œç”Ÿå‘½å‘¨æœŸï¼Œä½¿å˜é‡å­˜å‚¨åœ¨é™æ€åŒºï¼Œåœ¨ main å‡½æ•°è¿è¡Œå‰å°±åˆ†é…äº†ç©ºé—´
- æ™®é€šå‡½æ•°ï¼ŒæŒ‡æ˜ä½œç”¨èŒƒå›´ï¼Œä»…åœ¨å®šä¹‰è¯¥å‡½æ•°çš„æ–‡ä»¶å†…æ‰èƒ½ä½¿ç”¨ã€‚å›¢é˜Ÿå¼€å‘é¡¹ç›®æ—¶ï¼Œä¸ºé˜²æ­¢å’Œä»–äººçš„å‡½æ•°é‡åï¼Œå¯å°†å‡½æ•°å®šä¹‰æˆstatic
- æˆå‘˜å˜é‡ï¼Œstaticæˆå‘˜å˜é‡å¿…é¡»åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰å’Œåˆå§‹åŒ–ï¼Œå› ä¸ºstaticæˆå‘˜ä¸å±äºç±»çš„ä»»ä½•å¯¹è±¡ï¼Œè€Œæ˜¯å±äºæ•´ä¸ªç±»ã€‚å¯ä»¥ä¸éœ€è¦å®ä¾‹åŒ–ç±»å¯¹è±¡å°±å¯ä»¥è®¿é—®è¯¥æˆå‘˜ï¼Œæ¯”å¦‚`ç±»å::æˆå‘˜å˜é‡`
    - é™æ€æˆå‘˜å˜é‡çš„å®šä¹‰ä¸èƒ½é‡å¤ã€‚å¤šäººå¼€å‘æ—¶ï¼Œå¦‚æœé™æ€æˆå‘˜å˜é‡çš„å®šä¹‰ç›´æ¥å†™åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œè¯¥å¤´æ–‡ä»¶è¢«å¤šæ¬¡å¼•ç”¨åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­å¹¶é‡æ–°å®šä¹‰ï¼Œå°±ä¼šå‡ºç°é”™è¯¯
    - åªæœ‰å¸¸é‡é™æ€æˆå‘˜å¯ä»¥åœ¨ç±»ä¸­åŒæ—¶å£°æ˜å¹¶å®šä¹‰ï¼š`class X { static const int num{42}; };`ï¼Œæˆ–è€…`inline static int num = 42;`ã€‚å‰è€…ä¸å¯ä¿®æ”¹åè€…å¯ä»¥ä¿®æ”¹
```cpp
struct MyClass {
    static int count;
    MyClass() { count++; }
};
//æ— éœ€å®ä¾‹åŒ–ç±»ï¼Œå°±èƒ½ä½¿ç”¨ç±»çš„é™æ€æˆå‘˜ï¼Œæ­¤æ—¶æˆ‘ä»¬ç»™countèµ‹å€¼
int MyClass::count = 2;
int main() {
    MyClass cls;
    std::cout << MyClass::count << std::endl; //3
    //std::cout << cls.count << std::endl; ä¸€æ ·çš„æ•ˆæœ
}
```
- æˆå‘˜å‡½æ•°ï¼Œä¸å®ä¾‹åŒ–ç±»å¯¹è±¡å°±å¯ä»¥è®¿é—®è¯¥å‡½æ•°ï¼Œä½†åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œä¸èƒ½è®¿é—®éé™æ€æˆå‘˜
```cpp
struct MyClass {
    static void get() {
        std::cout << "Count: " << count << std::endl;
    }
    static int count; //é™æ€æˆå‘˜å‡½æ•°åªå…è®¸è®¿é—®é™æ€æˆå‘˜å˜é‡
};

int MyClass::count = 5; //æ— éœ€å®ä¾‹åŒ–ç±»å¯¹è±¡å°±èƒ½è®¿é—®ç±»æˆå‘˜å˜é‡
int main() {
    MyClass::get(); //æ— éœ€å®ä¾‹åŒ–ç±»å¯¹è±¡å°±èƒ½è°ƒç”¨ç±»æˆå‘˜é™æ€å‡½æ•°
}
```

## å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«
- æŒ‡é’ˆæ˜¯ä¸€ä¸ªå®ä½“ï¼Œéœ€è¦åˆ†é…ç©ºé—´ï¼›å¼•ç”¨æ˜¯å¯¹è±¡çš„åˆ«åï¼Œä¸éœ€è¦åˆ†é…ç©ºé—´
- æ™®é€šæŒ‡é’ˆå®šä¹‰æ—¶ä¸éœ€è¦åˆå§‹åŒ–ï¼ŒæŒ‡å‘çš„ç©ºé—´å¯å˜ï¼›å¼•ç”¨å®šä¹‰ä¹‹æ—¶å°±å¿…é¡»åˆå§‹åŒ–å¹¶ä¸”ä¸å¯æ”¹å˜
- æœ‰å¤šçº§æŒ‡é’ˆä½†ä¸å­˜åœ¨å¤šçº§å¼•ç”¨
- æŒ‡é’ˆè‡ªå¢æ˜¯æŒ‡å‘ä¸‹ä¸€ç©ºé—´ï¼Œå¼•ç”¨è‡ªå¢æ˜¯å¼•ç”¨çš„å˜é‡åŠ ä¸€
- sizeof(*)å¾—åˆ°æŒ‡é’ˆæœ¬èº«çš„å¤§å°ï¼Œ32ä½ä¸º4bytesï¼Œ64ä½ä¸º8å­—èŠ‚ã€‚sizeof(&)è¿”å›æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å¤§å°

## ä¼ é€’å‡½æ•°å‚æ•°æ—¶ï¼ŒæŒ‡é’ˆå’Œå¼•ç”¨ä½¿ç”¨åœºæ™¯
- è¿”å›å‡½æ•°å±€éƒ¨å˜é‡çš„å†…å­˜çš„æ—¶å€™ç”¨æŒ‡é’ˆï¼Œè€Œè¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨æ˜¯æ²¡æœ‰æ„ä¹‰çš„
- å¯¹æ ˆç©ºé—´å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼ˆæ¯”å¦‚é€’å½’ï¼‰çš„æ—¶å€™ç”¨å¼•ç”¨ï¼Œä½¿ç”¨å¼•ç”¨ä¼ é€’ä¸éœ€è¦åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œå¼€é”€è¦æ›´å°
- ç±»å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’çš„æ—¶å€™ä½¿ç”¨å¼•ç”¨ï¼ˆæ¯”å¦‚é“¾å¼å¼•ç”¨ï¼‰ï¼Œè¿™æ˜¯C++ç±»å¯¹è±¡ä¼ é€’çš„æ ‡å‡†æ–¹å¼
- æ·±æ‹·è´çš„æ—¶å€™

## thisæŒ‡é’ˆ
- thisæŒ‡é’ˆéšå«äºæ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°ä¸­ï¼ŒæŒ‡å‘è°ƒç”¨è€…ï¼Œè°è°ƒç”¨å‡½æ•°ï¼Œthiså°±æŒ‡å‘å®ƒï¼Œä¹Ÿå°±æ˜¯è¯´thisæŒ‡é’ˆæŒ‡å‘å½“å‰å¯¹è±¡çš„åœ°å€
- å½“ç”¨ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œä¾‹å¦‚ï¼Œobj.func()ï¼›æ­¤æ—¶å¯¹è±¡åœ°å€ä½œä¸ºéšè—çš„thiså‚æ•°ä¼ é€’ç»™å‡½æ•°funcï¼Œæ‰€ä»¥æˆå‘˜å‡½æ•°åº”è¯¥è§†ä¸ºï¼š`func(ObjType* const this)`
- this ä¸æ˜¯å¸¸è§„å˜é‡ï¼Œè€Œæ˜¯ä¸ªå³å€¼ï¼Œæ‰€ä»¥ä¸èƒ½å–å¾— this çš„åœ°å€ï¼ˆä¸èƒ½ &thisï¼‰
- this åªèƒ½åœ¨æˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå…¨å±€å‡½æ•°å’Œé™æ€æˆå‘˜å‡½æ•°ä¸­æ— æ³•ä½¿ç”¨ï¼ˆé™æ€æˆå‘˜å‡½æ•°ç›¸å½“äºå…±äº«çš„å˜é‡ï¼Œä¸å±äºæŸä¸ªå¯¹è±¡çš„å˜é‡ï¼‰
- å‹å…ƒå‡½æ•°å› ä¸ºä¸æ˜¯ç±»æˆå‘˜ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰thisæŒ‡é’ˆï¼Œè‡ªç„¶å‹å…ƒå‡½æ•°ä¹Ÿæ— æ³•ä½¿ç”¨thisæŒ‡é’ˆ

ç»å¸¸éœ€è¦æ˜¾å¼ä½¿ç”¨ this æŒ‡é’ˆçš„åœºæ™¯ï¼š

1. é“¾å¼å¼•ç”¨
é“¾å¼å¼•ç”¨å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­è¿ç»­è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œå®Œæ“ä½œåè¿”å›å¯¹è±¡è‡ªèº«ï¼ˆæ¯”å¦‚*thisï¼‰ï¼Œä»è€Œä½¿å¾—ä¸‹ä¸€ä¸ªæ–¹æ³•è°ƒç”¨æˆä¸ºå¯èƒ½ã€‚
```cpp
struct complex {
    complex& operator+=(const complex& r) {
        return dop(this, r); //ä¸ºäº†å’Œdopå‚æ•°åŒ¹é…ï¼Œéœ€è¦æ˜¾å¼ä½¿ç”¨thisæŒ‡é’ˆ
    }
    int a;
};
//è®¾è®¡çš„å‡½æ•°ï¼šä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…
//è¿”å›ç±»å‹å¿…é¡»æ˜¯å¼•ç”¨ï¼Œä¸ç„¶è¿”å›ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸä¸è¶³ä»¥è¿›å…¥ç¬¬äºŒä¸ªå‚æ•°
complex& dop(complex* t, const complex& c) {
    t->a += c.a; //æ”¹é€ t
    return *t; //æ”¹é€ å®Œåå°†å…¶è¿”å›
}

main():
//é“¾å¼ä½¿ç”¨ï¼šc3 += c2 += c1;
```

```cpp
class buffer {
private:
    std::string str;
public:
    buffer() : str("") {} //ctor
    //æ·»åŠ å­—ç¬¦ä¸²
    buffer& append(const std::string& s) {
        str += s;
        return *this; //è¿”å›å¯¹è±¡è‡ªèº«çš„å¼•ç”¨
    }
};

int main() {
    buffer sb;
    //é“¾å¼å¼•ç”¨
    std::string result = sb.append("abcd").append("efg");
}
```

2. lambdaä¸­æ•è·thisæŒ‡é’ˆ
```cpp
#include <iostream>
struct obj{
    int value;
    obj(int v): value(v) {}
    void show() {
        auto lambda = [this]() { std::cout << this->value << std::endl; };
        lambda();
    }
};
int main() {
    obj o(42);
    o.show();
}
```

3. é¿å…å¯¹åŒä¸€å¯¹è±¡è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œæ¯”å¦‚æ·±æµ…æ‹·è´æ—¶åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒ

```cpp
struct String {
    String& operator=(const String&); //æ‹·è´èµ‹å€¼å‡½æ•°
    char* data;
};
String& String::operator=(const String& str) {
    if (this == &str) //æ£€æµ‹è‡ªæˆ‘èµ‹å€¼ï¼Œå¦‚æœæ˜¯è‡ªå·±
        return *this; //ä»€ä¹ˆéƒ½åˆ«åšï¼Œç›´æ¥æŠŠè‡ªå·±è¿”å›å°±å¥½
    delete[] data; //åˆ é™¤æ—§çš„
    data = new char[strlen(str.data) + 1]; //åˆ†é…ç©ºé—´
    strcpy(data, str.data); //å¤åˆ¶
    return *this; //å°†æ·±æ‹·è´åçš„å€¼è¿”å›å‡ºå»
}
```

4. åœ¨å®ç°ä¸€äº›æ•°æ®ç»“æ„æ—¶ï¼Œå¦‚ å•/åŒå‘é“¾è¡¨

**ç±»ä¸­éé™æ€æˆå‘˜å‡½æ•°å¦‚ä½•å¯»å€**

é—®é¢˜æè¿°å¦‚å›¾ï¼š

![q](https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/howtoloopaddress.png)

ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨complexçš„è®¾è®¡ä¸­ï¼ŒåŒ…å«ä¸¤ä¸ªéé™æ€æˆå‘˜ï¼šå®éƒ¨å’Œè™šéƒ¨ï¼Œå½“å®ä¾‹åŒ–ä¸‰ä¸ªå¯¹è±¡åï¼ŒthisæŒ‡é’ˆå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![a](https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/takingprogress.png)

## delete this

è¦æƒ³ä½¿ç”¨`delete this`ï¼Œå¿…é¡»ä¿è¯ï¼š
- ä¸èƒ½å†è®¿é—®ä»»ä½•ç±»æˆå‘˜
- ä¸èƒ½è°ƒç”¨ä»»ä½•éé™æ€æˆå‘˜å‡½æ•°
- thisæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡å·²ç»è¢«é”€æ¯

å› ä¸º`delete this`å…ˆé‡Šæ”¾äº†å¯¹è±¡å ç”¨çš„å†…å­˜ï¼Œåœ°å€ä¾ç„¶å­˜åœ¨ï¼Œä½†æŒ‡å‘çš„å†…å­˜å·²ç»æ— æ•ˆï¼ˆæˆ¿å­æ‹†é™¤ä½†åœ°å€è¿˜åœ¨ï¼‰ï¼Œé€šè¿‡æ— æ•ˆå†…å­˜è®¿é—®æˆå‘˜å˜é‡æˆ–å‡½æ•°ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚

å¦‚æœåœ¨ææ„å‡½æ•°ä¸­è°ƒç”¨`delete this`ï¼Œä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´å †æ ˆæº¢å‡ºã€‚å› ä¸ºdeleteæ˜¯å…ˆè°ƒç”¨ææ„å‡½æ•°åfreeå†…å­˜ï¼Œæ˜¾ç„¶delete thisä¼šå»è°ƒç”¨æœ¬å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œç„¶åææ„å‡½æ•°ä¸­åˆä¼šè°ƒç”¨åˆ é™¤ç±»ä¸­éšå«çš„thisæŒ‡é’ˆï¼Œå½¢æˆæ— é™é€’å½’é€ æˆå †æ ˆæº¢å‡ºï¼Œç›´è‡³å¥”æºƒã€‚

## é‡æŒ‡é’ˆ
ä¸€ä¸ªæŒ‡å‘å·²è¢«åˆ é™¤æˆ–è€…æœªæ›¾åˆ†é…çš„å†…å­˜åœ°å€çš„æŒ‡é’ˆ

äº§ç”ŸåŸå› ï¼š
- æŒ‡é’ˆæœªåˆå§‹åŒ–
- æŒ‡é’ˆè¢«é‡Šæ”¾åæœªç½®ç©º
- æŒ‡é’ˆè¶…å‡ºå˜é‡çš„ä½œç”¨åŸŸ

## æ‚¬ç©ºæŒ‡é’ˆ
æŒ‡å‘æ›¾ç»æœ‰æ•ˆä½†ç°åœ¨å·²ç»è¢«é‡Šæ”¾æˆ–è€…æ— æ•ˆçš„å†…å­˜åœ°å€çš„æŒ‡é’ˆã€‚æ‚¬ç©ºæŒ‡é’ˆæ›¾ç»æ˜¯æœ‰æ•ˆçš„ï¼Œè€Œé‡æŒ‡é’ˆå¯èƒ½ä»æœªè¢«æ­£ç¡®åˆå§‹åŒ–

äº§ç”ŸåŸå› ï¼š
- é‡Šæ”¾å†…å­˜åç»§ç»­ä½¿ç”¨æŒ‡é’ˆ
- å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€
- å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œå…¶ä¸­ä¸€ä¸ªé‡Šæ”¾äº†å†…å­˜

## æ·±æ‹·è´&æµ…æ‹·è´

|  | **æµ…æ‹·è´** | **æ·±æ‹·è´** |
| :---: | :---: | :---: |
| **å†…å­˜åˆ†é…** | ä»…å¤åˆ¶æŒ‡é’ˆå€¼ï¼Œä¸¤ä¸ªå¯¹è±¡å…±äº«åŒä¸€å—å†…å­˜ | å¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ç”¨æ¥å­˜æ”¾æ–°å€¼ |
| **å®‰å…¨æ€§** | å®¹æ˜“å‡ºç°çš„é”™è¯¯å°±æ˜¯åŒä¸€åœ°å€èµ„æºè¢«é‡å¤é‡Šæ”¾ | å¯¹è±¡é—´ç‹¬ç«‹ï¼Œå³ä½¿åŸå…ˆçš„å¯¹è±¡è¢«ææ„ï¼Œæ–°å¯¹è±¡ä¹Ÿä¸å—å½±å“ |
| **é€‚ç”¨åœºæ™¯** | ä¸´æ—¶å¯¹è±¡å¤åˆ¶ã€å¼•ç”¨è®¡æ•° | èµ„æºç‹¬å çš„æƒ…å†µ |

## strlen å’Œ sizeof çš„åŒºåˆ«

|  | **strlen** | **sizeof** |
| :---: | :---: | :---: |
| **ä½œç”¨**| éå†å­—ç¬¦ä¸²è®¡ç®—æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°ï¼Œç›´åˆ°é‡åˆ°'\0'ç»“æŸ | è®¡ç®—ä»»æ„æ•°æ®ç±»å‹æˆ–å˜é‡çš„å†…å­˜å¤§å° |
| **å®‰å…¨æ€§** | ä¸æ£€æŸ¥è¾¹ç•Œï¼Œå­˜åœ¨ç¼“å†²åŒºæº¢å‡ºé£é™© | ç¼–è¯‘æœŸç¡®å®šï¼Œæ›´å®‰å…¨  |
| **è®¡ç®—æ—¶æœº** | è¿è¡ŒæœŸ | ç¼–è¯‘æœŸ |
| **ä½¿ç”¨é™åˆ¶** | åªèƒ½ç”¨äºCé£æ ¼å­—ç¬¦ä¸²(charæ•°ç»„) | é™æ€è®¡ç®—ï¼Œæ‰€ä»¥æ— æ³•è®¡ç®—åŠ¨æ€åˆ†é…ï¼ˆè¿è¡ŒæœŸåˆ†é…ï¼‰çš„ç©ºé—´å†…å­˜å¤§å° |
| **ä½¿ç”¨å»ºè®®** | è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ç”¨strlen | è·å–å†…å­˜å¤§å°ç”¨sizeof |

## inline å†…è”

- å†…è”å‘ç”Ÿåœ¨ç¼–è¯‘æœŸï¼Œè™šå‡½æ•°çš„å¤šæ€æ€§ä½“ç°åœ¨è¿è¡ŒæœŸï¼Œ**æ‰€æœ‰å¯¹è™šå‡½æ•°çš„è°ƒç”¨éƒ½ä¼šä½¿inlineè½ç©º**
- å†…è”å‡½æ•°åŒå®å‡½æ•°ä¸€æ ·å°†åœ¨è¢«è°ƒç”¨å¤„è¿›è¡Œä»£ç å±•å¼€ï¼Œçœå»äº†å‚æ•°å‹æ ˆã€æ ˆå¼€è¾Ÿä¸å›æ”¶ï¼Œä»è€Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦
- å†…è”å‡½æ•°ç›¸æ¯”å®å‡½æ•°æ¥è¯´ï¼Œåœ¨ä»£ç å±•å¼€æ—¶ï¼Œä¼šåšå®‰å…¨æ£€æŸ¥æˆ–è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œè€Œå®å®šä¹‰åˆ™ä¸ä¼š
- å†…è”æ‹’ç»å¤ªè¿‡å¤æ‚çš„å‡½æ•°ï¼Œæ¯”å¦‚å¾ªç¯ã€é€’å½’ç­‰
- åœ¨ç±»ä¸­çš„å‡½æ•°ï¼Œé™¤è™šå‡½æ•°å¤–ï¼Œå…¶ä»–å‡½æ•°éƒ½ä¼šéšå¼åœ°å½“æˆå†…è”å‡½æ•°
- å†…è”ä»¥ä»£ç è†¨èƒ€ï¼ˆå¤åˆ¶ï¼‰ä¸ºä»£ä»·ï¼Œæ¶ˆé™¤å‡½æ•°è°ƒç”¨å¸¦æ¥çš„å¼€é”€
- inlineå‡½æ•°çš„æ”¹å˜éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œä¸åƒ non-inline å¯ä»¥ç›´æ¥é“¾æ¥
- æ˜¯å¦å†…è”çš„å†³å®šæƒåœ¨äºç¼–è¯‘å™¨ï¼Œç”¨æˆ·ä¸å¯æ§

```cpp
struct X {
    inline static int num = 10;
};
```
- ç›¸æ¯”äºç±»å†…é™æ€æˆå‘˜å˜é‡å¿…é¡»åœ¨ç±»å¤–å®šä¹‰ï¼Œinlineä¿®é¥°çš„é™æ€æˆå‘˜å°±å¯ä»¥åŒæ—¶å£°æ˜å’Œå®šä¹‰ï¼ˆ`static const`ç±»å†…æˆå‘˜ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å®šä¹‰åä¸å¯æ›´æ”¹ï¼‰
- inlineä¿®é¥°çš„é™æ€æˆå‘˜ï¼Œå³ä½¿å°†ç±»Xä½œä¸ºå¤´æ–‡ä»¶åŒ…å«åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å¤šæ¬¡å®šä¹‰ï¼Œä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œè€Œç±»å†…é™æ€æˆå‘˜å˜é‡è¢«å¤šæ¬¡é‡æ–°å®šä¹‰ä¼šå‡ºé”™

## extern

- å¯¹å˜é‡æˆ–å‡½æ•°è¿›è¡Œå£°æ˜ï¼šè¡¨ç¤ºexternä¿®é¥°çš„å˜é‡æˆ–è€…å‡½æ•°å®šä¹‰åœ¨åˆ«çš„æ–‡ä»¶ä¸­ï¼Œå‘ŠçŸ¥ç¼–è¯‘å™¨é‡åˆ°æ­¤å˜é‡æˆ–å‡½æ•°æ—¶ï¼Œåº”å»åˆ«çš„æ–‡ä»¶ä¸­å¯»æ‰¾å®ƒçš„å®šä¹‰
- å¯¹é“¾æ¥è§„èŒƒè¿›è¡ŒæŒ‡å®šï¼šä¸"C"ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‡ç¤ºç¼–è¯‘å™¨ä½¿ç”¨Cè¯­è¨€çš„é“¾æ¥æ–¹å¼ï¼Œæ–¹ä¾¿è°ƒç”¨Cåº“

## mutable 
åœ¨ç±»ä¸­çš„constæˆå‘˜å‡½æ•°ä¸­ï¼Œä¸èƒ½ä¿®æ”¹émutableçš„æˆå‘˜å˜é‡ï¼Œä½†å¯ä»¥ä¿®æ”¹mutableæˆå‘˜å˜é‡ã€‚è°¨æ…ä½¿ç”¨ï¼Œæ»¥ç”¨å¯èƒ½ä¼šç ´åç±»çš„é€»è¾‘çŠ¶æ€

ä½¿ç”¨åœºæ™¯ï¼š
1. ç¼“å­˜æ•°æ®ï¼šå½“éœ€è¦åœ¨constæˆå‘˜å‡½æ•°ä¸­ç¼“å­˜æŸäº›è®¡ç®—ç»“æœæ—¶ï¼Œå¯ä»¥ä½¿ç”¨mutable
2. ç»Ÿè®¡ä¿¡æ¯ï¼šåœ¨ç±»ä¸­ç»´æŠ¤ä¸€äº›ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚è°ƒç”¨æ¬¡æ•°ï¼‰ï¼Œå³ä½¿åœ¨constä¸Šä¸‹æ–‡ä¸­ä¹Ÿéœ€è¦æ›´æ–°
```cpp
class Example {
public:
    Example() : count(0) {} //ctor
    void increment() const {  //constæˆå‘˜å‡½æ•°
        count++;  //å…è®¸ä¿®æ”¹mutableæˆå‘˜
    }
    void display() const {
        std::cout << count << std::endl;
    }
private:
    mutable int count;  //mutableæˆå‘˜å˜é‡
};
int main() {
    const Example ex; //åˆ›å»ºconstå¯¹è±¡
    ex.increment(); //å…è®¸è°ƒç”¨constæˆå‘˜å‡½æ•°
    ex.display(); //è¾“å‡º: Count: 1
}
```
3. çº¿ç¨‹åŒæ­¥
```cpp
class ThreadSafeCounter {
private:
    mutable std::mutex mtx;  //å¯åœ¨constå‡½æ•°ä¸­ä½¿ç”¨
    mutable int count = 0;
public:
    void increment() const {
        std::lock_guard<std::mutex> lock(mtx); //è‡ªåŠ¨ä¸Šä¸‹é”
        count++;  //å³ä½¿åœ¨constå‡½æ•°ä¸­ä¹Ÿå¯ä¿®æ”¹
    }
};
```

## volatile

- é˜²æ­¢ç¼–è¯‘å™¨ä¼˜åŒ–
    - æ¯æ¬¡å–å€¼éƒ½å¿…é¡»ä»å†…å­˜ä¸­é‡æ–°è¯»å–ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œä»¥é¿å…å¯¹å˜é‡è®¿é—®è¿›è¡Œä¼˜åŒ–
    - ç¡®ä¿å¯¹è¯¥å˜é‡çš„è¯»å†™æ“ä½œéƒ½ç›´æ¥é’ˆå¯¹å†…å­˜
- å¤šçº¿ç¨‹å¯è§æ€§
    - ä¿è¯å¤šä¸ªçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°è¯¥å˜é‡çš„æœ€æ–°å€¼
    - æ³¨æ„ï¼švolatileä¸èƒ½ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œä¸èƒ½æ›¿ä»£äº’æ–¥é”
    - å¯¹äºå¤šçº¿ç¨‹ç¨‹åºï¼Œä¼˜å…ˆè€ƒè™‘std::atomicå’Œäº’æ–¥é”

å¸¸è§ä½¿ç”¨åœºæ™¯

1. ä¸»è¦ç”¨äºç¡¬ä»¶äº¤äº’å’Œä¿¡å·å¤„ç†
2. ä¸­æ–­æœåŠ¡ç¨‹åºä¸­çš„æ ‡å¿—
```cpp
volatile bool interruptFlag = false;

void interruptHandler() {
    interruptFlag = true;
}

void mainLoop() {
    while (!interruptFlag) {
        // ç­‰å¾…ä¸­æ–­
    }
}
```
3. å¤šçº¿ç¨‹å…±äº«çš„çŠ¶æ€æ ‡å¿—
```cpp
volatile bool shouldExit = false;

void workerThread() {
    while (!shouldExit) {
        // æ‰§è¡Œä»»åŠ¡
    }
}
```

é”™è¯¯æ¡ˆä¾‹
```cpp
// é”™è¯¯ï¼šä¸èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨
volatile int counter = 0;
void increment() {
    counter++;  // éåŸå­æ“ä½œ
}

// æ­£ç¡®ï¼šä½¿ç”¨atomic
std::atomic<int> counter{0};
void increment() {
    counter++;  // åŸå­æ“ä½œ
}
```

## explicit

ç”¨äºæ„é€ å‡½æ•°æˆ–ç±»å‹è½¬æ¢å‡½æ•°ï¼Œå¼ºåˆ¶è¦æ±‚ä½¿ç”¨ç›´æ¥åˆå§‹åŒ–ï¼Œä¸ºäº†é˜²æ­¢éšå¼ç±»å‹è½¬æ¢ã€‚åœ¨è®¾è®¡ç±»æ—¶ï¼Œè¦ä»”ç»†è€ƒè™‘æ˜¯å¦éœ€è¦å…è®¸éšå¼è½¬æ¢ï¼Œå¹¶ç›¸åº”åœ°ä½¿ç”¨æˆ–çœç•¥explicitå…³é”®è¯

**ä½¿ç”¨åœºæ™¯**

1. æ„é€ å‡½æ•°

```c++
struct MyString {
    MyString(int size) { /* ... */ }
};
MyString str = 10; //å…è®¸éšå¼è½¬æ¢å°†10è½¬æ¢ä¸ºMyStringå¯¹è±¡

struct SafeString {
    explicit SafeString(int size) { /* ... */ }
};

SafeString str = 10; //ç¼–è¯‘é”™è¯¯ï¼šä¸å…è®¸éšå¼è½¬æ¢
SafeString str2(10); //æ­£ç¡®ï¼šæ˜¾å¼æ„é€ 
SafeString str3 = SafeString(42); //æ­£ç¡®ï¼šæ˜¾å¼æ„é€ 
```

2. ç±»å‹è½¬æ¢å‡½æ•°

```c++
struct Number {
    int value;
    Number(int v): value(v) {}
    //ä¸ä½¿ç”¨explicitçš„è½¬æ¢è¿ç®—ç¬¦
    operator bool() { return value != 0; }
};

struct SafeNumber {
    int value;
    SafeNumber(int v): value(v) {}
    //ä½¿ç”¨explicitçš„è½¬æ¢è¿ç®—ç¬¦
    explicit operator bool() { return value != 0; }
};
```

**ä¼˜åŠ¿**

1. é˜²æ­¢æ„å¤–çš„ç±»å‹è½¬æ¢
2. é¿å…æ½œåœ¨bug
```c++
void processString(const MyString& str) { /* ... */ }

// ä¸ä½¿ç”¨explicitæ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜
processString(100); //æ„å¤–åœ°åˆ›å»ºäº†ä¸´æ—¶MyStringå¯¹è±¡

// ä½¿ç”¨explicitå
processString(100); //ç¼–è¯‘é”™è¯¯ï¼Œå¼ºåˆ¶å¼€å‘è€…æ˜ç¡®æ„å›¾
processString(MyString(100)); //æ­£ç¡®ï¼šæ˜¾å¼è½¬æ¢
```
3. é˜²æ­¢äºŒä¹‰æ€§
```c++
class Distance {
public:
    explicit Distance(double d) : meters(d) {}
private:
    double meters;
};
void calculate(const Distance& d) { /* ... */ }

calculate(5.0); //å¦‚æœæ²¡æœ‰explicitï¼Œè¿™é‡Œå¯èƒ½äº§ç”ŸäºŒä¹‰æ€§
calculate(Distance(5.0)); //ä½¿ç”¨explicitåï¼Œå¿…é¡»æ˜ç¡®æŒ‡å®š
```

## struct & class

ä»¥ä¸‹è¯´çš„structéƒ½æ˜¯Cè¯­è¨€çš„ç»“æ„ä½“ï¼Œä¸æ˜¯C++çš„ï¼

- è®¿é—®æƒé™ä¸åŒï¼Œstructé»˜è®¤publicï¼Œclassé»˜è®¤private
- structé»˜è®¤ç»§æ‰¿æƒé™æ˜¯publicï¼Œclassç»§æ‰¿é»˜è®¤private
- structæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œæ›´ä¸èƒ½ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼Œstructåªèƒ½ç”¨å‡½æ•°æŒ‡é’ˆä¸èƒ½å®šä¹‰å‡½æ•°
- structæ— æ³•é‡è½½mallocï¼ˆä¸è¿‡æœ¬èº«mallocä¹Ÿä¸æ”¯æŒé‡è½½ï¼‰ï¼Œclasså¯ä»¥operator newæ¥ç®¡å†…å­˜åˆ†é…
- structå¿…é¡»å®šä¹‰åˆ«åæ‰èƒ½ä½¿ç”¨`typedef struct {} stu;`
- ç±»èƒ½å¤Ÿå®ç°ç±»æ¨¡æ¿ï¼Œä½†æ˜¯ç±»ä¸æ”¯æŒè™šå‡½æ•°æ¨¡æ¿

**æ‰©å±•**

ä¼—æ‰€å‘¨çŸ¥ï¼Œç±»ä¸­æ™®é€šæˆå‘˜å‡½æ•°åœ¨ä¸è¢«è°ƒç”¨æ—¶ä¸ä¼šå®ä¾‹åŒ–ï¼Œä½†å¯¹äºè™šå‡½æ•°ï¼Œä¸è®ºæ˜¯å¦è¢«è°ƒç”¨éƒ½ä¼šè¢«åˆå§‹åŒ–ï¼Œå› ä¸ºè¦åˆ›å»ºè™šå‡½æ•°è¡¨ï¼Œè™šè¡¨ä¸­æ¯ä¸€ä¸ªå…·ä½“è¡¨é¡¹éƒ½å¯¹åº”ä¸€ä¸ªè™šå‡½æ•°åœ°å€ï¼Œæ‰€ä»¥IDEä¼šæŠŠæ‰€æœ‰è™šå‡½æ•°éƒ½å®ä¾‹åŒ–å‡ºæ¥ã€‚

è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰éœ€è¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…¶å¤§å°å’Œå¸ƒå±€ï¼Œè€Œæ¨¡æ¿åœ¨ä½¿ç”¨æ—¶æ‰ä¼šå®ä¾‹åŒ–ï¼Œè¿™å°±å¯¼è‡´æ— æ³•åœ¨ç¼–è¯‘æ—¶æ„å»ºå®Œæ•´çš„è™šå‡½æ•°è¡¨ï¼Œæ‰€ä»¥è™šå‡½æ•°æ¨¡æ¿ä¸è¢«æ”¯æŒ

**é”™è¯¯ç¤ºä¾‹**

```cpp
class Base {
public:
    //é”™è¯¯ï¼šè™šå‡½æ•°æ¨¡æ¿ä¸è¢«æ”¯æŒ
    template<typename T>
    virtual void process(T value) { }
};
```

## é¢å‘å¯¹è±¡OOP

- å°è£…ï¼šä½¿ç”¨å‡½æ•°æŒ‡é’ˆæŠŠå±æ€§ä¸æ–¹æ³•å°è£…åˆ°ç»“æ„ä½“ä¸­
- ç»§æ‰¿ï¼šç»“æ„ä½“åµŒå¥—
- å¤šæ€ï¼šé€šè¿‡ç»Ÿä¸€çš„æ¥å£å®ç°ä¸åŒçš„æ“ä½œï¼Œæœ‰å¤šç§å½¢å¼æ˜¾ç¤ºçš„èƒ½åŠ›

### é‡è½½overload

é‡è½½å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
1. å‡½æ•°åç›¸åŒ
2. å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆå‚æ•°ç±»å‹ã€å‚æ•°ä¸ªæ•°æˆ–å‚æ•°é¡ºåºä¸åŒï¼‰
3. è¿”å›å€¼ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒ

å‡½æ•°é‡è½½æ—¶çš„åŒ¹é…é¡ºåºï¼š1.åå­—æŸ¥æ‰¾ 2.ç¡®å®šå€™é€‰å‡½æ•° 3.å¯»æ‰¾æœ€ä½³åŒ¹é…

```cpp
class Calculator {
    int add(int a, int b) { //æ•´æ•°åŠ æ³•é‡è½½
        return a + b;
    }
    double add(double a, double b) { //æµ®ç‚¹æ•°åŠ æ³•é‡è½½
        return a + b;
    }
    int add(int a, int b, int c) { //ä¸‰ä¸ªå‚æ•°çš„åŠ æ³•é‡è½½
        return a + b + c;
    }
};
```

### é‡å†™override

é‡å†™åˆç§°è¦†ç›–ï¼Œä¸€èˆ¬åœ¨å‡½æ•°åé¢åŠ ä¸Šoverrideå…³é”®å­—ï¼ŒæŒ‡çš„æ˜¯å­ç±»é‡æ–°å®šä¹‰çˆ¶ç±»ä¸­çš„è™šå‡½æ•°ï¼Œé‡å†™å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

1. å‡½æ•°åç›¸åŒ
2. å‚æ•°åˆ—è¡¨å®Œå…¨ç›¸åŒ
3. è¿”å›å€¼ç±»å‹ç›¸åŒ
4. çˆ¶ç±»å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°

å½“å­ç±»é‡å†™äº†çˆ¶ç±»çš„è™šå‡½æ•°foo()æ—¶ï¼Œä»¥ä¸‹ä¸‰ç§æ–¹æ³•éƒ½å¯¹ï¼›ä½†æ˜¯æ¨èç”¨ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œå› ä¸ºå¦‚æœæ‰‹æŠ–å†™æˆf0o()ï¼Œç¼–è¯‘å°±ä¼šæŠ¥é”™å› ä¸ºæ‰¾ä¸åˆ°çˆ¶ç±»ä¸­f0oè¿™ä¸ªè™šå‡½æ•°

```cpp
void foo();
virtual void foo();
virtual void foo() override;
```

### éšè—hide

æŸäº›æƒ…å†µä¸‹ï¼Œå­ç±»ä¸­çš„å‡½æ•°éšè—äº†çˆ¶ç±»ä¸­çš„åŒåå‡½æ•°

ä¸¤ä¸ªå‡½æ•°å‚æ•°ç›¸åŒï¼Œä½†çˆ¶ç±»çš„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ã€‚å’Œé‡å†™çš„åŒºåˆ«åœ¨äºçˆ¶ç±»æ˜¯å¦æ˜¯è™šå‡½æ•°

```cpp
struct A {
    void func() {
        std::cout << "Aä¸­å‡½æ•°\n";
    }
};
struct B : public A {
    void func() {
        //éšè—çˆ¶ç±»ä¸­çš„funcå‡½æ•°
        std::cout << "Bä¸­å‡½æ•°\n";
    }
};
int main() {
    B b;
    b.func();
    b.A::func();
}
```

ä¸¤ä¸ªå‡½æ•°å‚æ•°ä¸åŒï¼Œæ— è®ºçˆ¶ç±»å‡½æ•°æ˜¯ä¸æ˜¯è™šå‡½æ•°ï¼Œéƒ½ä¼šè¢«éšè—

### final

- é˜²æ­¢ç±»è¢«ç»§æ‰¿
```cpp
struct Base final {
    void display() {
        std::cout << "Base class" << std::endl;
    }
};
//ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç»§æ‰¿finalç±»
class Derived : public Base { };
```
- é˜²æ­¢è™šå‡½æ•°è¢«é‡å†™
```cpp
class Base {
public:
    virtual void display() final {
        std::cout << "Base display" << std::endl;
    }
    virtual void show() {
        std::cout << "Base show" << std::endl;
    }
};
class Derived: public Base {
    //ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½é‡å†™finalå‡½æ•°
    virtual void display() {  
        std::cout << "Derived display" << std::endl;
    }
    //æ­£ç¡®ï¼šshow()ä¸æ˜¯finalï¼Œå¯ä»¥è¢«é‡å†™
    virtual void show() override {  
        std::cout << "Derived show" << std::endl;
    }
};
```

### è™šå‡½æ•°è¡¨&è™šå‡½æ•°è¡¨æŒ‡é’ˆ

è™šå‡½æ•°è¡¨ä¸­ä¸»è¦å­˜æ”¾äº†è™šå‡½æ•°çš„å…¥å£åœ°å€å’ŒRTTIæŒ‡é’ˆ

é’ˆå¯¹åŠ¨æ€å¤šæ€è€Œè¨€ï¼Œå½“å­ç±»å¯¹è±¡é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°æ—¶ï¼Œä»çˆ¶ç±»ç»§æ‰¿çš„è™šå‡½æ•°çš„å…¥å£åœ°å€å°±ä¼šè¢«å­ç±»çš„è™šå‡½æ•°åœ°å€è¦†ç›–

åªè¦æ˜¯åˆ©ç”¨è™šå‡½æ•°è¡¨æŒ‡é’ˆvptræ‰¾åˆ°è™šå‡½æ•°è¡¨ï¼Œç„¶åæŸ¥è¯¢è™šå‡½æ•°è¡¨æ‰¾åˆ°å¯¹åº”çš„è™šå‡½æ•°å…¥å£åœ°å€ï¼Œå¹¶æ‰§è¡Œè™šå‡½æ•°ã€‚é‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å¤šæ€ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåŸºç±»æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œè°ƒç”¨è™šå‡½æ•°çš„æ—¶å€™ä¼šè°ƒç”¨åˆ°æ´¾ç”Ÿç±»çš„è™šå‡½æ•°ï¼Œè¿™ä¹Ÿæ­£æ˜¯å¤šæ€çš„ä½“ç°ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ä¸­çš„â‘ ã€â‘¡å’Œâ‘¢

![vptr](https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/vptr.png)

### è™šå‡½æ•°è¡¨&è™šå‡½æ•°è¡¨æŒ‡é’ˆçš„å†…å­˜åˆ†åŒº

- è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰ï¼šå¸¸é‡æ•°æ®åŒºçš„åªè¯»æ•°æ®æ®µï¼Œå¯ä»¥é˜²æ­¢è™šå‡½æ•°è¡¨è¢«æ„å¤–ä¿®æ”¹ï¼ŒåŒä¸€ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ä¸€ä¸ªè™šå‡½æ•°è¡¨
- è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ˆvptrï¼‰ï¼šå­˜å‚¨åœ¨æ¯ä¸ªå¯¹è±¡å†…éƒ¨ï¼Œä½äºå †åŒºæˆ–æ ˆåŒºï¼ŒæŒ‡å‘å¯¹åº”ç±»çš„vtable

å½“è°ƒç”¨å¯¹è±¡çš„è™šå‡½æ•°æ—¶ï¼Œç¨‹åºå¯ä»¥é€šè¿‡å¯¹è±¡çš„vptræ‰¾åˆ°å¯¹åº”çš„vtableï¼Œå†é€šè¿‡vtableå®šä½åˆ°æ­£ç¡®çš„è™šå‡½æ•°å®ç°ï¼Œä»è€Œå®ç°è¿è¡Œæ—¶çš„å¤šæ€æ€§

### è™šå‡½æ•°è¡¨åˆ›å»ºæ—¶æœº

è™šå‡½æ•°è¡¨æ˜¯åœ¨**ç¼–è¯‘æœŸ**ä¸ºæ¯ä¸ªåŒ…å«è™šå‡½æ•°çš„ç±»åˆ›å»ºçš„ï¼Œç¼–è¯‘å™¨ä¼šä¸ºè¿™äº›ç±»ç”Ÿæˆä¸€ä¸ªé™æ€çš„è™šå‡½æ•°è¡¨ï¼Œé‡Œé¢å­˜å‚¨äº†ç±»ä¸­æ‰€æœ‰è™šå‡½æ•°çš„å…¥å£åœ°å€

### è™šå‡½æ•°è¡¨æŒ‡é’ˆåˆ›å»ºæ—¶æœº

ç±»è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼ŒæŠŠç±»çš„è™šå‡½æ•°è¡¨çš„åœ°å€èµ‹å€¼ç»™è™šå‡½æ•°è¡¨æŒ‡é’ˆã€‚å¦‚æœå‘ç”Ÿäº†ç»§æ‰¿å…³ç³»ï¼Œé‚£ä¹ˆè™šå‡½æ•°è¡¨æŒ‡é’ˆéšç€æ„é€ è¿‡ç¨‹é€çº§æ›´æ–°

### ä¸ºä»€ä¹ˆC++é»˜è®¤çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°

å½“ç±»ä¸­æœ‰è™šå‡½æ•°æ—¶ï¼Œç±»ä¼šè‡ªåŠ¨ç”Ÿæˆ**è™šå‡½æ•°è¡¨**å’Œ**æŒ‡å‘è™šå‡½æ•°è¡¨çš„è™šè¡¨æŒ‡é’ˆ**ï¼Œè™šå‡½æ•°è¡¨çš„ä½œç”¨å°±æ˜¯ä¿å­˜ç±»ä¸­å„ä¸ªè™šå‡½æ•°çš„å…¥å£åœ°å€ï¼Œå› ä¸ºåŒ…å«äº†vtbleå’Œvptrï¼Œå°±ä¼šå ç”¨é¢å¤–çš„å†…å­˜ï¼Œå¦‚æœç±»ä¸è¢«ç»§æ‰¿æ—¶ï¼Œè¿™ç§å¼€é”€æ— ç–‘æ˜¯æµªè´¹çš„

### classä¸­æ”¯æŒè™šå‡½æ•°æ¨¡æ¿å—ï¼Ÿ

ä¸æ”¯æŒï¼Œè™šå‡½æ•°çš„è°ƒç”¨æœºåˆ¶æ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„è™šè¡¨ï¼Œå…¶ä¸­å­˜æ”¾äº†æ¯ä¸€ä¸ªæ¡ç›®çš„è™šå‡½æ•°å…¥å£æŒ‡é’ˆï¼Œå¤§å°å›ºå®šï¼Œè€Œæ¨¡æ¿åœ¨ä½¿ç”¨æ—¶æ‰ä¼šåˆå§‹åŒ–ï¼Œæ‰€ä»¥æˆå‘˜å‡½æ•°æ¨¡æ¿åˆ°ç¨‹åºç¼–è¯‘ä¹‹å‰ï¼Œå®ä¾‹åŒ–ä¸ªæ•°éƒ½æ— æ³•ç¡®å®š

### è™šå‡½æ•°&çº¯è™šå‡½æ•°

- ç±»ä¸­å£°æ˜äº†è™šå‡½æ•°ï¼Œä¸ç®¡æœ‰æ²¡æœ‰å®ç°ï¼Œå®ƒéƒ½å¯ä»¥è®©è¿™ä¸ªå‡½æ•°åœ¨å®ƒçš„å­ç±»ä¸­è¢«è¦†ç›–ï¼ˆoverrideï¼‰ï¼Œé€šè¿‡åæœŸç»‘å®šå°±å¯ä»¥å®ç°å¤šæ€
- è™šå‡½æ•°åœ¨å­ç±»ä¸­å¯ä»¥ä¸é‡å†™
- å¸¦çº¯è™šå‡½æ•°çš„ç±»å«æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ï¼Œå¿…é¡»åœ¨å­ç±»é‡å†™å…¶çº¯è™šå‡½æ•°åï¼Œæ‰å¯ä»¥å®ä¾‹åŒ–å­ç±»å¹¶ä½¿ç”¨
- ç”±äºçº¯è™šå‡½æ•°å¹¶æ²¡æœ‰å…·ä½“çš„å‡½æ•°ä½“ï¼Œå› æ­¤å®ƒåœ¨è™šå‡½æ•°è¡¨ä¸­çš„å€¼å°±ä¸º0ï¼Œè€Œå…·æœ‰å‡½æ•°ä½“çš„è™šå‡½æ•°åœ¨è™šå‡½æ•°è¡¨ä¸­åˆ™æ˜¯å‡½æ•°çš„å…·ä½“åœ°å€

### è™šææ„å‡½æ•°

- è™šææ„å‡½æ•°æ˜¯ä¸ºäº†è§£å†³åŸºç±»çš„æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¹¶ç”¨åŸºç±»çš„æŒ‡é’ˆåˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡ã€‚å¦‚æœåŸºç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œåˆ™åªä¼šè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ï¼Œè€Œä¸ä¼šè°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼
- ææ„å‡½æ•°ç»ä¸èƒ½æ˜¯çº¯è™šå‡½æ•°

**æ¡ˆä¾‹**

```cpp
struct Base {
    Base() { }
    ~Base() { cout << "Base destructor" << endl; }
};

struct Derived : public Base {
    Derived() { ptr = new int(42); }
    ~Derived() {
        delete ptr;  //é‡Šæ”¾åœ¨æ´¾ç”Ÿç±»ä¸­åˆ†é…çš„å†…å­˜
        cout << "Derived destructor" << endl;
    }
private:
    int* ptr;
};

Base* b = new Derived(); //åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡
delete b; //åªä¼šè°ƒç”¨Baseçš„ææ„å‡½æ•°ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼
```

**æ­£ç¡®åšæ³•**

```cpp
struct Base {
    Base() { }
    virtual ~Base() { //å£°æ˜ä¸ºè™šææ„å‡½æ•°
        cout << "Base destructor" << endl;
    }
};

struct Derived : public Base {
    Derived() { ptr = new int(42); }
    ~Derived() {
        delete ptr;
        cout << "Derived destructor" << endl;
    }
private:
    int* ptr;
};

Base* b = new Derived();
delete b;  //ç°åœ¨ä¼šæ­£ç¡®è°ƒç”¨Derivedçš„ææ„å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨Baseçš„ææ„å‡½æ•°
```

**æ‹“å±•**

CRTPæ¨¡æ¿ä¸­ï¼Œä¸åº”è¯¥å°†ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œç†è®ºä¸Šæ‰€æœ‰çš„åŸºç±»å‡½æ•°éƒ½ä¸åº”è¯¥å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œå› ä¸ºè¿™ç§ç»§æ‰¿æ–¹å¼ï¼Œä¸éœ€è¦è™šå‡½æ•°è¡¨ï¼ŒåŒç†CRTPèƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨è™šå‡½æ•°çš„æƒ…å†µä¸‹å®ç°å¤šæ€

## é™æ€ç»‘å®š&åŠ¨æ€ç»‘å®š

é™æ€ç»‘å®šä¹Ÿç§°ä¸ºæ—©æœŸç»‘å®šï¼Œåœ¨**ç¼–è¯‘æœŸ**å°±ç¡®å®šäº†è¡Œä¸º

```cpp
class MathOperations {
public:
    //åŸºç¡€è¿ç®—æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œå»ºè®®é™æ€ç»‘å®š
    static int add(int a, int b) { return a + b; }
    static int subtract(int a, int b) { return a - b; }
    static int multiply(int a, int b) { return a * b; }
};
```

æ¨¡æ¿å’Œé™æ€ç»‘å®šå…±åŒå®ç°äº†ç¼–è¯‘æ—¶å¤šæ€ï¼Œè¿™ä¸è¿è¡Œæ—¶å¤šæ€ï¼ˆè™šå‡½æ•°ï¼‰æœ‰æœ¬è´¨åŒºåˆ«

```cpp
//ç¼–è¯‘æ—¶å¤šæ€çš„ç®€å•ç¤ºä¾‹
template<typename T>
class Calculator {
public:
    //ç¼–è¯‘æ—¶ç¡®å®šç±»å‹Tï¼Œè¿›è¡Œé™æ€ç»‘å®š
    static T add(T a, T b) { return a + b; }
    static T multiply(T a, T b) { return a * b; }
};
// ä½¿ç”¨æ–¹å¼
int result1 = Calculator<int>::add(1, 2);
double result2 = Calculator<double>::multiply(2.5, 3.0);
```

åŠ¨æ€ç»‘å®šä¹Ÿç§°ä¸ºæ™šæœŸç»‘å®šï¼Œæ”¯æŒå¤šæ€ï¼Œå¿…é¡»ä½¿ç”¨è™šå‡½æ•°å®ç°ï¼Œåœ¨**è¿è¡ŒæœŸ**æ‰ç¡®å®šå…·ä½“è°ƒç”¨å“ªä¸ªå‡½æ•°

```cpp
class Animal {
public:
    virtual void makeSound() {
        cout << "Some sound" << endl;
    }
    virtual ~Animal() {}
};

class Dog : public Animal {
public:
    void makeSound() override {
        cout << "Woof!" << endl;
    }
};
class Cat : public Animal {
public:
    void makeSound() override {
        cout << "Meow!" << endl;
    }
};
```

## RTTIè¿è¡Œæ—¶ç±»å‹è¯†åˆ«

RTTIå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶è·å–å’Œä½¿ç”¨å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ã€‚ä½¿ç”¨å‰æï¼šç±»å¿…é¡»æœ‰è™šå‡½æ•°æ‰èƒ½ä½¿ç”¨RTTIï¼Œé€šå¸¸éœ€è¦è™šææ„å‡½æ•°

RTTIä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼å®ç°ï¼š

1. `typeid`è¿ç®—ç¬¦

`typeid`è¿ç®—ç¬¦è¿”å›ä¸€ä¸ª`type_info`å¯¹è±¡çš„å¼•ç”¨ï¼Œåªèƒ½è·å–å¯¹è±¡çš„å®é™…ç±»å‹ä¿¡æ¯ã€‚å¦‚æœæƒ³é€šè¿‡åŸºç±»çš„æŒ‡é’ˆè·å¾—æ´¾ç”Ÿç±»çš„æ•°æ®ç±»å‹ï¼ŒåŸºç±»å¿…é¡»å¸¦æœ‰è™šå‡½æ•°

```cpp
#include <typeinfo>
class Base {
public:
    virtual ~Base() {}  //è¿™é‡Œéœ€è¦è™šææ„å‡½æ•°æ‰èƒ½æ­£ç¡®ä½¿ç”¨RTTI
};

class Derived : public Base { };

void test() {
    Base* ptr = new Derived();
    
    // è·å–å®é™…ç±»å‹
    std::cout << "Type: " << typeid(*ptr).name() << std::endl;
    
    // è·å–å®é™…ç±»å‹ + æ¯”è¾ƒ
    if(typeid(*ptr) == typeid(Derived)) {
        std::cout << "ptr points to Derived" << std::endl;
    }
    
    delete ptr;
}
```

2. `dynamic_cast`è¿ç®—ç¬¦

`dynamic_cast`ç”¨äºåœ¨ç»§æ‰¿å±‚æ¬¡é—´è¿›è¡Œå®‰å…¨çš„å‘ä¸‹è½¬å‹ï¼Œæˆ‘ä»¬å¿…é¡»å§‹ç»ˆæ£€æŸ¥dynamic_castçš„è¿”å›å€¼ï¼ˆå› ä¸ºå¯èƒ½ä¸ºç©ºï¼‰

```cpp
class Base {
public:
    virtual ~Base() {}
};

class Derived1 : public Base {
public:
    void derived1Method() {
        std::cout << "Derived1 method" << std::endl;
    }
};

class Derived2 : public Base {
public:
    void derived2Method() {
        std::cout << "Derived2 method" << std::endl;
    }
};

void test() {
    Base* base_ptr = new Derived1();
    
    //å®‰å…¨çš„ç±»å‹è½¬æ¢
    Derived1* d1 = dynamic_cast<Derived1*>(base_ptr);
    if(d1) {
        d1->derived1Method();
    }
    
    //è½¬æ¢å¤±è´¥ï¼Œäºæ˜¯è¿”å›nullptr
    Derived2* d2 = dynamic_cast<Derived2*>(base_ptr);
    if(d2) {
        d2->derived2Method();
    } else {
        std::cout << "Cast to Derived2 failed" << std::endl;
    }
    
    delete base_ptr;
}
```

3. `type_info`ç±»

`type_info`ç±»åŒ…å«ç±»å‹çš„è¯¦ç»†ä¿¡æ¯

```cpp
#include <typeinfo>

void example_type_info() {
    int i;
    const std::type_info& ti = typeid(i);
    
    std::cout << "Name: " << ti.name() << std::endl;
    std::cout << "Hash code: " << ti.hash_code() << std::endl;
}
```

## RAIIèµ„æºè·å–å³åˆå§‹åŒ–

åˆ©ç”¨äº†C++å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ç‰¹æ€§ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­è·å–èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æº

**RAIIçš„å…¸å‹ä¾‹å­**

1. äº’æ–¥é”ç®¡ç†

```cpp
#include <mutex>
class Bank {
private:
    std::mutex mtx;
    double balance;
public:
    void transfer(double amount) {
        //RAIIæ–¹å¼ç®¡ç†é”
        std::lock_guard<std::mutex> lock(mtx);  //æ„é€ æ—¶åŠ é”
        balance += amount;
        //å‡½æ•°ç»“æŸæ—¶ï¼Œlock_guardææ„ï¼Œè‡ªåŠ¨è§£é”
    }
};

2. æ™ºèƒ½æŒ‡é’ˆ

```cpp
class Resource {
public:
    void doSomething() { }
};

void processResource() {
    // RAIIæ–¹å¼ç®¡ç†å†…å­˜
    std::unique_ptr<Resource> ptr(new Resource());  // æ„é€ æ—¶è·å–å†…å­˜
    ptr->doSomething();
    // å‡½æ•°ç»“æŸæ—¶ï¼Œunique_ptrææ„ï¼Œè‡ªåŠ¨é‡Šæ”¾å†…å­˜
}
```

**RAIIçš„å¸¸è§åº”ç”¨**

1. äº’æ–¥é”ç®¡ç†
    - `std::lock_guard`
    - `std::unique_lock`
    - `std::scoped_lock`
2. å†…å­˜ç®¡ç†
    - std::unique_ptr
    - std::shared_ptr
    - std::weak_ptr
3. ç½‘ç»œè¿æ¥ç®¡ç†

## å·¦å€¼&å³å€¼

åœ¨C++ä¸­ï¼Œç†è§£å€¼ç±»åˆ«ï¼ˆvalue categoriesï¼‰å¯¹äºç¼–å†™é«˜æ•ˆä¸”å®‰å…¨çš„ä»£ç è‡³å…³é‡è¦ã€‚ä¸»è¦çš„å€¼ç±»åˆ«åŒ…æ‹¬**å·¦å€¼ï¼ˆlvalueï¼‰**ã€**äº¡å€¼ï¼ˆxvalueï¼‰**å’Œ**çº¯å³å€¼ï¼ˆprvalueï¼‰**ï¼Œä»¥åŠå®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»å‹ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»å¦‚ä½•åŒºåˆ†å®ƒä»¬åŠå…¶å¼•ç”¨ã€‚

### å·¦å€¼ï¼ˆlvalueï¼‰

å·¦å€¼å¯ä»¥å–åœ°å€ï¼Œä½äºèµ‹å€¼è¿ç®—ç¬¦çš„å·¦è¾¹ï¼Œè¡¨ç¤ºä¸€ä¸ªåœ¨å†…å­˜ä¸­æœ‰ç¡®å®šå­˜å‚¨ä½ç½®çš„å¯¹è±¡

ç‰¹ç‚¹ï¼š

- æœ‰æ˜ç¡®çš„å†…å­˜åœ°å€
- å¯ä»¥è¢«ä¿®æ”¹ï¼ˆé™¤éè¢«å£°æ˜ä¸ºconstï¼‰
- å¯ä»¥å–åœ°å€ï¼ˆ&è¿ç®—ç¬¦ï¼‰
- å¯ä»¥å¤šæ¬¡è¢«å¼•ç”¨

ç¤ºä¾‹ï¼š

```cpp
int x = 10;       //xæ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªå›ºå®šçš„å†…å­˜åœ°å€ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¼•ç”¨
int& ref = x;   //refæ˜¯å·¦å€¼
*ptr;                //è§£å¼•ç”¨å¾—åˆ°å·¦å€¼
array[0];          //å–æ•°ç»„çš„ç¬¬0ä¸ªå…ƒç´ çš„åœ°å€ï¼Œæ˜¯å·¦å€¼
std::string str; //stræ˜¯å·¦å€¼
```

### äº¡å€¼ï¼ˆxvalueï¼ŒeXpiring valueï¼‰

- è¡¨ç¤ºå°†è¦è¢«â€œç§»åŠ¨â€çš„å¯¹è±¡ï¼Œé€šå¸¸ç”¨äºèµ„æºçš„è½¬ç§»ï¼ˆå¦‚ç§»åŠ¨è¯­ä¹‰ï¼‰
- å®ƒä»¬æ˜¯å°†äº¡çš„ï¼Œå¯ä»¥è¢«ç§»åŠ¨æ„é€ æˆ–ç§»åŠ¨èµ‹å€¼

ç‰¹ç‚¹ï¼š

- é€šå¸¸é€šè¿‡`std::move`æˆ–`std::forward`äº§ç”Ÿ
- é€‚ç”¨äºç»‘å®šåˆ°å³å€¼å¼•ç”¨ï¼ˆrvalue referencesï¼‰
- ç”Ÿå‘½å‘¨æœŸå³å°†ç»“æŸ

ç¤ºä¾‹ï¼š

```cpp
std::string str = "Hello";
//std::move(str)å°†strè½¬ä¸ºå°†äº¡å€¼ï¼Œå…è®¸èµ„æºçš„è½¬ç§»
std::string&& rref = std::move(str);  //rrefæ˜¯ä¸€ä¸ªäº¡å€¼å¼•ç”¨ï¼ˆå³å€¼å¼•ç”¨ï¼‰

std::vector<int>{}.front(); //ä¸´æ—¶å¯¹è±¡çš„æˆå‘˜æ˜¯å°†äº¡å€¼
Widget().member; //è®¿é—®ä¸´æ—¶å¯¹è±¡çš„æˆå‘˜
static_cast<Widget&&>(widget); //è½¬æ¢ä¸ºå³å€¼å¼•ç”¨çš„ç»“æœ
```

### çº¯å³å€¼ï¼ˆprvalueï¼Œpure rvalueï¼‰

è¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰èº«ä»½ï¼ˆæ— æ³•è·å–åœ°å€ï¼‰çš„ä¸´æ—¶å€¼ï¼Œé€šå¸¸ç”¨äºè¡¨è¾¾å¼çš„å³ä¾§

ç‰¹ç‚¹ï¼š

- æ²¡æœ‰å†…å­˜åœ°å€æ‰€ä»¥æ— æ³•å–åœ°å€
- æ— æ³•è¢«ä¿®æ”¹
- é€šå¸¸æ˜¯å­—é¢é‡ã€ä¸´æ—¶å¯¹è±¡ã€è¡¨è¾¾å¼ç»“æœæˆ–å‡½æ•°è¿”å›å€¼
- ä¸èƒ½ç»‘å®šåˆ°å·¦å€¼å¼•ç”¨ï¼Œåªèƒ½ç»‘å®šåˆ°å³å€¼å¼•ç”¨æˆ–`const`å·¦å€¼å¼•ç”¨

ç¤ºä¾‹ï¼š

```cpp
42; //å­—é¢é‡
int getValue() { return 42; } //å‡½æ•°è¿”å›å€¼
[](int x) { return x; }; //lambdaè¡¨è¾¾å¼

//getValue()è¿”å›çº¯å³å€¼ï¼Œå¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨æˆ–constå·¦å€¼å¼•ç”¨
int&& rref = getValue(); //å¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨
const int& cref = getValue(); //å¯ä»¥ç»‘å®šåˆ°constå·¦å€¼å¼•ç”¨
```

## å¼•ç”¨çš„åŒºåˆ†

### å·¦å€¼å¼•ç”¨ï¼ˆlvalue referencesï¼‰

- å£°æ˜æ–¹å¼ï¼š`T&`
- åªèƒ½ç»‘å®šåˆ°å·¦å€¼
- ä¸èƒ½ç»‘å®šåˆ°å°†äº¡å€¼å’Œçº¯å³å€¼

1. åŸºç¡€ç”¨æ³•

```cpp
int a = 5;
int& ref = a; //ç»‘å®šåˆ°å·¦å€¼
ref = 42; //ä¿®æ”¹refä¹Ÿä¼šä¿®æ”¹a
```

2. ä½œä¸ºå‡½æ•°å‚æ•°

```cpp
class BigObject {
    //å‡è®¾è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¯¹è±¡
};

//ä¼ å€¼ - ä¼šå¯¼è‡´æ‹·è´
void processObject(BigObject obj) { /*...*/ }

//ä¼ å¼•ç”¨ - é¿å…æ‹·è´
void processObject(BigObject& obj) { /*...*/ }

//constå¼•ç”¨ - é¿å…æ‹·è´ä¸”ä¿è¯ä¸ä¼šä¿®æ”¹åŸå¯¹è±¡
void processObject(const BigObject& obj) { /*...*/ }
```

3. `const`å·¦å€¼å¼•ç”¨

`const`å·¦å€¼å¼•ç”¨æœ‰ä¸€ä¸ªç‰¹æ®Šæ€§è´¨ï¼šå®ƒå¯ä»¥ç»‘å®šåˆ°å³å€¼

```cpp
int x = 42;
const int& ref1 = x; //ç»‘å®šåˆ°å·¦å€¼
const int& ref2 = 42; //å¯ä»¥ç»‘å®šåˆ°å³å€¼
const int& ref3 = x + 1; //å¯ä»¥ç»‘å®šåˆ°è¡¨è¾¾å¼ç»“æœï¼ˆå³å€¼ï¼‰

//éconstå·¦å€¼å¼•ç”¨ä¸èƒ½ç»‘å®šåˆ°å³å€¼
int& ref4 = 42; //ç¼–è¯‘é”™è¯¯ï¼
```

4. å¼•ç”¨ä½œä¸ºè¿”å›å€¼

```cpp
class Container {
    int data[100];
public:
    //è¿”å›å¼•ç”¨ï¼Œè¡¨ç¤ºoperator[]å…è®¸ä¿®æ”¹å…ƒç´ 
    int& operator[](size_t index) {
        return data[index];
    }
    
    //è¿”å›constå¼•ç”¨é˜²æ­¢ä¿®æ”¹
    const int& operator[](size_t index) const {
        return data[index];
    }
};
```

å¸¸è§é™·é˜±

1. æ‚¬ç©ºå¼•ç”¨

å½“å‡½æ•°è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨æ—¶ï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå°±ä¼šè¢«é”€æ¯ï¼Œå…¶å ç”¨çš„å†…å­˜ç©ºé—´ä¼šè¢«é‡Šæ”¾ï¼Œå¼•ç”¨å°±ä¼šæŒ‡å‘ä¸€ä¸ªå·²ç»ä¸å­˜åœ¨çš„å†…å­˜ä½ç½®ï¼Œå³æ‚¬ç©ºå¼•ç”¨

```cpp
int& getDanglingRef() {
    int local = 42;
    return local;    //å±é™©ï¼è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨
}
```

2. å¼•ç”¨å¿…é¡»åˆå§‹åŒ–

```cpp
int& ref; //é”™è¯¯ï¼šå¼•ç”¨å¿…é¡»åˆå§‹åŒ–
int x = 42;
int& ref = x; //æ­£ç¡®
```

3. å¼•ç”¨ä¸èƒ½é‡æ–°ç»‘å®š

```cpp
int x = 10;
int y = 24;
int& ref = x;
ref = y; //è¿™ä¸æ˜¯é‡æ–°ç»‘å®šï¼Œè€Œæ˜¯å°†yçš„å€¼èµ‹ç»™x
```

### å³å€¼å¼•ç”¨ï¼ˆrvalue referencesï¼‰

- å£°æ˜æ–¹å¼ï¼š`T&&`
- å¯ä»¥ç»‘å®šåˆ°äº¡å€¼å’Œçº¯å³å€¼
- ä¸èƒ½ç»‘å®šåˆ°å·¦å€¼ï¼Œé™¤éæ˜¾å¼è½¬æ¢ä¸ºäº¡å€¼

1. åŸºæœ¬è¯­æ³•

```cpp
int&& rref = 10; //ç»‘å®šåˆ°çº¯å³å€¼
int&& rref2 = std::move(a); //ç»‘å®šåˆ°å°†äº¡å€¼
```

2. ç§»åŠ¨è¯­ä¹‰

å³å€¼å¼•ç”¨æœ€é‡è¦çš„åº”ç”¨æ˜¯å®ç°ç§»åŠ¨è¯­ä¹‰ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„æ‹·è´

```cpp
class String {
    char* data;
public:
    // ç§»åŠ¨æ„é€ å‡½æ•°
    String(String&& other) {
        data = other.data; //çªƒå–èµ„æº
        other.data = nullptr; //å°†æºå¯¹è±¡ç½®ç©º
    }
    
    // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦
    String& operator=(String&& other) {
        if (this != &other) {
            delete[] data; //é‡Šæ”¾å½“å‰èµ„æº
            data = other.data; //çªƒå–èµ„æº
            other.data = nullptr; //å°†æºå¯¹è±¡ç½®ç©º
        }
        return *this;
    }
};
```

3. `std::move` çš„ä½¿ç”¨

`move`æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¿·æƒ‘æ€§çš„å‡½æ•°ï¼Œå¾€å¾€ä»¥ä¸ºå®ƒèƒ½æŠŠä¸€ä¸ªå˜é‡é‡Œçš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå˜é‡ï¼Œä½†äº‹å®ä¸Š`move()`ç§»åŠ¨ä¸äº†ä»€ä¹ˆï¼Œå”¯ä¸€çš„åŠŸèƒ½æ˜¯æŠŠå·¦å€¼å¼ºåˆ¶è½¬åŒ–ä¸ºå³å€¼ï¼Œè®©å³å€¼å¼•ç”¨å¯ä»¥æŒ‡å‘å·¦å€¼ã€‚å…¶å®ç°ç­‰åŒäºä¸€ä¸ªç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥ï¼Œå•çº¯çš„`move`ä¸ä¼šæœ‰æ€§èƒ½æå‡

```cpp
class Widget {
    std::vector<int> data;
public:
    void setData(std::vector<int>&& newData) {
        data = std::move(newData); //ç§»åŠ¨èµ‹å€¼
    }
};

Widget w;
std::vector<int> vec{1, 2, 3};
w.setData(std::move(vec)); //vecåœ¨è¿™ä¹‹åä¸åº”è¯¥è¢«ä½¿ç”¨
```

4. å®Œç¾è½¬å‘

ä¿æŒå‚æ•°çš„å€¼ç±»åˆ«ï¼Œå…·ä½“è§ä¸‹é¢çš„ã€Šå®Œç¾è½¬å‘ã€‹ç« èŠ‚

```cpp
template<typename T>
void wrapper(T&& param) {
    //std::forwardä¿æŒparamçš„å€¼ç±»åˆ«
    foo(std::forward<T>(param));
}

//ä½¿ç”¨
int value = 42;
wrapper(value); //paramæ˜¯å·¦å€¼
wrapper(42); //paramæ˜¯å³å€¼
```

å¸¸è§é™·é˜±

1. å³å€¼å¼•ç”¨å˜é‡æ˜¯å·¦å€¼

```cpp
void process(int&& x) {
    //xæœ¬èº«æ˜¯å·¦å€¼ï¼Œå°½ç®¡å®ƒçš„ç±»å‹æ˜¯å³å€¼å¼•ç”¨
    anotherFunc(std::move(x));  //éœ€è¦std::moveæ‰èƒ½ä¼ é€’ä¸ºå³å€¼
}
```

### å¸¸é‡å·¦å€¼å¼•ç”¨ï¼ˆconst lvalue referencesï¼‰

- å£°æ˜æ–¹å¼ï¼š`const T&`
- å¯ä»¥ç»‘å®šåˆ°å·¦å€¼ã€äº¡å€¼å’Œçº¯å³å€¼ã€‚
- æä¾›æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†ä¸èƒ½ä¿®æ”¹ç»‘å®šçš„å¯¹è±¡

```cpp
const int& cref1 = a; //ç»‘å®šåˆ°å·¦å€¼
const int& cref2 = std::move(a); //ç»‘å®šåˆ°äº¡å€¼
const int& cref3 = 10; //ç»‘å®šåˆ°çº¯å³å€¼
```

### ä¸‡èƒ½å¼•ç”¨ï¼ˆé€šç”¨å¼•ç”¨ï¼‰

```cpp
template<typename T>
void f(T&& param) {  //è¿™ä¸æ˜¯å³å€¼å¼•ç”¨ï¼Œè€Œæ˜¯ä¸‡èƒ½å¼•ç”¨
    // ...
}
```

è§£é‡Šï¼šæ»¡è¶³ä»¥ä¸‹**ä¸¤ä¸ªæ¡ä»¶**æ—¶ï¼Œ&& æ‰è¡¨ç¤ºä¸‡èƒ½å¼•ç”¨ï¼Œå¦åˆ™å°±æ˜¯å³å€¼å¼•ç”¨ï¼ˆå³å€¼å¼•ç”¨å¿…é¡»ç²¾ç¡®æŒ‡å®šç±»å‹ï¼‰

1. ç±»å‹æ¨å¯¼å­˜åœ¨
2. å½¢å¼å¿…é¡»æ˜¯ `T&&`

```cpp
//æ˜ç¡®çš„ç±»å‹ï¼Œæ²¡æœ‰ç±»å‹æ¨å¯¼
void process(std::string&& str) { //å³å€¼å¼•ç”¨
    std::cout << "rvalue ref: " << str;
}

template<typename T>
void process(std::vector<T>&& vec) { //å³å€¼å¼•ç”¨
    //è™½ç„¶Tæœ‰ç±»å‹æ¨å¯¼ï¼Œä½†å‚æ•°ä¸æ˜¯T&&å½¢å¼
}

template<typename T>
void f(T&& param);    // ä¸‡èƒ½å¼•ç”¨ï¼šç±»å‹æ¨å¯¼ + T&&å½¢å¼

//å½¢å¦‚const T&&çš„æ–¹å¼ä¹Ÿä¸æ˜¯ä¸‡èƒ½å¼•ç”¨
template<typename T>
void f(const T&& param); // tæ˜¯å³å€¼å¼•ç”¨

auto&& var = expr;    // ä¸‡èƒ½å¼•ç”¨ï¼šautoå¯¼è‡´ç±»å‹æ¨å¯¼
```

ä¹‹æ‰€ä»¥"ä¸‡èƒ½"æ˜¯å› ä¸ºèƒ½æ¥å—ï¼š

1. å·¦å€¼ï¼ˆæ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ï¼‰
2. å³å€¼ï¼ˆæ¨å¯¼ä¸ºå³å€¼å¼•ç”¨ï¼‰

é€šå¸¸ä¸`std::forward`é…åˆä½¿ç”¨æ¥å®ç°å®Œç¾è½¬å‘

### å®Œç¾è½¬å‘

å¯ä»¥å°†å‚æ•°æŒ‰ç…§åŸæ¥çš„ç±»å‹ï¼ˆåŒ…æ‹¬å·¦å€¼/å³å€¼ã€const/éconstç­‰å±æ€§ï¼‰è½¬å‘ç»™å…¶ä»–å‡½æ•°ã€‚å®Œç¾è½¬å‘ä¸»è¦é€šè¿‡`std::forward<>`ï¼ˆéœ€è¦æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‚æ•°ï¼‰å’Œä¸‡èƒ½å¼•ç”¨ï¼ˆ`T&&`å½¢å¼å’Œç±»å‹æ¨å¯¼æ˜¯å¿…é¡»çš„ï¼‰æ¥å®ç°

ç¤ºä¾‹ä»£ç 

```cpp
//å·¦å€¼å¼•ç”¨
void process(const std::string& s) {
    std::cout << "å·¦å€¼å¼•ç”¨ï¼š" << s << std::endl;
}
//å³å€¼å¼•ç”¨
void process(std::string&& s) {
    std::cout << "å³å€¼å¼•ç”¨ï¼š" << s << std::endl;
}

//ä¸å®Œç¾çš„è½¬å‘ï¼šarg æ€»æ˜¯å·¦å€¼
template<typename T>
void badWrapper(T arg) {
    process(arg);
}

//å®Œç¾è½¬å‘
template<typename T>
void perfectWrapper(T&& arg) {
    process(std::forward<T>(arg)); //ä¿æŒåŸå§‹ç±»å‹ç‰¹å¾
}

int main() {
    std::string str = "Hello";

	//ä½¿ç”¨ä¸å®Œç¾è½¬å‘
    badWrapper(str); //è¾“å‡ºï¼šå·¦å€¼å¼•ç”¨: Hello
    badWrapper(std::string("World")); //è¾“å‡ºï¼šå·¦å€¼å¼•ç”¨: World

    //ä½¿ç”¨å®Œç¾è½¬å‘
    perfectWrapper(str); //è¾“å‡ºï¼šå·¦å€¼å¼•ç”¨: Hello
    perfectWrapper(std::move(str)); //è¾“å‡ºï¼šå³å€¼å¼•ç”¨: Hello
    perfectWrapper(std::string("World")); //è¾“å‡ºï¼šå³å€¼å¼•ç”¨: World
}
```

åº”ç”¨åœºæ™¯

1. å·¥å‚å‡½æ•°

```cpp
template<typename T, typename... Args>
std::unique_ptr<T> make_unique(Args&&... args) {
    return std::unique_ptr<T>(new T(std::forward<Args>(args)...));
}
```

2. åŒ…è£…å‡½æ•°

```cpp
template<typename Func, typename... Args>
auto wrapper(Func&& f, Args&&... args) {
    //ä¸€äº›é¢å¤–çš„å·¥ä½œ
    return std::forward<Func>(f)(std::forward<Args>(args)...);
}
```

### å¼•ç”¨æŠ˜å 

å¼•ç”¨æŠ˜å æä¾›äº†å½“å‡ºç°**å¼•ç”¨çš„å¼•ç”¨**æ—¶ï¼Œå¦‚ä½•å°†å…¶æŠ˜å ä¸º**å•ä¸ªå¼•ç”¨**çš„æœºåˆ¶

1. å¼•ç”¨æŠ˜å è§„åˆ™

- å·¦å€¼å¼•ç”¨çš„å·¦å€¼å¼•ç”¨ï¼ˆT& &ï¼‰ â†’ T&
- å·¦å€¼å¼•ç”¨çš„å³å€¼å¼•ç”¨ï¼ˆT& &&ï¼‰ â†’ T&
- å³å€¼å¼•ç”¨çš„å·¦å€¼å¼•ç”¨ï¼ˆT&& &ï¼‰ â†’ T&
- å³å€¼å¼•ç”¨çš„å³å€¼å¼•ç”¨ï¼ˆT&& &&ï¼‰â†’ T&&

2. ç¤ºä¾‹ä»£ç 

```cpp
#include <type_traits>

//1. åŸºç¡€ç¤ºä¾‹
template<typename T>
void reference_collapse(T&& param) {
    std::cout << (std::is_lvalue_reference_v<T> ? "lvalue" : "rvalue") << std::endl;
}
void demonstrate_reference_collapse() {
    int x = 42;
    
    //æƒ…å†µ1ï¼šä¼ å…¥å·¦å€¼
    reference_collapse(x); //Tæ¨å¯¼ä¸ºint&ï¼Œå‚æ•°ç±»å‹æŠ˜å ä¸ºint&
    
    //æƒ…å†µ2ï¼šä¼ å…¥å³å€¼
    reference_collapse(42); //Tæ¨å¯¼ä¸ºintï¼Œå‚æ•°ç±»å‹ä¸ºint&&
    //è§£æƒ‘ï¼šå¯¹äºå³å€¼å‚æ•°ï¼ŒT è¢«æ¨å¯¼ä¸ºåŸå§‹ç±»å‹ intï¼Œè€Œä¸æ˜¯ int&&
}

//2. æ›´å¤æ‚çš„ç¤ºä¾‹
template<typename T>
class Widget {
    using RvalueRef = T&&; //è¿™é‡Œä¼šå‘ç”Ÿå¼•ç”¨æŠ˜å 
};
```

## äºŒçº§æŒ‡é’ˆ

çŸ©é˜µä¸¾ä¾‹

```cpp
#include <iostream>
class Matrix {
public:
    Matrix(int _row, int _col): row(_row), col(_col) {
        data = new float*[row]; //ç”³è¯·rowè¡Œï¼Œç±»å‹åŒ¹é…ï¼šdataæ˜¯äºŒçº§æŒ‡é’ˆï¼Œnewéœ€è¦å†é…ä¸€ä¸ªæŒ‡é’ˆ
        for (int i = 0; i < row; i++) { //éå†è¡Œ
            data[i] = new float[col]; //ç±»å‹åŒ¹é…ï¼šdata[i]æ˜¯ä¸€çº§æŒ‡é’ˆï¼Œç›´æ¥newå‡ºæ¥å°±æ˜¯ä¸€ä¸ªä¸€çº§æŒ‡é’ˆ
            for (int j = 0; j < col; j++) {
                data[i][j] = 0; //åˆå§‹åŒ–ä¸º0
            }
        }
    }
    Matrix(const Matrix& mx) {
        row = mx.row;
        col = mx.col;
        data = new float*[row]; //ç±»å‹ï¼šäºŒçº§æŒ‡é’ˆ
        for (int i = 0; i < row; i++) {
            data[i] = new float[col]; //ç±»å‹ï¼šä¸€çº§æŒ‡é’ˆ
            for (int j = 0; j < col; j++) {
                data[i][j] = mx.data[i][j]; //æ‹·è´
            }
        }
    }
    ~Matrix() {
        if (nullptr != data) {
            for (int i = 0; i < row; i++) {
                if (data[i]) {
                    delete[] data[i];
                    data[i] = nullptr; //é‡Šæ”¾äºŒçº§æŒ‡é’ˆ
                }
            }
            delete[] data;
            data = nullptr; //é‡Šæ”¾ä¸€çº§æŒ‡é’ˆ
        }
    }
private:
    int row; //è¡Œ
    int col; //åˆ—
    float** data = nullptr; //äºŒç»´æ•°ç»„
};
```

## å››å¤§ç±»å‹è½¬æ¢

- static_castï¼Œç”¨äºåŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´ï¼ŒæŒ‡é’ˆæˆ–å¼•ç”¨çš„è½¬æ¢
  	- ä¸Šè¡Œè½¬æ¢ï¼ˆå°†æ´¾ç”Ÿç±»æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆ/å¼•ç”¨ï¼‰æ˜¯å®‰å…¨çš„ï¼Œç›¸å½“äºå°†å“ˆå£«å¥‡é€€åŒ–æˆçŠ¬ç§‘æ˜¯å®‰å…¨çš„
  	- ä¸‹è¡Œè½¬æ¢ï¼ˆå°†åŸºç±»æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆ/å¼•ç”¨ï¼‰ä¸å®‰å…¨çš„ï¼Œç›¸å½“äºå°†çŠ¬ç±»éƒ½â€œè¿›åŒ–â€æˆå“ˆå£«å¥‡å¾ˆä¸å®‰å…¨
  	- æŠŠ void* è½¬æ¢æˆç›®æ ‡ç±»å‹çš„æŒ‡é’ˆæ˜¯ä¸å®‰å…¨çš„ï¼Œç›¸å½“äºç¼©å°åœˆå­æè¿›åŒ–æ˜¯ä¸å®‰å…¨çš„
  	- æŠŠä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼è½¬ä¸ºvoidç±»å‹æ˜¯å¯ä»¥çš„
- const_castï¼Œå»é™¤ç±»å‹çš„ const æˆ– volatile å±æ€§

```cpp
const char* p;
char* l = const_cast<char*>(p); //æ­£ç¡®
```

- dynamic_castï¼Œç»§æ‰¿ä½“ç³»ä¸­çš„å®‰å…¨å‘ä¸‹è½¬å‹ç›¸å½“äºå¯¹static_castçš„è¡¥å……
	- å¯ä»¥å®‰å…¨çš„å°†åŸºç±»æŒ‡é’ˆ/å¼•ç”¨è½¬ä¸ºå­ç±»æŒ‡é’ˆ/å¼•ç”¨ï¼Œè½¬å‹å¤±è´¥å°±è¿”å›NULL
 	- åªæœ‰åœ¨åŸºç±»å¸¦æœ‰è™šå‡½æ•°çš„æƒ…å†µä¸‹æ‰å…è®¸è½¬ä¸ºæ´¾ç”Ÿç±»
- reinterpret_castï¼Œæ¯”è¾ƒä¾èµ–äºæœºå™¨ï¼Œæœ¬èº«ä¹Ÿå¾ˆå°‘ä½¿ç”¨ 

## æŒ‡é’ˆå‡½æ•° & å‡½æ•°æŒ‡é’ˆ

#### æŒ‡é’ˆå‡½æ•°

æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯æŒ‡é’ˆï¼Œæ ¼å¼å¦‚ï¼š `reference* func(args...);`

funcæ˜¯å‡½æ•°ï¼Œreference*ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œæ˜¯funcçš„è¿”å›å€¼ã€‚args...æ˜¯å½¢å‚åˆ—è¡¨ã€‚

#### å‡½æ•°æŒ‡é’ˆ

æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å®ƒæ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°çš„å®šä¹‰ä½äºä»£ç æ®µï¼Œæ‰€ä»¥æ¯ä¸ªå‡½æ•°åœ¨ä»£ç æ®µä¸­éƒ½æœ‰ä¸€ä¸ªå…¥å£åœ°å€ï¼Œå‡½æ•°æŒ‡é’ˆå°±æ˜¯æŒ‡å‘ä»£ç æ®µä¸­å‡½æ•°å…¥å£åœ°å€çš„æŒ‡é’ˆ

æ ¼å¼å¦‚ï¼š `reference (*p)(args...);`

referenceä¸ºè¿”å›å€¼ï¼Œ*pæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä»£è¡¨æŒ‡å‘è¯¥å‡½æ•°çš„æŒ‡é’ˆï¼Œå•ç‹¬çš„pä¸ºå‡½æ•°æŒ‡é’ˆå˜é‡ã€‚args...æ˜¯å½¢å‚åˆ—è¡¨ã€‚

å‡½æ•°æŒ‡é’ˆçš„åˆå§‹åŒ–ï¼šå‡½æ•°æŒ‡é’ˆå˜é‡ = å‡½æ•°å

ä¸¾ä¸ªä¾‹å­ï¼š

```cpp
int max(int a, int b) {
    return a > b ? a : b;
}
int main() {
    int (*p)(int, int); //å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰
    p = &max; //å‡½æ•°æŒ‡é’ˆåˆå§‹åŒ–
    //æˆ–è€…ç›´æ¥p = maxï¼Œå› ä¸ºå‡½æ•°åæœ¬èº«å°±ä»£è¡¨å‡½æ•°çš„åœ°å€
    int ans = p(10, 7); //å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨
    std::cout << ans << std::endl;
}
```

#### å›è°ƒå‡½æ•°

å‡½æ•°æŒ‡é’ˆçš„å…¸å‹åº”ç”¨å°±æ˜¯å›è°ƒå‡½æ•°ï¼ŒåŸç†æ˜¯å°†å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚

å›è°ƒå‡½æ•°ç›¸å½“äºä¸€ä¸ªä¸­æ–­å¤„ç†å‡½æ•°ï¼Œç”±ç³»ç»Ÿåœ¨ç¬¦åˆä½ è®¾å®šçš„æ¡ä»¶æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚ç”¨æˆ·åªè¦åšä¸‰ä»¶äº‹ï¼šå£°æ˜+å®šä¹‰+è®¾ç½®è§¦å‘æ¡ä»¶



```cpp
int sum(int a, int b) {
    return a + b;
}
//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œé€šè¿‡è¯¥å‡½æ•°æŒ‡é’ˆè°ƒç”¨sumå‡½æ•°
int callback(int m, int n, int (*p)(int, int)) {
    return p(m, n);
}
int main() {
    std::cout << callback(3, 2, sum) << std::endl;
}
```

å›è°ƒå‡½æ•°ä¸å…³å¿ƒsumå…·ä½“å¦‚ä½•å®ç°ï¼Œåªéœ€è¦å»è°ƒç”¨å³å¯ï¼Œå‡å¦‚ä»¥åä»£ç è¿­ä»£ï¼Œåªéœ€è¦ä¿®æ”¹sumè€Œæ— éœ€åŠ¨callbackå‡½æ•°

## ä¸¥ç¦è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆå’Œå¼•ç”¨

å› ä¸ºå±€éƒ¨å˜é‡åœ¨å‡½æ•°çš„æ ˆåŒºä¸­åˆ†é…å†…å­˜ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆåŒºå†…å­˜è‡ªåŠ¨å›æ”¶ï¼ŒåŒ…æ‹¬å…¶ä¸­çš„å±€éƒ¨å˜é‡ã€‚å‡å¦‚è¿™æ—¶è¿”å›äº†å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼ˆæˆ–è€…è¯´è¯¥å±€éƒ¨å˜é‡åœ¨æ ˆä¸Šçš„åœ°å€ï¼‰ï¼Œè¯¥åœ°å€æŒ‡å‘çš„å†…å­˜åŒºåŸŸå·²ç»è¢«é‡Šæ”¾äº†ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªæ— æ•ˆçš„å¼•ç”¨ï¼ŒæŒ‡å‘ä¸€ç‰‡æœªå®šä¹‰çš„å†…å­˜ï¼Œæœ‰å¾ˆå¤§çš„å®‰å…¨éšæ‚£

## new/delete å’Œ malloc/free

- mallocéœ€è¦æ‰‹åŠ¨è®¡ç®—åˆ†é…ç©ºé—´å¤§å°ï¼Œnewä¸éœ€è¦
- malloc/freeæ˜¯åº“å‡½æ•°ï¼Œä¸æ”¯æŒé‡è½½ï¼›new/deleteæ˜¯æ“ä½œç¬¦ï¼Œæ”¯æŒè¿ç®—ç¬¦é‡è½½
- newæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œmallocä¸æ˜¯
- newåˆ†é…æˆåŠŸè¿”å›ç±»å‹æŒ‡é’ˆï¼Œä¸éœ€è¦è½¬æ¢ï¼›mallocåˆ†é…æˆåŠŸè¿”å›void*ï¼Œéœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢
- newåˆ†é…å†…å­˜å¤±è´¥ä¼šæŠ›bac_allocå¼‚å¸¸ï¼Œmallocåˆ†é…å¤±è´¥è¿”å›nullptr
- mallocä»…åˆ†é…å†…å­˜ç©ºé—´ï¼Œfreeä»…å›æ”¶ç©ºé—´ï¼›newå’Œdeleteé™¤äº†åˆ†é…å’Œé‡Šæ”¾å¤–ï¼Œè¿˜èƒ½è°ƒç”¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°
- newåº•å±‚è°ƒç”¨ operator new åˆ†é…ç©ºé—´å¹¶æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œè€Œoperator newåˆå°è£…äº†mallocã€‚deleleå…ˆè¿è¡Œææ„å‡½æ•°ï¼Œä¹‹åè¿è¡Œoperator delete

### freeå‡½æ•°åªæ¥æ”¶ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå®ƒæ˜¯å¦‚ä½•çŸ¥é“è¦åˆ†é…å¤šå¤§å†…å­˜ï¼Ÿ

mallocè¿”å›çš„èµ·å§‹åœ°å€æ¯”ç©ºé—´åœ°å€å¤šäº†16å­—èŠ‚ï¼Œè¿™16å­—èŠ‚ä¿å­˜äº†å†…å­˜å—æè¿°ä¿¡æ¯ï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†å†…å­˜å—å¤§å°

æ‰§è¡Œfreeæ—¶ï¼Œfreeå°†ä¼ å…¥çš„åœ°å€å‘å·¦åç§»16å­—èŠ‚ï¼Œè¿›è€Œåˆ†æå‡ºå†…å­˜å—å¤§å°ï¼Œå°±çŸ¥é“è¦é‡Šæ”¾å¤šå¤§çš„å†…å­˜äº†

## å † å’Œ æ ˆ

![å †vsæ ˆ](https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/hoop.png)

ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”

- æ ˆ

```cpp
class complex {};
class Other {
	complex c1; //c1å°±æ˜¯æ ˆå¯¹è±¡ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸåœ¨ä½œç”¨åŸŸç»“æŸåè‡ªåŠ¨ç»“æŸ
};
```

```cpp
class complex {};
int main() {
	static complex c2; //c2å°±æ˜¯é™æ€æ ˆå¯¹è±¡ï¼Œä½œç”¨åŸŸç»“æŸåä»ç„¶å­˜æ´»ï¼Œç›´åˆ°æ•´ä¸ªç¨‹åºç»“æŸ
}
```

```cpp
class complex {};
complex c3; //c3å°±æ˜¯å…¨å±€å¯¹è±¡ï¼Œç”Ÿå‘½åœ¨æ•´ä¸ªç¨‹åºç»“æŸåæ‰é‡Šæ”¾
int main() { }
```

- å †

```cpp
class complex {};
int main() {
	complex* p = new complex;
	......
	delete p;
}
```

pæŒ‡å‘çš„å°±æ˜¯å †å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸåœ¨è¢«deleteåç»“æŸã€‚

å¦‚æœä¸deleteå°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œå› ä¸ºå½“ä½œç”¨åŸŸç»“æŸï¼Œpæ‰€æŒ‡çš„å †å¯¹è±¡ä»ç„¶å­˜åœ¨ï¼Œä½†æŒ‡é’ˆpç”Ÿå‘½å‘¨æœŸå´ç»“æŸäº†ï¼Œä½œç”¨åŸŸä¹‹å¤–å†ä¹Ÿçœ‹ä¸åˆ°æŒ‡é’ˆpï¼Œä¹Ÿæ²¡æœºä¼šdelete päº†

## å †æ ˆæº¢å‡ºå¸¸è§åŸå› 

- å‡½æ•°é€’å½’è°ƒç”¨æ—¶ï¼Œæ ˆä¸­ä¼šä¸æ–­ä¿å­˜å‡½æ•°è°ƒç”¨æ—¶äº§ç”Ÿçš„å˜é‡ï¼Œå¦‚æœé€’å½’è°ƒç”¨å¤ªæ·±ï¼Œæ ˆæ— æ³•å®¹çº³å‡½æ•°çš„è¿”å›åœ°å€ï¼Œä»è€Œæ ˆæº¢å‡º
- åŠ¨æ€ç”³è¯·ç©ºé—´åæœªé‡Šæ”¾ã€‚ç”³è¯·çš„åŠ¨æ€ç©ºé—´ä½¿ç”¨çš„æ˜¯å †ç©ºé—´ï¼ŒåŠ¨æ€ç©ºé—´ä½¿ç”¨ä¸å½“é€ æˆå †æº¢å‡ºã€‚
- æ•°ç»„è®¿é—®è¶Šç•Œ
- æŒ‡é’ˆéæ³•è®¿é—®

## å†…å­˜æ³„æ¼

é€šå¸¸æŒ‡å †å†…å­˜çš„æ³„æ¼ã€‚ä½¿ç”¨mallocã€newç­‰å‡½æ•°ä»å †ä¸­åˆ†é…åˆ°å—å†…å­˜ï¼Œä½¿ç”¨å®Œåï¼Œç¨‹åºå¿…é¡»è°ƒç”¨freeæˆ–deleteé‡Šæ”¾è¯¥å†…å­˜å—ï¼Œå¦åˆ™ï¼Œè¿™å—å†…å­˜å°±ä¸èƒ½è¢«å†æ¬¡ä½¿ç”¨ï¼Œå³å†…å­˜æ³„æ¼äº†

- å¿˜è®°é‡Šæ”¾å†…å­˜
- æœªé‡Šæ”¾å†…å­˜å†æ¬¡ç”³è¯·

```cpp
int *ptr = new int;
ptr = new int; //åŸæ¥çš„å†…å­˜æ³„æ¼
```

- é™æ€å˜é‡å¯¼è‡´å†…å­˜æ³„æ¼
- å…±äº«å‹æ™ºèƒ½æŒ‡é’ˆå¾ªç¯å¼•ç”¨

å¦‚ä½•è§£å†³æˆ–é¢„é˜²ï¼Ÿ

- ä½¿ç”¨[æ™ºèƒ½æŒ‡é’ˆ](https://github.com/arqady01/Cpp-interface/blob/main/src/smart%20pointer/smart_pointer.md)
- ä½¿ç”¨shared_ptræ—¶ï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œå³Aå¯¹è±¡æŒæœ‰Bå¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆï¼ŒåŒæ—¶Bå¯¹è±¡ä¹ŸæŒæœ‰Açš„æ™ºèƒ½æŒ‡é’ˆï¼Œè¿™æ ·ä¼šå¯¼è‡´å¼•ç”¨è®¡æ•°æ— æ³•å‡ä¸ºé›¶é€ æˆå†…å­˜æ³„æ¼
- å…»æˆè‰¯å¥½çš„ç¼–ç¨‹è§„èŒƒï¼Œè®©newå’Œdeleteï¼Œæˆ–è€…mallocå’Œfreeæˆå¯¹å‡ºç°
- å®šä¹‰ä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼Œåˆ†é…å†…å­˜æ—¶å˜é‡åŠ ä¸€ï¼Œææ„æ—¶å˜é‡å‡ä¸€ï¼Œç¨‹åºç»“æŸæ—¶è‹¥å˜é‡ä¸ä¸ºé›¶è¯´æ˜å†…å­˜æ³„æ¼
- å¯ä»¥ä½¿ç”¨å®å’Œé¢„å®šä¹‰å®æ¥å®šä½å†…å­˜æ³„æ¼ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªåä¸ºDEBUG_NEWçš„å®ï¼Œå¹¶ç»“åˆé¢„å®šä¹‰çš„__FILE__å’Œ__LINE__å®ï¼Œå¯ä»¥è·Ÿè¸ªå†…å­˜æ³„æ¼å‘ç”Ÿçš„æ–‡ä»¶å’Œè¡Œå·ï¼Œä»è€Œå¸®åŠ©å®šä½
- OOPæ—¶ï¼ŒåŸºç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°
- æ•°ç»„å¯¹è±¡çš„é‡Šæ”¾éœ€è¦ç”¨delete[]ï¼Œè®©æ•°ç»„ä»åå¾€å‰ä¸€ä¸€é‡Šæ”¾
- å€ŸåŠ©Valgrindå·¥å…·æ¥å¸®åŠ©è¯†åˆ«å†…å­˜æ³„æ¼

## å†…å­˜å¯¹é½

å†…å­˜å¯¹é½æ˜¯æŒ‡åœ¨ä¸ºç»“æ„ä½“çš„æˆå‘˜åˆ†é…å†…å­˜æ—¶ï¼Œç¡®ä¿æ¯ä¸ªæˆå‘˜ç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„åç§»é‡æ˜¯è¯¥æˆå‘˜ç±»å‹å¤§å°çš„æ•´æ•°å€

å†…å­˜å¯¹é½æ˜¯ä¸ºäº†æé«˜å†…å­˜è®¿é—®æ•ˆç‡ï¼Œå› ä¸ºå¤§å¤šæ•°ç¡¬ä»¶å¹³å°è®¿é—®å¯¹é½çš„å†…å­˜æ•°æ®æ—¶é€Ÿåº¦æ›´å¿«ã€‚

- ç»“æ„ä½“çš„èµ·å§‹åœ°å€å¯¹é½äºæœ€å®½åŸºæœ¬ç±»å‹æˆå‘˜çš„å¤§å°
- ç»“æ„ä½“æ¯ä¸ªæˆå‘˜ç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„åç§»é‡åº”è¯¥æ˜¯è¯¥æˆå‘˜ç±»å‹å¤§å°çš„æœ€å°æ•´æ•°å€
- ç»“æ„ä½“çš„æ€»å¤§å°æ˜¯å…¶æœ€å®½åŸºæœ¬ç±»å‹æˆå‘˜å¤§å°çš„æ•´æ•°å€ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ä¼šåœ¨ç»“æ„ä½“çš„æœ€åæ·»åŠ å¡«å……å­—èŠ‚

æœ‰äº›ç¼–è¯‘å™¨å…è®¸é€šè¿‡ç‰¹å®šçš„ç¼–è¯‘æŒ‡ä»¤æˆ–è€…#pragmaæŒ‡ä»¤æ¥ä¿®æ”¹é»˜è®¤çš„å¯¹é½æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨GCCä¸­å¯ä»¥ä½¿ç”¨`__attribute__((packed))`æ¥å‘Šè¯‰ç¼–è¯‘å™¨ä¸å¯¹ç»“æ„ä½“è¿›è¡Œå¡«å……å¯¹é½ã€‚

C++11å¼•å…¥äº†`alignas`å…³é”®å­—ï¼Œå…è®¸æŒ‡å®šå˜é‡æˆ–ç»“æ„ä½“æˆå‘˜çš„å¯¹é½è¦æ±‚

## std::function

å‡½æ•°åŒ…è£…å™¨æ”¯æŒå››ç§ç±»å‹

- æ™®é€šå‡½æ•°
- åŒ¿åå‡½æ•°
- æˆå‘˜å‡½æ•°
- ä»¿å‡½æ•°

1.æ™®é€šå‡½æ•°

```cpp
#include <functional>
#include <iostream>
int add(int x, int y) {
	return x + y;
}
int main() {
	std::function<int(int, int)> f = &add; // "=add" is okay
	std::cout << "ä¸¤æ•°ç›¸åŠ ç­‰äº" << f(3.14, 2) << std::endl;
}
```

2.åŒ¿åå‡½æ•°

```cpp
int main() {
	std::function<int(int, int)> fu = [](int a, int b)->int {
		return a + b;
	};
	std::cout << fu(8, 12) << std::endl;
}
```

3.æˆå‘˜å‡½æ•°

```cpp
#include <functional>
#include <iostream>
#include <string>
class test {
public:
	test() = default;
	std::string addString(std::string str, int x) {
		return str + std::to_string(x);
	}
};
int main() {
	//test::addString()éœ€è¦å–åœ°å€ï¼Œå”¯ä¸€çš„å˜åŒ–å°±æ˜¯éœ€è¦å°†ç±»çš„thisæŒ‡é’ˆä¼ é€’ç»™åŒ…è£…å™¨
	std::function<std::string(test*, std::string, int)> fun = &test::addString;
	test t; //å®ä¾‹åŒ–
	std::cout << fun(&t, "Messi", 10);
}
```

4.ä»¿å‡½æ•°

```cpp
class test {
public:
	test() = default;
	//å› ä¸ºè¿”å›çš„å¯¹è±¡è¿˜æœªæ„é€ ï¼Œæ‰€ä»¥è¿”å›å€¼ç±»å‹ä¸èƒ½æ˜¯å¼•ç”¨
	std::string operator()(std::string str, int x) {
		return str.append(std::to_string(x));
	}
};
int main() {
	std::function<std::string(test*, std::string, int)> func = &test::operator();
	test t;
	std::cout << func(&t, "messi", 10) << std::endl;
}
```

### bindæœºåˆ¶

```cpp
int append(int a, int b, int c) {
	return a * 100 + b * 10 + c;
}
int main() {
	auto add = std::bind(append, 3, 4, 5);
	std::cout << add() << std::endl;
}
```

## æ’åºç®—æ³•

### å†’æ³¡æ’åº

å‡è®¾æ•°ç»„é•¿åº¦ä¸º nï¼Œä»å¤§åˆ°å°æ’åºä¸¾ä¾‹ï¼š

æ¯”è¾ƒç›¸é‚»çš„å‰åä¸¤ä¸ªæ•°æ®ï¼Œè‹¥å‰é¢çš„æ•°æ®å¤§äºåé¢ï¼Œå°±äº¤æ¢äºŒè€…

å¤–å¾ªç¯æ˜¯æ¯”è¾ƒçš„è½®æ¬¡æ•°ï¼Œæ¯æ¯”è¾ƒä¸€è½®ï¼Œå°±èƒ½ç¡®å®šå‡ºæœ€å¤§çš„ä¸€ä¸ªæ•°å­—ï¼Œæ¯”å¦‚nä¸º5ï¼Œåªéœ€æ¯”è¾ƒ4è½®å°±èƒ½å°±èƒ½ç¡®å®šæœ€å¤§çš„4ä¸ªæ•°å­—

å†…å¾ªç¯æ˜¯æ¯è¶Ÿéœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°ï¼Œæ¯”å¦‚ç¬¬ i èººï¼Œè¦ä»å‰å¾€åæ¯”è¾ƒ n - i æ¬¡

```cpp
#include <iostream>
void swap(int* x, int* y) {
    int temp = *x;
    *x = *y;
    *y = temp;
}
void bubble(int arr[], int n) {
    for (int i = 0; i < n - 1; ++i) {
        for (int j = 0; j < n - i - 1; ++j) {
            if (arr[j] > arr[j + 1]) {
                swap(&arr[j], &arr[j + 1]);
            }
        }
    }
}
int main() {
    int nums[5] = {5,4,3,2,1};
    bubble(nums, 5);
    for (auto i : nums) {
        std::cout << i << " ";
    }
}
```

### é€‰æ‹©æ’åº

ä¸ç¨³å®šç®—æ³•ï¼šä¸¾ä¸ªä¾‹å­ï¼Œåºåˆ— 5ï¼Œ8ï¼Œ5ï¼Œ2ï¼Œ9ï¼Œç¬¬ä¸€æ¬¡æ’åºä¸­ï¼Œ5å’Œç¬¬å››ä¸ªå…ƒç´ 2äº¤æ¢ï¼Œé‚£ä¹ˆåŸåºåˆ—ä¸­ä¸¤ä¸ª5çš„ç›¸å¯¹é¡ºåºå°±ç ´åäº†

1. ä¸€å¼€å§‹å°†ç¬¬ä¸€ä¸ªå…ƒç´ å½“ä½œå·²æ’åºçš„åºåˆ—
2. åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°å…ƒç´ ï¼Œæ’å…¥åˆ°å·²æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®
3. ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾
4. ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•

æ—¶é—´å¤æ‚åº¦O(n2)ï¼Œä¸ç¨³å®šæ’åºï¼ŒåŸåœ°æ’åº

```cpp
#include <iostream>
#include <algorithm>
void swap(int* x, int* y) {
    int temp = *x;
    *x = *y;
    *y = temp;
}
//nï¼šæ•°ç»„é•¿åº¦
void selectSort(int arr[], int n) {
    int minIndex = 0; //æœªæ’åºåºåˆ—ä¸­çš„æœ€å°å…ƒç´ çš„ä¸‹æ ‡
    for (int i = 0; i < n; i++) {
        minIndex = i; //å‡è®¾æœ€å°å…ƒç´ çš„ä¸‹æ ‡å°±æ˜¯æœªæ’åºåºåˆ—çš„èµ·å§‹å…ƒç´ ä¸‹æ ‡
        for (int j = i + 1; j < n; j++) {
            if (arr[j] < arr[minIndex]) {
                minIndex = j; //è®°å½•ä¸‹è¡¨ï¼Œä¸åšå®é™…çš„äº¤æ¢åŠ¨ä½œ
            }
        }
        swap(&arr[i], &arr[minIndex]);
    }
}
int main() {
    int nums[5] = {5,4,3,2,1};
    selectSort(nums, 5);
    for (auto i : nums) {
        std::cout << i << " ";
    }
}
```

### æ’å…¥æ’åº

```cpp
#include <iostream>
//nï¼šæ•°ç»„é•¿åº¦
void insertSort(int arr[], int n) {
    for (int i = 1; i < n; i++) {
        if (arr[i - 1] >arr[i]) {
            int temp = arr[i];
            int j = 0;
            for (j = i; j >= 0 && arr[j - 1] > temp; j--) {
                arr[j] = arr[j - 1];
            }
            arr[j] = temp;
        }
    }
}
int main() {
    int nums[5] = {5,4,3,2,1};
    insertSort(nums, 5);
    for (auto i : nums) {
        std::cout << i << " ";
    }
}
```

### å¿«é€Ÿæ’åºã€éš¾ç†è§£å°±ç›´æ¥è®°ä½å§ã€‘

å› ä¸ºæ’åºçš„æ—¶å€™ç›¸å½“äºäºŒå‰æ ‘ï¼Œæ’åºçš„è¶Ÿæ•°ç›¸å½“äºäºŒå‰æ ‘çš„å±‚æ•°log2n + 1ï¼›æœ€å¤–å±‚åŒ…ç€ä¸€å±‚å¾ªç¯æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼›æ—¶é—´å¤æ‚åº¦ä¸ºO(nlog2n)

æ­¥éª¤ï¼š

1. å°†åˆ†ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºæ¢è½´ï¼Œæ¯”æ¢è½´å¤§çš„å…ƒç´ æ”¾åˆ°å³è¾¹ï¼Œæ¯”æ¢è½´å°çš„å…ƒç´ æ”¾åˆ°å·¦è¾¹
2. å¯¹å·¦å­è¡¨é‡å¤ç¬¬ä¸€æ­¥
3. å¯¹å³å­è¡¨é‡å¤ç¬¬ä¸€æ­¥ï¼Œç›´åˆ° left ä¸å†< rightï¼Œä¹Ÿå°±æ˜¯åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå®Œæ¯•

```cpp
#include <iostream>
//å¿«æ’è¾…åŠ©å‡½æ•°ï¼Œå°†æ•°ç»„åˆ’åˆ†ä¸º2éƒ¨åˆ†
int partition(int arr[], int left, int right) {
    int pivot = arr[left]; //æ¢è½´å…ƒç´ 
    while (left < right) {
        while (left < right && arr[right] >= pivot)
            --right; //å¦‚æœå³åŠéƒ¨åˆ†å…ƒç´ å¤§äºæ¢è½´ï¼Œä¸éœ€è¦ç§»åŠ¨ï¼Œç§»åŠ¨æŒ‡é’ˆå»æ¯”è¾ƒä¸‹ä¸€ä¸ªå…ƒç´ 
        arr[left] = arr[right]; //åœ¨å³åŠè¾¹æ‰¾åˆ°å°äºæ¢è½´çš„å…ƒç´ ï¼Œäº¤æ¢
        while (left < right && arr[left] < pivot)
            ++left;
        arr[right] = arr[left];
    }
    arr[left] = pivot; //æ¢è½´å…ƒç´ å­˜æ”¾åˆ°æœ€ç»ˆä½ç½®
    return left;
}
//å¿«æ’å‡½æ•°
void quickSort(int nums[], int left, int right) {
    if (left < right) {
        int pos = partition(nums, left, right);
        quickSort(nums, left, pos - 1); //åˆ’åˆ†å·¦å­è¡¨
        quickSort(nums, pos + 1, right); //åˆ’åˆ†å³å­è¡¨
    }
}
int main() {
    int nums[5] = {5,4,3,2,1};
    quickSort(nums, 0, 4);
    for (auto i : nums) {
        std::cout << i << " ";
    }
}
```

### å †æ’åº

å †æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œå¹¶ä¸”çˆ¶èŠ‚ç‚¹çš„å€¼å¤§äºå­©å­èŠ‚ç‚¹

å› ä¸ºæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå°±èƒ½å°†äºŒå‰æ ‘çš„èŠ‚ç‚¹åæ ‡å’Œæ•°ç»„æ˜ å°„ä¸Šï¼Œæ¯”å¦‚äºŒå‰æ ‘ï¼š5-8-10-3-4-6-7-1-2ï¼Œä»–çš„åæ ‡ä¸º0~8ï¼Œå‡è®¾ä¸€èŠ‚ç‚¹çš„åºå·ä¸ºiï¼Œé‚£ä¹ˆï¼š

```
parent = (i - 1) / 2;
child1 = 2 * i + 1;
child2 = 2 * i + 2;
```

ä»‹ç»ä¸€ä¸‹heapify()æ“ä½œï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå…ƒç´ åœ°å€ï¼Œé€’å½’çš„å°†æ­¤å…ƒç´ çš„å­å­©å­ä¸­æœ€å¤§çš„èŠ‚ç‚¹æŒªåˆ°å½“å‰ä½ç½®ï¼Œå¦‚å›¾ï¼š

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/heapify.jpg" style="width:90%;">
</p>

å…·ä½“ä»£ç ï¼š

```cpp
#include <iostream>
//äº¤æ¢æ“ä½œ
void swap(int* x, int* y) {
  int temp = *x;
  *x = *y;
  *y = temp;
}
//å·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹è½®æµå’Œå½“å‰èŠ‚ç‚¹iå¯¹æ¯”ï¼Œå–æœ€å¤§
int max(int arr[], int n, int i) {
  int max = i; //å‡è®¾iå¤„æ˜¯æœ€å¤§çš„
  int child1 = 2 * i + 1; //å·¦å­èŠ‚ç‚¹çš„åæ ‡
  int child2 = 2 * i + 2; //å³å­èŠ‚ç‚¹çš„åæ ‡  
  if (child1 < n && arr[child1] > arr[max]) max = child1;
  if (child2 < n && arr[child2] > arr[max]) max = child2;
  return max;
}
//é€’å½’å®ç°ï¼Œå°†iå·èŠ‚ç‚¹åŠå®ƒçš„å­æ ‘å˜æˆå¤§æ ¹å †
void heapify(int arr[], int n, int i) {
  if (i >= n) return; //é€’å½’é€€å‡ºæ¡ä»¶
  int maximum = max(arr, n, i); //æ³¨æ„maximumæ˜¯æœ€å¤§å€¼çš„ä¸‹æ ‡
  if (maximum != i) { //åªæœ‰æœ€å¤§å€¼ä¸æ˜¯èŠ‚ç‚¹iè‡ªå·±ï¼Œ
    swap(&arr[maximum], &arr[i]); //æ‰éœ€è¦å°†æœ€å¤§å€¼ç§»åŠ¨åˆ°æ ¹èŠ‚ç‚¹
    heapify(arr, n, maximum); //ç„¶åé€’å½’
  }
}
//å»ºé€ å¤§æ ¹å †
void build_heap(int arr[], int n) {
  int last_node = (n - 1);
  int last_node_parent = (last_node - 1) / 2;
  for (int i = last_node_parent; i >= 0; i--) {
    heapify(arr, n, i);
  }
}
//æœ€ç»ˆæ’åºæ“ä½œ
void sort(int arr[], int n) {
  //åœ¨å¤§æ ¹å †ä¸­ï¼Œæ ¹èŠ‚ç‚¹çš„å€¼æ— ç–‘æ˜¯æœ€å¤§çš„ï¼Œäº¤æ¢æ ¹èŠ‚ç‚¹å’Œæœ€åçš„å¶å­èŠ‚ç‚¹
  for (int i = n - 1; i >= 0; i--) {
    swap(&arr[0], &arr[i]);
    //iä¼šä¸æ–­å‡å°‘ï¼Œæ„æ€å°±æ˜¯æœ€åçš„èŠ‚ç‚¹ä¸ç”¨å†çº³å…¥heapify()ï¼Œä½†æ˜¯å®ƒå¹¶æœªä»å †ä¸­åˆ é™¤
    heapify(arr, i, 0); //è€Œä¸”æ˜¯å¯¹æ ¹èŠ‚ç‚¹å¼€å§‹åšheapify()
  }
}
int main() {
  int nums[9]  = {5,8,10,3,4,6,7,1,2};
  // heapify(nums, 9, 0); //æµ‹è¯•heapifyæ“ä½œ
  build_heap(nums, 9); //å»ºç«‹å¤§æ ¹å †
  sort(nums, 9);
  for (auto i : nums) std::cout << i << " ";
  std::cout << std::endl;
}
```

[leetcodeçš„å †æ’åº](https://leetcode.cn/problems/sort-an-array/description/)

<h1 id="template">ğŸ“¡ æ¨¡æ¿å…ƒç¼–ç¨‹</h1>

## std::decay

å»é™¤æ¨¡æ¿ç±»å‹Tçš„æ‰€æœ‰ä¿®é¥°ï¼Œæ¯”å¦‚constã€å¼•ç”¨ç­‰

```cpp
int main() {
    int a = 10;
    int& b = a;
    std::decay<decltype(b)>::type as = 8;
}
```

## å›ºå®šèƒå–

ç»™å®šä¸€ä¸ªç±»å‹ï¼Œèƒå–å¦å¤–ä¸€ç§ç±»å‹ï¼Œå› ä¸ºå…³ç³»å›ºå®šï¼ˆæ¨¡æ¿ç‰¹åŒ–ï¼‰ï¼Œæ‰€ä»¥ä¹Ÿç§°å›ºå®šèƒå–ã€‚å› ä¸ºarray2è¢«æ¨æ–­ä¸ºintï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šä¸€ä¸ªæ¨¡æ¿å‚æ•°Uè®©å…¶ï¼š

```cpp
#include <iostream>
template <typename U, typename T>
U sum(const T* begin, const T* end) {
    U sum{}; //é›¶åˆå§‹åŒ–ï¼Œå¦‚æœæ•´å‹å˜é‡å°±åˆå§‹åŒ–ä¸º0ï¼ŒæŒ‡é’ˆå‹åˆå§‹åŒ–ä¸ºnullptrï¼Œboolå‹åˆå§‹åŒ–false....
    while (begin <= end) {
        sum += *begin;
        begin++;
    }
    return sum;
}
int main() {
    int array1[] = { 30, 40, 50 };
    char array2[] = "abc"; //97,98,99
    std::cout << sum<int>(array1, &array1[2]) << std::endl;
    std::cout << sum<int>(array2, &array2[2]) << std::endl;
}
```

è¿˜æ˜¯ä¸é€šç”¨ï¼Œå¯åˆ©ç”¨æ¨¡æ¿ä¸­çš„èƒå–ï¼š

```cpp
//traitsæ¨¡æ¿æ³›åŒ–
template <typename T>
struct sumTraits;

//traitsæ¨¡æ¿ç‰¹åŒ–
template <>
struct sumTraits<int> {
    using sumT = int;
};
template <>
struct sumTraits<char> {
    using sumT = int;
};

template <typename T>
auto sum(const T* begin, const T* end) {
    using my_sumT = typename sumTraits<T>::sumT;
    my_sumT sum{};
    while (begin <= end) {
        sum += *begin;
        begin++;
    }
    return sum;
}
int main() {
    int array1[] = { 30, 40, 50 };
    char array2[] = "abc"; //97,98,99
    std::cout << sum(array1, &array1[2]) << std::endl;
    std::cout << sum(array2, &array2[2]) << std::endl;
}
```

### ä¾‹å­2

```
template<typename T>
struct GetElem {};
template<>
struct GetElem<char> {
    using type = char;
};
template<>
struct GetElem<int> {
    using type = int;
};
template<>
struct GetElem<double> {
    using type = double;
};
template<typename T, std::size_t n>
struct GetElem<T[n]> {
    using type = T;
    static constexpr size_t size = n;
};
int main() {
    std::cout << typeid(GetElem<double>::type).name() << std::endl;
    std::cout << GetElem<int[10]>::size << std::endl;
}
```

## æ¨¡æ¿é€’å½’

æ¨¡æ¿å…ƒç¼–ç¨‹çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯å¯ä»¥ç›´æ¥åœ¨ç¼–è¯‘æœŸæ‰§è¡Œ

```cpp
//è®¡ç®—nçš„ç´¯å’Œ
#include <iostream>
//æ³›åŒ–
template <int n>
struct sum {
    static const int val = sum<n - 1>::val + n;
};
//ç‰¹åŒ–
template <>
struct sum<1> {
    static const int val = 1;
};
int main() {
    std::cout << sum<100>::val << std::endl;
}
```

## constexpr

```cpp
#include <iostream>
constexpr auto sum(int n) {
    if (1 == n) {
        return n;
    }
    return n + sum(n - 1);
}
int main() {
    constexpr auto ans = sum(100); //(1)
    sum(100);
}
```

å¯ä»¥åœ¨ç¼–è¯‘æœŸæ‰§è¡Œå°±åœ¨ç¼–è¯‘æœŸæ‰§è¡Œ(1)ï¼Œä¸èƒ½çš„è¯å°±æ”¾åˆ°è¿è¡ŒæœŸæ‰§è¡Œï¼š

```cpp
int args = 10;
auto ans = sum(args);
```

<h1 id="STL">ğŸ§­ STL</h1>

å®¹å™¨ | å†…éƒ¨æ•°æ®ç»“æ„ | æŸ¥æ‰¾çš„O(n) | å¢åˆ çš„O(n) | æœ‰åºæƒ…å†µ | èƒ½å¦é‡å¤ | å†…å­˜åŠ¨æ€åˆ†æ | å…¶ä»–å¤‡æ³¨
---|---|---|---|---|---|---|---
array|æ•°ç»„|éšæœºè¯»æ”¹O(1)|æ— æ³•å¢åˆ |æ— åº|å¯é‡å¤|å¤§å°åœ¨ç¼–è¯‘æœŸå°±å·²ç¡®å®šä¸å¯æ›´æ”¹|æ— æ³•å¢åŠ åˆ é™¤ï¼›ä¿®æ”¹å…ƒç´ é€šè¿‡æ›¿æ¢å®Œæˆ
vector|æ•°ç»„|éšæœºè®¿é—®ï¼ŒO(1)|O(n)|æ— åº|å¯é‡å¤|åŠ¨æ€å¢åŠ æˆ–å‡å°‘å…ƒç´ ï¼Œreserve()å¯ä»¥é¢„åˆ†é…å†…å­˜ï¼Œé¿å…å†…å­˜å¤šæ¬¡åˆ†é…|ç¼©å°å†…å­˜ç”¨swap
deque|ä¸è¿ç»­çš„æ•°ç»„å—æ˜ å°„åœ¨å†…å­˜æ•°ç»„ä¸­|éšæœºè®¿é—®O(1)|O(n)|æ— åº|å¯é‡å¤|åŠ¨æ€å®Œæˆï¼Œä¸æä¾›å†…å­˜ç®¡ç†çš„æˆå‘˜å‡½æ•°|ä¸­å¤®æ§åˆ¶å™¨ + ä¸è¿ç»­å†…å­˜å—ï¼Œæ”¯æŒé¦–å°¾å¿«é€Ÿå¢åˆ ï¼Œæ”¯æŒéšæœºè®¿é—®
queue|deque|æ— è¿­ä»£å™¨ï¼Œä¸å¯éšæœºè®¿é—®|åªå…è®¸å°¾éƒ¨æ’å…¥ã€å¤´éƒ¨åˆ é™¤|æ— åº|å¯é‡å¤||é€‚é…å™¨ï¼Œå…ˆè¿›å…ˆå‡º
stack|deque|æ— è¿­ä»£å™¨ï¼Œä¸å¯éšæœºè®¿é—®|åªå…è®¸åœ¨å¤´éƒ¨å¢åŠ /åˆ é™¤|æ— åº|å¯é‡å¤||é€‚é…å™¨ï¼Œå…ˆè¿›åå‡º
forward_list|å•å‘é“¾è¡¨|O(n)|O(1)|æ— åº|å¯é‡å¤|åŠ¨æ€å¢å‡æˆ–å‡å°‘|ä¸æ”¯æŒéšæœºè®¿é—®
list|åŒå‘é“¾è¡¨|O(n)|O(1)|æ— åº|å¯é‡å¤|åŠ¨æ€å¢å‡æˆ–å‡å°‘|ä¸æ”¯æŒéšæœºè®¿é—®ï¼Œå¯åŒå‘éå†
set|çº¢é»‘æ ‘|O(logn)|O(logn)|æœ‰åº|ä¸å¯é‡å¤||ä¸æ”¯æŒå…ƒç´ ç›´æ¥ä¿®æ”¹ï¼Œä¼šç ´åå…¶æ’åºå’Œå”¯ä¸€æ€§ï¼Œæƒ³ä¿®æ”¹å¿…é¡»å…ˆåˆ é™¤æ—§å…ƒç´ å†æ’å…¥æ–°å…ƒç´ |
multiset|çº¢é»‘æ ‘|O(logn)|O(logn)|æœ‰åº|å¯é‡å¤|||
map|çº¢é»‘æ ‘|O(logn)|O(logn)|æœ‰åº|ä¸å¯é‡å¤||â‘ keyå”¯ä¸€â‘¡operator[]å¯ä»¥æ›´æ”¹å…ƒç´ çš„å€¼â‘¢insertæ’å…¥é”®å€¼å¯¹ï¼Œoperator[]åœ¨keyä¸å­˜åœ¨æ—¶ä¹Ÿå¯ä»¥æ’å…¥pair|
multimap|çº¢é»‘æ ‘|O(logn)|O(logn)|æœ‰åº|å¯é‡å¤|||

å®¹å™¨ | å†…éƒ¨æ•°æ®ç»“æ„ | æŸ¥æ‰¾çš„O(n) | å¢åˆ çš„O(n) | æœ‰åºæƒ…å†µ | èƒ½å¦é‡å¤
---|---|---|---|---|---
unordered_set|å“ˆå¸Œè¡¨|O(1)ã€è‹¥å“ˆå¸Œç¢°æ’é€€åŒ–ä¸º(n)|åŒå‰|æ— åº|ä¸å¯é‡å¤|
unordered_multiset|å“ˆå¸Œè¡¨|O(1)ã€è‹¥å“ˆå¸Œç¢°æ’é€€åŒ–ä¸º(n)|åŒå‰|æ— åº|å¯é‡å¤|
unordered_map|å“ˆå¸Œè¡¨|O(1)ã€è‹¥å“ˆå¸Œç¢°æ’é€€åŒ–ä¸º(n)|åŒå‰|æ— åº|ä¸å¯é‡å¤|
unordered_multimap|å“ˆå¸Œè¡¨|O(1)ã€è‹¥å“ˆå¸Œç¢°æ’é€€åŒ–ä¸º(n)|åŒå‰|æ— åº|å¯é‡å¤|

## è¿­ä»£å™¨å¤±æ•ˆæƒ…å†µåˆ†æ

### vector

- å°¾æ’ï¼ˆpush_back | emplace_backï¼‰
    - è‹¥æ— éœ€å†…å­˜é‡åˆ†é…ï¼Œé‚£ä¹ˆå·²æœ‰å…ƒç´ çš„è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨ä¸ä¼šå¤±æ•ˆ
    - è‹¥å°¾æ’å¯¼è‡´æ‰©å®¹ï¼Œæ‰€æœ‰å…ƒç´ çš„è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨éƒ½å°†å¤±æ•ˆ
- æ’å…¥ï¼ˆinsertï¼‰
    - è‹¥æ— éœ€å†…å­˜é‡åˆ†é…ï¼Œåˆ™æ’å…¥ç‚¹ä¹‹å‰å…ƒç´ çš„è¿­ä»£å™¨ä¾æ—§æœ‰æ•ˆï¼Œè€Œæ’å…¥ç‚¹åŠä¹‹åå…ƒç´ çš„è¿­ä»£å™¨å‡ä¼šå¤±æ•ˆ
    - è‹¥æ’å…¥æ“ä½œå¯¼è‡´å†…å­˜é‡åˆ†é…ï¼Œæ‰©å®¹å¹¶å°†æ—§å…ƒç´ å¤åˆ¶è¿‡å»å¹¶åˆ é™¤ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨éƒ½ä¼šå¤±æ•ˆ
- åˆ é™¤ï¼ˆerase | pop_backï¼‰
    - åˆ é™¤å…ƒç´ ä¸ä¼šå¯¼è‡´å†…å­˜é‡åˆ†é…ï¼Œä½†è¢«åˆ é™¤å…ƒç´ åŠä¹‹åçš„å…ƒç´ éƒ½ä¼šå‘å‰ç§»åŠ¨ï¼Œæ‰€ä»¥è¢«åˆ é™¤å…ƒç´ å’Œä¹‹åå…ƒç´ çš„è¿­ä»£å™¨å°†å¤±æ•ˆï¼Œåˆ é™¤å…ƒç´ ä¹‹å‰çš„ä¸å—å½±å“
- æ¸…ç©ºæ“ä½œï¼ˆclearï¼‰
    - æ¸…ç©ºæ‰€æœ‰å…ƒç´ åï¼Œæ‰€æœ‰æŒ‡å‘å…ƒç´ çš„è¿­ä»£å™¨ã€æŒ‡é’ˆå’Œå¼•ç”¨éƒ½å°†å¤±æ•ˆï¼Œä½†vectorçš„å®¹é‡ä¸ä¼šæ”¹å˜

ä¸æä¾›å‡å°‘å®¹é‡æˆ–é‡Šæ”¾å¤šä½™å†…å­˜çš„æœºåˆ¶ã€‚å¦‚æœéœ€è¦ç¼©å° vector çš„å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨â€œswap trickâ€æŠ€æœ¯ï¼Œå³åˆ›å»ºä¸€ä¸ªæ–°çš„ vector å¹¶ä¸åŸæ¥çš„ vector äº¤æ¢å†…å®¹ï¼Œè¿™æ ·æ–°çš„ vector å°†å…·æœ‰åˆšå¥½åŒ¹é…å½“å‰å¤§å°çš„å®¹é‡

### deque

- æ’å…¥
    - åœ¨ä¸­é—´ä½ç½®æ’å…¥å…ƒç´ ï¼Œæ¶‰åŠåˆ°ç§»åŠ¨å…ƒç´ ï¼Œæ’å…¥ç‚¹åŠä¹‹åçš„æ‰€æœ‰è¿­ä»£å™¨å‡å¤±æ•ˆ
    - åœ¨å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œé™¤begin()å¤–ï¼Œå…¶ä»–è¿­ä»£å™¨ä¸ä¼šå¤±æ•ˆï¼Œå› ä¸ºæ”¯æŒåŒç«¯æ“ä½œ
    - åœ¨å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œé™¤end()å¤–ï¼Œå…¶ä»–è¿­ä»£å™¨ä¸ä¼šå¤±æ•ˆï¼Œå…¶å®å¾ˆå¥½éªŒè¯çš„
- åˆ é™¤
    - åœ¨ä¸­é—´æˆ–å°¾éƒ¨åˆ é™¤å…ƒç´ ï¼Œæ‰€æœ‰æŒ‡å‘è¢«åˆ é™¤å…ƒç´ åŠä¹‹åçš„è¿­ä»£å™¨éƒ½å¤±æ•ˆ
    - å¤´éƒ¨åˆ é™¤å…ƒç´ ï¼Œæ‰€æœ‰è¿­ä»£å™¨ä¾æ—§æœ‰æ•ˆï¼Œé™¤begin()è¿­ä»£å™¨å¤–
    - å°¾éƒ¨åˆ é™¤å…ƒç´ ï¼Œå…¶ä½™è¿­ä»£å™¨ä¾æ—§æœ‰æ•ˆï¼Œé™¤end()è¿­ä»£å™¨å¤–
- æ¸…ç©º
    - å…¨éƒ¨å¤±æ•ˆ
    
### list

- æ’å…¥
    - æ’å…¥å…ƒç´ ä»»ä½•è¿­ä»£å™¨éƒ½ä¸ä¼šå¤±æ•ˆï¼Œæ–°å…ƒç´ å°†è¢«æ’å…¥åˆ°ç°æœ‰å…ƒç´ ä¹‹é—´ï¼Œä¸ä¼šå‘ç”Ÿå…ƒç´ çš„ç§»åŠ¨å’Œå¤åˆ¶
- åˆ é™¤ï¼ˆeraseï¼‰
    - è¢«åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œå…¶ä»–è¿­ä»£å™¨ä¸å—å½±å“
- ä¿®æ”¹
    - ä¸å—å½±å“
- æ¸…ç©ºï¼ˆclearï¼‰
    - æ‰€æœ‰è¿­ä»£å™¨å‡å¤±æ•ˆ
    
### set / multiset

- æ’å…¥ï¼ˆinsertï¼‰
    - ä»»ä½•è¿­ä»£å™¨éƒ½ä¸å—å½±å“
- åˆ é™¤ï¼ˆeraseï¼‰
    - è¢«åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œå…¶ä»–å…ƒç´ çš„è¿­ä»£å™¨ä¸å—å½±å“
- ä¿®æ”¹
    - ä¸æ”¯æŒå…ƒç´ ç›´æ¥ä¿®æ”¹ï¼ˆä¼šç ´åå†…éƒ¨é¡ºåºï¼‰ï¼Œå› æ­¤ä¸å­˜åœ¨å› ä¸ºç›´æ¥ä¿®æ”¹å…ƒç´ å¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜
    - å¦‚æœéœ€è¦ä¿®æ”¹å…ƒç´ ï¼Œå¿…é¡»å…ˆåˆ é™¤æ—§å…ƒç´ å†æ’å…¥æ–°å…ƒç´ ã€‚å¦‚æ­¤ï¼Œè¢«åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨å¤±æ•ˆ

## vector

æˆå‘˜æ–¹æ³•|è§£é‡Š
---|---
operator=|å°†æ–°å†…å®¹æ‹·è´ç»™å®¹å™¨ï¼Œå¹¶ä¿®æ”¹å®¹å™¨å¤§å°ï¼Œä½†capacity()ä¸ä¼šç¼©å°
swap|äº¤æ¢å®¹å™¨çš„å†…å®¹ï¼Œæ³¨æ„swapä¸æ¥å—ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰ï¼Œä½†æ˜¯å¯ä»¥ç”¨ä¸´æ—¶å¯¹è±¡å»è°ƒç”¨swap
begin|è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨
end|è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä½çš„è¿­ä»£å™¨
size|è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°é‡
capacity|è¿”å›å®¹å™¨çš„å®¹é‡
empty|åˆ¤æ–­vectoræ˜¯å¦ä¸ºç©º
resize|æ”¹å˜å®¹å™¨å…ƒç´ çš„æ•°é‡
reserve|æ”¹å˜å®¹å™¨çš„æœ€å¤§å®¹é‡
shrink_to_fit()|å°è¯•å‡å°‘å†…å­˜çš„æµªè´¹ï¼Œé€šè¿‡å‡å°‘å®¹å™¨å®¹é‡ä»¥åŒ¹é…å…ƒç´ ä¸ªæ•°
operator[]|è¿”å›å®¹å™¨ä¸­ç¬¬nä¸ªä½ç½®çš„å…ƒç´ ï¼Œæ³¨æ„ä¸æ˜¯è¿”å›ä¸€ä¸ªè¿­ä»£å™¨
at()|ä½œç”¨å’Œoperator[]ç›¸åŒï¼Œä½†æ˜¯atæä¾›è¾¹ç•Œæ£€æŸ¥ï¼Œoperator[]ä¸æä¾›
front()|è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ 
back()|è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ 
push_back|æ„é€ ä¸€ä¸ªä¸´æ—¶å¯¹è±¡å¹¶è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°å°†å…¶å°¾æ’åˆ°å®¹å™¨ä¸­
emplace_back|åœ¨å®¹å™¨å°¾éƒ¨åŸåœ°æ„é€ 
pop_back|åˆ é™¤å®¹å™¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ 
insert(pos, vals)|åœ¨poså¤„æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ï¼ŒåŸå…ˆposå¤„è¿™é‡Œçš„è¿­ä»£å™¨åŠä¹‹åæ‰€æœ‰çš„è¿­ä»£å™¨éƒ½ä¼šå¤±æ•ˆ
erase|ä»åˆ é™¤å•ä¸ªå…ƒç´ ï¼ˆ`pos`ï¼‰æˆ–ä¸€ç³»åˆ—å…ƒç´ ï¼ˆ`[firstï¼Œlast)`ï¼‰
clear|åˆ é™¤æ‰€æœ‰å…ƒç´ ï¼Œå…ƒç´ ä¸ªæ•°ä¼šå˜ä¸º0ï¼Œä½†å®¹é‡ä¸ä¼šå˜
emplace(pos, vals)|åœ¨poså¤„æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡

### emplace_back å’Œ push_back çš„åŒºåˆ«

å‡å¦‚ç”¨push_backç»™vectoræ’å…¥ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨ctoræ„é€ è¿™ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œç„¶åè°ƒç”¨copy ctorå°†ä¸´æ—¶å¯¹è±¡æ’å…¥vectorä¸­ï¼ŒåŸå…ˆçš„ä¸´æ—¶å˜é‡é‡Šæ”¾ï¼Œè¿™å¤ªç¹çäº†ã€‚

è€Œemplace_backä¼šåœ¨æ’å…¥æ—¶åœ¨vectorçš„æœ«å°¾åŸåœ°æ„é€ ï¼Œæ— éœ€å…ˆåˆ›å»ºä¸´æ—¶å¯¹è±¡ç„¶åå†å¤åˆ¶æˆ–ç§»åŠ¨åˆ°å®¹å™¨ä¸­

å¦‚æœæ­£åœ¨æ·»åŠ çš„å…ƒç´ éœ€è¦é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºï¼Œå¹¶ä¸”å¸Œæœ›é¿å…é¢å¤–çš„å¤åˆ¶æˆ–ç§»åŠ¨å¼€é”€ï¼Œä½¿ç”¨ emplace_backã€‚å¦‚æœåªæ˜¯ç®€å•åœ°æ·»åŠ å·²å­˜åœ¨çš„å¯¹è±¡å‰¯æœ¬ï¼Œpush_back å’Œ emplace_back çš„æ€§èƒ½å·®å¼‚ä¸å¤§

### insert å’Œ emplace çš„åŒºåˆ«

insertåœ¨vectorä¸­æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œé€šè¿‡æ‹·è´æˆ–è€…ç§»åŠ¨å·²ç»å­˜åœ¨çš„å¯¹è±¡æ¥æ’å…¥å…ƒç´ 

emplaceåœ¨æŒ‡å®šä½ç½®ç›´æ¥æ„é€ å…ƒç´ ï¼Œä¸éœ€è¦åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œé¿å…äº†é¢å¤–çš„æ‹·è´æˆ–ç§»åŠ¨æ“ä½œ

### resize å’Œ reserver çš„åŒºåˆ«

resizeæ”¹å˜å®¹å™¨å«æœ‰å…ƒç´ çš„æ•°é‡

```cpp
std::vector<int> vec = {1,2,3,4,5};
//å¦‚æœè°ƒæ•´å¤§å°å¤§äºåŸå…ˆå…ƒç´ æ•°é‡ï¼Œå°±è¡¥å……nä¸ª0ï¼Œsize()å’Œcapacity()éƒ½ä¼šå¢åŠ 
vec.resize(10);
std::cout << vec.size() << " " << vec.capacity() << std::endl; //10 10

//å¦‚æœè°ƒæ•´å…ƒç´ å°äºåŸå…ˆå…ƒç´ æ•°é‡ï¼Œå°±åˆ é™¤nä¸ªå…ƒç´ ï¼Œsize()å‡å°‘ï¼Œä½†capacity()ä¸ä¼šå‡å°
vec.resize(1);
std::cout << vec.size() << " " << vec.capacity() << std::endl; //1 5
```

reserveræ”¹å˜å®¹å™¨çš„æœ€å¤§å®¹é‡capacityï¼Œä¸ä¼šç”Ÿæˆå…ƒç´ ï¼Œå°±ç®—å¾€å°äº†æ”¹capacity()éƒ½ä¸ä¼šç¼©å°

```cpp
std::vector<int> vec = {1,2,3,4,5};
vec.reserve(10);
std::cout << vec.size() << " " << vec.capacity() << std::endl; //5 10
vec.reserve(1);
std::cout << vec.size() << " " << vec.capacity() << std::endl; //5 5
```

### vectorçš„å†…å­˜é‡Šæ”¾

C++ Primerè¯´ï¼Œä¸ºäº†æ”¯æŒå¿«é€Ÿçš„éšæœºè®¿é—®ï¼Œvectorçš„å…ƒç´ ä»¥è¿ç»­çš„æ–¹å¼å­˜æ”¾ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½ç´§æŒ¨ç€å‰ä¸€ä¸ªå…ƒç´ å­˜å‚¨ï¼Œæ¯å½“æ’å…¥æ–°å…ƒç´ ï¼Œä¸ºäº†è¿ç»­å­˜æ”¾ï¼Œéƒ½è¦é‡æ–°åˆ†é…å†…å­˜ã€æ‹·è´å…ƒç´ ã€æ’¤é”€æ—§ç©ºé—´ï¼Œæ€§èƒ½æ— æ³•ä¿éšœ

æ‰€ä»¥åˆ†é…çš„æ—¶å€™å°±ä¼šå¤šé¢„ç•™ç©ºé—´ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡reserve()æŒ‡å®šé¢„ç•™ç©ºé—´å¤§å°ã€‚

ä½†æ˜¯vectorçš„å†…å­˜ç©ºé—´åªä¼šå¢åŠ ä¸ä¼šå‡å°‘ï¼ˆå°±ç®—ç”¨reverseå’Œresizeå»ç‰¹æ„å‡å°‘capacityå®¹é‡ä¹Ÿäºäº‹æ— è¡¥ï¼‰

å› ä¸ºå†…å­˜åªå¢ä¸å‡ï¼Œå‡è®¾reserveé¢„åˆ†é…äº†100ä¸ªå­—èŠ‚ï¼Œå°±ç®—eraseæ“¦å‡ºäº†99ä¸ªï¼Œä½†å†…å­˜å ç”¨ä¾æ—§æ˜¯100å­—èŠ‚ï¼Œå°±ç®—clearæ¸…ç©ºæ‰€æœ‰å…ƒç´ ï¼Œä¾æ—§æ˜¯100ï¼Œåªæœ‰åœ¨vectorææ„çš„æ—¶å€™ï¼Œå†…å­˜æ‰ä¼šè¢«å›æ”¶

æƒ³è¦å†…å­˜ç©ºé—´åŠ¨æ€ç¼©å°ï¼Œé™¤äº†ä½¿ç”¨dequeå¤–ï¼Œvectorå¯ä»¥å€ŸåŠ©swapå‡½æ•°æ¥æ¸…ç©ºè‡ªå·±

```cpp
    vector<int> v{10,20,50};
    vector<int>().swap(v);
    cout << v.capacity(); //0ï¼Œå¹¶ä¸”vä¸­å…ƒç´ è¢«æ¸…ç©º
```

å› ä¸ºvectorä¸­æœ‰ä¸‰ä¸ªæŒ‡é’ˆï¼Œ beginã€endå’Œend_of_storageï¼Œç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡`vector<int>()`è°ƒç”¨swapå»å’Œväº¤æ¢ï¼ŒæŒ‡é’ˆäº¤æ¢äº†ä¸ªï¼Œè‡ªç„¶è¢«æ¸…ç©º

## deque

æˆå‘˜æ–¹æ³•|è§£é‡Š
---|---
push_back|åœ¨å®¹å™¨çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ 
push_front|åœ¨å®¹å™¨çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªå…ƒç´ 
pop_back|åˆ é™¤å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ 
pop_front|åˆ é™¤å®¹å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
emplace_front|å®¹å™¨çš„å¼€å¤´æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ 
emplace_back|å®¹å™¨çš„æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ 

## list

listï¼ŒåŒå‘é“¾è¡¨ï¼Œæ˜¯åºåˆ—å®¹å™¨ï¼Œå…è®¸åœ¨åºåˆ—ä¸­çš„ä»»ä½•åœ°æ–¹è¿›è¡Œå¸¸æ•°æ—¶é—´æ’å…¥å’Œæ“¦é™¤æ“ä½œï¼Œå¹¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šè¿›è¡Œè¿­ä»£ã€‚

## stack

stack æ˜¯ä¸€ç§å®¹å™¨é€‚é…å™¨ï¼Œç”¨äºåœ¨LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰çš„æ“ä½œï¼Œå…¶ä¸­å…ƒç´ ä»…ä»å®¹å™¨çš„ä¸€ç«¯æ’å…¥å’Œæå–ã€‚

## queue

queue æ˜¯ä¸€ç§å®¹å™¨é€‚é…å™¨ï¼Œç”¨äºåœ¨FIFOï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰çš„æ“ä½œï¼Œå…¶ä¸­å…ƒç´ æ’å…¥åˆ°å®¹å™¨çš„ä¸€ç«¯å¹¶ä»å¦ä¸€ç«¯æå–ã€‚

## priority_queue

## set

set æ˜¯æŒ‰ç…§ç‰¹å®šé¡ºåºå­˜å‚¨å”¯ä¸€å…ƒç´ çš„å®¹å™¨ã€‚

## multiset

## map

æˆå‘˜æ–¹æ³•|è§£é‡Š
---|---
begin|è¿”å›å¼•ç”¨å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨
find|åœ¨å®¹å™¨ä¸­æœç´¢å…·æœ‰ç­‰äº kï¼ˆå‚æ•°ï¼‰çš„é”®çš„å…ƒç´ ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¦åˆ™è¿”å› map::end çš„è¿­ä»£å™¨
count|åœ¨å®¹å™¨ä¸­æœç´¢å…·æœ‰ç­‰äº kï¼ˆå‚æ•°ï¼‰çš„é”®çš„å…ƒç´ ï¼Œå¹¶è¿”å›åŒ¹é…çš„æ•°é‡
lower_bound|è¿”å›ä¸€ä¸ªéé€’å‡åºåˆ— `[first, last)`ï¼ˆå‚æ•°ï¼‰ä¸­çš„ç¬¬ä¸€ä¸ªå¤§äºç­‰äºå€¼ valï¼ˆå‚æ•°ï¼‰çš„ä½ç½®çš„è¿­ä»£å™¨
upper_bound|è¿”å›ä¸€ä¸ªéé€’å‡åºåˆ— `[first, last)`ï¼ˆå‚æ•°ï¼‰ä¸­ç¬¬ä¸€ä¸ªå¤§äº valï¼ˆå‚æ•°ï¼‰çš„ä½ç½®çš„è¿­ä»£å™¨
equal_range|è·å–ç›¸åŒå…ƒç´ çš„èŒƒå›´ï¼Œè¿”å›åŒ…å«å®¹å™¨ä¸­æ‰€æœ‰å…·æœ‰ä¸ kï¼ˆå‚æ•°ï¼‰ç­‰ä»·çš„é”®çš„å…ƒç´ çš„èŒƒå›´è¾¹ç•Œï¼ˆ`pair< map<char,int>::iterator, map<char,int>::iterator >`ï¼‰

## multimap

## unordered\_set

## unordered\_multiset

## unordered\_map

## unordered\_multimap

## tuple

å…ƒç»„æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå®¹çº³å…ƒç´ é›†åˆçš„å¯¹è±¡ã€‚æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚

## pair

è¿™ä¸ªç±»æŠŠä¸€å¯¹å€¼ï¼ˆvaluesï¼‰ç»“åˆåœ¨ä¸€èµ·ï¼Œè¿™äº›å€¼å¯èƒ½æ˜¯ä¸åŒçš„ç±»å‹ï¼ˆT1 å’Œ T2ï¼‰ã€‚æ¯ä¸ªå€¼å¯ä»¥è¢«å…¬æœ‰çš„æˆå‘˜å˜é‡firstã€secondè®¿é—®

<h1 id="multithread">ğŸ¡ å¤šçº¿ç¨‹</h1>

[C++å¤šçº¿ç¨‹](https://github.com/arqady01/Cpp-interface/blob/main/src/multithread/cpp.md)

[posixå¤šçº¿ç¨‹](https://github.com/arqady01/Cpp-interface/blob/main/src/multithread/posix.md)

## æ­»é”

æ­»é”çš„å¿…è¦æ¡ä»¶ï¼š

- äº’æ–¥æ¡ä»¶ï¼šæŸç§èµ„æºä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ï¼Œå³è¯¥èµ„æºä¸€æ—¦åˆ†é…ç»™æŸä¸ªè¿›ç¨‹ï¼Œå…¶ä»–è¿›ç¨‹å°±ä¸èƒ½å†è®¿é—®ï¼Œç›´åˆ°è¯¥è¿›ç¨‹è®¿é—®ç»“æŸ
- å æœ‰ä¸”ç­‰å¾…ï¼šè¿›ç¨‹å·²å æœ‰è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºåˆè¢«å…¶å®ƒè¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¿›ç¨‹é˜»å¡ï¼Œä½†åˆå¯¹è‡ªå·±å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾
- ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾
- ç¯è·¯ç­‰å¾…ï¼šåœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªèµ„æºçš„ç¯å½¢é“¾ï¼Œå³è¿›ç¨‹é›†åˆ{P0ï¼ŒP1ï¼ŒP2ï¼Œâ€¦ï¼ŒPn}ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼› P1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPnæ­£åœ¨ç­‰å¾…å·²è¢«P0å ç”¨çš„èµ„æº

ä¸¾ä¸ªä¾‹å­ï¼Œçº¿ç¨‹Aæ‰§è¡Œæ—¶ï¼Œå…ˆé”mutex_Aï¼Œä¸Šé”æˆåŠŸåå»é”mutex_Bçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä¸Šä¸‹æ–‡åˆ‡æ¢

çº¿ç¨‹Bæ‰§è¡Œï¼Œå…ˆé”mutex_Bï¼Œå› ä¸ºmutex_Bæœªè¢«é”ï¼Œæ‰€ä»¥å¯ä»¥ä¸Šé”æˆåŠŸï¼Œç„¶åçº¿ç¨‹Bè¦å»é”mutex_A

æ­¤æ—¶æ­»é”äº§ç”Ÿï¼Œçº¿ç¨‹Aå ç”¨ç€mutex_Aï¼Œéœ€è¦é”mutex_Bï¼Œçº¿ç¨‹Bå ç”¨ç€mutex_Bï¼Œéœ€è¦é”mutex_Aï¼Œä¸¤ä¸ªçº¿ç¨‹æ— æ³•è¿›è¡Œä¸‹å»

æ­»é”çš„è§£å†³æ–¹æ¡ˆï¼š

- é¢„é˜²æ­»é”ï¼šèµ„æºæœ‰åºåˆ†é…
    - é¿å…å¤šæ¬¡é”å®š
    - äº’æ–¥é”å¯¹äº’æ–¥é‡è®¿é—®å®Œæ¯•åï¼Œä¸€å®šè¦è§£é”ã€‚æ¨è`std::lock_guard` æˆ– `std::unique_lock`è¿™ç±»RAIIå·¥å…·ç®¡ç†é”
    - è®©æ‰€æœ‰çº¿ç¨‹å¯¹äº’æ–¥é”çš„è®¿é—®é¡ºåºä¸€è‡´ï¼ˆä½†æœ‰æ—¶ä¼šä¸é è°±ï¼Œæ¯”å¦‚æœ‰çš„çº¿ç¨‹å°±å¿…é¡»åšåˆ°å…ˆè®¿é—®aå†è®¿é—®bï¼‰
```cpp
std::mutex mtx1, mtx2;

void threadFunc1() {
    std::lock_guard<std::mutex> lock1(mtx1);
    std::lock_guard<std::mutex> lock2(mtx2);
    // å¤„ç†é€»è¾‘
}
void threadFunc2() {
    std::lock_guard<std::mutex> lock1(mtx1);
    std::lock_guard<std::mutex> lock2(mtx2);
    // å¤„ç†é€»è¾‘
}
```
- é¿å…æ­»é”
    - é“¶è¡Œå®¶ç®—æ³•ï¼šåœ¨çº¿ç¨‹è¯·æ±‚èµ„æºæ—¶ï¼Œå…ˆç¡®å®šèµ„æºåˆ†é…åç³»ç»Ÿæ˜¯å¦è¿˜èƒ½ä¿æŒå®‰å…¨çŠ¶æ€ï¼Œè‹¥èƒ½ï¼Œåˆ™åˆ†é…èµ„æºï¼›å¦åˆ™ï¼Œè®©è¿›ç¨‹ç­‰å¾…
    - èµ„æºè¯·æ±‚çš„é¢„å…ˆæ£€æŸ¥ï¼šè¿›ç¨‹åœ¨è¿è¡Œå‰å£°æ˜å…¶æœ€å¤§èµ„æºéœ€æ±‚é‡ï¼Œç³»ç»Ÿæ ¹æ®æ­¤æ¥é¿å…æ­»é”çš„å‘ç”Ÿã€‚
- æ£€æµ‹æ­»é”ï¼Œä¾‹å¦‚ ThreadSanitizer æ˜¯ä¸€ç§ç”¨äºæ£€æµ‹æ•°æ®ç«äº‰å’Œæ­»é”çš„å·¥å…·
- è§£é™¤æ­»é”
    - ç»ˆæ­¢çº¿ç¨‹
    - èµ„æºæŠ¢å ï¼šä»å…¶ä»–çº¿ç¨‹æŠ¢å æ‰€éœ€èµ„æºï¼Œåˆ†é…ç»™æ­»é”çº¿ç¨‹ï¼Œä»¥è§£é™¤æ­»é”
    - å›æ»šï¼šè®©çº¿ç¨‹å›é€€åˆ°è¶³ä»¥æ‰“ç ´å¾ªç¯ç­‰å¾…çš„å®‰å…¨çŠ¶æ€ï¼Œç„¶åé‡æ–°å¯åŠ¨è¿™äº›çº¿ç¨‹

## è¿›ç¨‹æœ‰å“ªäº›çŠ¶æ€

- è¿è¡ŒçŠ¶æ€ï¼šè¿›ç¨‹å ç”¨ç€CPU
- å°±ç»ªçŠ¶æ€ï¼šä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ï¼Œè¿›ç¨‹å·²ç»è·å¾—äº†é™¤å¤„ç†æœºä¹‹å¤–çš„ä¸€åˆ‡èµ„æºï¼Œä¸€æ—¦å¾—åˆ°å¤„ç†æœºå°±å¯ä»¥è¿è¡Œ
- é˜»å¡çŠ¶æ€ï¼šè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚åœè¿è¡Œï¼Œé™¤éæŸç§å¤–éƒ¨äº‹ä»¶å‘ç”Ÿï¼Œå¦åˆ™é˜»å¡æ€çš„è¿›ç¨‹ä¸èƒ½è¿è¡Œ

## è¿›ç¨‹ç»ˆæ­¢è§¦å‘æ¡ä»¶

- æ­£å¸¸é€€å‡ºï¼ˆè‡ªæ„¿ï¼‰ï¼šè¿›ç¨‹å®Œæˆäº†å·¥ä½œæ­£å¸¸ç»ˆæ­¢
- å‡ºé”™é€€å‡ºï¼ˆè‡ªæ„¿ï¼‰ï¼šè¿›ç¨‹å‘ç°äº†é”™è¯¯è€Œé€€å‡º
- ä¸¥é‡é”™è¯¯ï¼ˆéè‡ªæ„¿ï¼‰ï¼šè¿›ç¨‹å‘ç”Ÿäº†ä¸¥é‡é”™è¯¯è€Œä¸å¾—ä¸é€€å‡ºï¼Œä¾‹å¦‚å¼•ç”¨ä¸å­˜åœ¨çš„å†…å­˜
- è¢«æ€æ­»ï¼ˆéè‡ªæ„¿ï¼‰ï¼šè°ƒç”¨killæŒ‡ä»¤ï¼Œç³»ç»Ÿæ€æ­»çº¿ç¨‹

## ä¸ºä»€ä¹ˆä¼šå‡ºç°çº¿ç¨‹æŒ‚èµ·

ä¸€ä¸ªçº¿ç¨‹æš‚æ—¶åœæ­¢æ‰§è¡Œå…¶ä»»åŠ¡ï¼Œå¹¶å°†å…¶çŠ¶æ€ç½®äºç­‰å¾…æˆ–ä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°ç‰¹å®šçš„æ¡ä»¶æ»¡è¶³æˆ–è¢«å¤–éƒ¨äº‹ä»¶å”¤é†’åï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚çº¿ç¨‹æŒ‚èµ·æ˜¯ä¸ºäº†åˆç†åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼ŒæŠŠä¸€ä¸ªè¿›ç¨‹ä»å†…å­˜è½¬åˆ°å¤–å­˜

- ä¸»åŠ¨æŒ‚èµ·ï¼šæ˜¾å¼è°ƒç”¨æŒ‚èµ·å‡½æ•°ï¼Œæ¯”å¦‚ä½¿ç”¨ `std::this_thread::sleep_for` æˆ– `std::this_thread::sleep_until` è®©çº¿ç¨‹ä¼‘çœ ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…ç­‰å¾…åŒæ­¥åŸè¯­ï¼Œçº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶å˜é‡ã€ä¿¡å·é‡çš„é€šçŸ¥ï¼Œä¾‹å¦‚ä½¿ç”¨ `std::condition_variable::wait`
- æ­»é”æŒ‚èµ·ï¼šè®¿é—®åŒä¸€èµ„æºï¼Œä½†æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…å¯¹æ–¹å…ˆæ”¾å¼ƒèµ„æº
- é˜»å¡æŒ‚èµ·ï¼šçº¿ç¨‹è¯•å›¾è®¿é—®è¢«å ç”¨çš„èµ„æºï¼ˆå¦‚äº’æ–¥é”ç­‰ï¼‰ï¼Œå¦‚æœèµ„æºä¸å¯ç”¨ï¼Œçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°èµ„æºé‡Šæ”¾
- å°±ç»ªæŒ‚èµ·ï¼šè¿›ç¨‹åœ¨å¤–å­˜ï¼Œåªéœ€è¦è¿›å…¥å†…å­˜è¿è¡Œå³å¯

## è¿›ç¨‹é—´é€šä¿¡æ–¹å¼

| IPC æ–¹å¼ | ä»‹ç» | ä¼˜ç‚¹ | ç¼ºç‚¹ |
| ---- | ---- | ---- | ---- |
| ç®¡é“ï¼ˆPipeï¼‰ | å†…æ ¸é‡Œé¢çš„ä¸€ä¸²ç¼“å­˜ | ç®€å•ã€æ˜“ç”¨ï¼›é€‚ç”¨äºçˆ¶å­è¿›ç¨‹ | åªèƒ½å•å‘ä¼ è¾“ |
| æ¶ˆæ¯é˜Ÿåˆ— | æœ¬è´¨æ˜¯ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼Œå…è®¸å¤šä¸ªè¿›ç¨‹å°†æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—ï¼Œå…¶ä»–è¿›ç¨‹ä»é˜Ÿåˆ—ä¸­æ¥æ”¶æ¶ˆæ¯æ¥è¿›è¡Œé€šä¿¡ | æ”¯æŒæ¶ˆæ¯ä¼˜å…ˆçº§ï¼›æ”¯æŒå¤šä¸ªå‘é€è€…å’Œæ¥æ”¶è€… | éœ€è¦ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¤æ‚æ€§è¾ƒé«˜ |
| å…±äº«å†…å­˜ | ç”¨ä¸€ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´æ¥æ˜ å°„å¤šä¸ªç‰©ç†å†…å­˜ | å½“æŸè¿›ç¨‹å†™å…¥ï¼Œå…¶ä½™è¿›ç¨‹éƒ½èƒ½çœ‹åˆ°ï¼Œæ•°æ®ä¸éœ€è¦åœ¨è¿›ç¨‹é—´ä¸æ–­å¤åˆ¶ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚ç”¨äºå¤§æ•°æ®é‡ä¼ è¾“ | éœ€è¦é¢å¤–çš„åŒæ­¥æœºåˆ¶ï¼Œç®¡ç†å¤æ‚æ€§é«˜ |
| å¥—æ¥å­—ï¼ˆSocketï¼‰ |  | çµæ´»ï¼›æ”¯æŒç½‘ç»œé€šä¿¡ | è®¾ç½®å’Œç®¡ç†ç›¸å¯¹å¤æ‚ï¼›æ€§èƒ½å–å†³äºé€šä¿¡ç±»å‹ |
| ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ | ä¿¡å·é‡æ˜¯ä¸€ä¸ªæ•´å‹çš„è®¡æ•°å™¨ï¼Œå®ç°è¿›ç¨‹é—´çš„äº’æ–¥ä¸åŒæ­¥ | ç®€å•æœ‰æ•ˆçš„åŒæ­¥æœºåˆ¶ | ä»…ç”¨äºåŒæ­¥ï¼Œæ— æ³•ä¼ é€’æ•°æ® |
| ä¿¡å·ï¼ˆSignalï¼‰ | è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ä¸­å”¯ä¸€çš„å¼‚æ­¥é€šä¿¡æœºåˆ¶ | ç®€å•ç”¨äºäº‹ä»¶é€šçŸ¥ | ä¸é€‚åˆä¼ é€’å¤§é‡æ•°æ®ï¼›ä¿¡å·å¤„ç†éœ€è¦å°å¿ƒä»¥é¿å…ç«æ€æ¡ä»¶ |

## è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«

- ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºè‡³å°‘åŒ…å«ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘åŒ…å«ä¸€ä¸ªçº¿ç¨‹
- è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼›çº¿ç¨‹æ˜¯CPUè¿ç®—è°ƒåº¦çš„åŸºæœ¬å•ä½
- å¤šä¸ªè¿›ç¨‹ä¹‹é—´ä¸èƒ½å…±äº«èµ„æºï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„å †ã€æ ˆã€è™šå­˜ç©ºé—´é¡µè¡¨ã€æ–‡ä»¶æè¿°ç¬¦ç­‰ï¼›è€Œçº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹èµ„æºæ–‡ä»¶ï¼ˆå †å’Œæ–¹æ³•åŒºï¼‰
- æ“çºµè€…ä¸åŒï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿›ç¨‹çš„æ“çºµè€…æ˜¯æ“ä½œç³»ç»Ÿï¼Œçº¿ç¨‹çš„æ“çºµè€…æ˜¯ç¼–ç¨‹äººå‘˜
- ä¸Šä¸‹æ–‡åˆ‡æ¢é€Ÿåº¦ï¼ˆæŒ‡ä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼‰ä¸åŒï¼Œè¿›ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¾ˆæ…¢ï¼›çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢é€Ÿåº¦å¾ˆå¿«
    - åˆ›å»ºæ—¶é—´æ›´å¿«ã€‚è¿›ç¨‹åˆ›å»ºæ—¶éœ€è¦ç®¡ç†èµ„æºä¿¡æ¯ï¼ˆå¦‚å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ä¿¡æ¯ï¼‰ï¼Œè€Œçº¿ç¨‹åˆ›å»ºè¿‡ç¨‹ä¸­ä¸ä¼šæ¶‰åŠèµ„æºç®¡ç†ï¼Œè€Œæ˜¯å…±äº«èµ„æº
    - ç»ˆæ­¢æ—¶é—´æ›´å¿«ï¼Œå› ä¸ºçº¿ç¨‹é‡Šæ”¾çš„èµ„æºæ¯”è¿›ç¨‹å°‘å¾ˆå¤š
    - åˆ‡æ¢æ›´å¿«ã€‚çº¿ç¨‹å…·æœ‰ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œå³åŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹å…·æœ‰åŒä¸€ä¸ªé¡µè¡¨ï¼Œåœ¨åˆ‡æ¢çš„æ—¶å€™ä¸éœ€è¦åˆ‡æ¢é¡µè¡¨ã€‚è€Œè¿›ç¨‹çš„åˆ‡æ¢è¦åˆ‡æ¢é¡µè¡¨

## è°ƒåº¦æ–¹å¼

### çº¿ç¨‹

1. æŠ¢å å¼è°ƒåº¦

æ“ä½œç³»ç»Ÿå¯éšæ—¶ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼Œå¹¶å°† CPU åˆ†é…ç»™å…¶ä»–çº¿ç¨‹ã€‚

æŠ¢å å¼è°ƒåº¦å¯ä»¥é€šè¿‡æ—¶é’Ÿä¸­æ–­ã€ä¼˜å…ˆçº§è°ƒåº¦ç­‰æœºåˆ¶æ¥å®ç°ï¼Œä¿è¯äº†é«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„åŠæ—¶å“åº”

2. åä½œå¼è°ƒåº¦

çº¿ç¨‹åªæœ‰ä¸»åŠ¨æ”¾å¼ƒ CPU ä½¿ç”¨æƒæˆ–è€…å‘ç”Ÿé˜»å¡äº‹ä»¶ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šåˆ‡æ¢åˆ°å…¶ä»–çº¿ç¨‹ã€‚

åä½œå¼è°ƒåº¦çš„ä¼˜ç‚¹æ˜¯ç®€å•é«˜æ•ˆï¼Œç¼ºç‚¹æ˜¯ä¸€ä¸ªçº¿ç¨‹çš„é”™è¯¯å¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„é˜»å¡ã€‚

### è¿›ç¨‹

1. å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ï¼ˆFCFSï¼‰
    - ç‰¹ç‚¹ï¼šæŒ‰ç…§è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºåˆ†é…æ—¶é—´ç‰‡ï¼Œç›´åˆ°è¿›ç¨‹æ‰§è¡Œå®Œæˆæˆ–å‘ç”Ÿ I/O æ“ä½œï¼Œæ˜¯éæŠ¢å å¼è°ƒåº¦ç®—æ³•
    - ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œå…¬å¹³æ€§è¾ƒé«˜
    - ç¼ºç‚¹ï¼šå¯èƒ½å¯¼è‡´æŸäº›é•¿ä½œä¸šç­‰å¾…æ—¶é—´è¿‡é•¿ï¼Œä¸é€‚åˆå¯¹å“åº”æ—¶é—´è¦æ±‚è¾ƒé«˜çš„åœºæ™¯
2. æœ€çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ï¼ˆSJFï¼‰
    - ä¼˜å…ˆè°ƒåº¦æ‰§è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ï¼Œç›´åˆ°ä½œä¸šå®Œæˆæˆ–å‘ç”Ÿ I/O æ“ä½œ
    - ä¼˜ç‚¹ï¼šå¯ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å¹³å‡ç­‰å¾…æ—¶é—´
    - ç¼ºç‚¹ï¼šéš¾ä»¥é¢„æµ‹æ¯ä¸ªè¿›ç¨‹çš„æ‰§è¡Œæ—¶é—´ï¼Œå¯èƒ½å¯¼è‡´é•¿ä½œä¸šç­‰å¾…æ—¶é—´è¿‡é•¿
3. ä¼˜å…ˆçº§è°ƒåº¦
    - æ ¹æ®è¿›ç¨‹çš„ä¼˜å…ˆçº§åˆ†é… CPU æ—¶é—´ç‰‡ï¼Œä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹å…ˆæ‰§è¡Œ
    - ä¼˜ç‚¹ï¼šå¯ä»¥æ ¹æ®éœ€æ±‚è®¾ç½®ä¸åŒçš„ä¼˜å…ˆçº§
    - ç¼ºç‚¹ï¼šå¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¿›ç¨‹é•¿æ—¶é—´ç­‰å¾…
4. è½®è½¬è°ƒåº¦ï¼ˆRRï¼‰
    - å°†æ—¶é—´ç‰‡åˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ï¼Œæ—¶é—´ç‰‡ç”¨å®Œæˆ–è¿›ç¨‹å®Œæˆï¼Œå°±åˆ‡æ¢å’Œæ‰§è¡Œä¸‹ä¸€ä¸ªè¿›ç¨‹
    - ä¼˜ç‚¹ï¼šå¯ä»¥ä¿è¯æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½å¾—åˆ°æ‰§è¡Œ
    - ç¼ºç‚¹ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¢å¤§ï¼Œå¯¹äºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹æ•ˆç‡è¾ƒä½
5. å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦
    - å°†è¿›ç¨‹æŒ‰ç…§ä¼˜å…ˆçº§åˆ†æˆå¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—ä½¿ç”¨ä¸åŒçš„è°ƒåº¦ç®—æ³•ã€‚
    - ä¼˜ç‚¹ï¼šå¯ä»¥é˜²æ­¢æŸäº›è¿›ç¨‹é•¿æ—¶é—´ç­‰å¾…æˆ–è€…é•¿æ—¶é—´å ç”¨ CPU
    - ç¼ºç‚¹ï¼šç®—æ³•å¤æ‚ï¼Œéœ€è¦æ ¹æ®æƒ…å†µè°ƒæ•´å‚æ•°
6. å®æ—¶è°ƒåº¦
    - æ ¹æ®ä»»åŠ¡çš„æˆªæ­¢æ—¶é—´å’Œä¼˜å…ˆçº§è¿›è¡Œè°ƒåº¦ï¼Œé€‚ç”¨äºå¯¹å“åº”æ—¶é—´æœ‰ä¸¥æ ¼è¦æ±‚çš„ç³»ç»Ÿ
    - ä¼˜ç‚¹ï¼šèƒ½å¤Ÿä¿è¯ä»»åŠ¡åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ
    - ç¼ºç‚¹ï¼šå¯¹ç³»ç»Ÿèµ„æºè¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦ä¿è¯å®æ—¶æ€§

## ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨

å¦‚æœå¤šçº¿ç¨‹è¿è¡Œç»“æœæ˜¯å¯é¢„æœŸçš„ï¼Œè€Œä¸”ä¸å•çº¿ç¨‹çš„ç»“æœä¸€æ ·ï¼Œé‚£ä¹ˆè¯´æ˜æ˜¯çº¿ç¨‹å®‰å…¨çš„

## å¤šçº¿ç¨‹åŒæ­¥ä¸äº’æ–¥çš„å®ç°æ–¹æ³•

- äº’æ–¥é”ï¼šè¿›å…¥ä¸´ç•ŒåŒºå‰ï¼Œçº¿ç¨‹å¿…é¡»è·å–äº’æ–¥é”ï¼›ç¦»å¼€æ—¶é‡Šæ”¾äº’æ–¥é”ã€‚è¿™æ˜¯æœ€åŸºæœ¬çš„åŒæ­¥æœºåˆ¶ï¼Œç”¨äºç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¸ä¼šåŒæ—¶è¿›å…¥ä¸´ç•ŒåŒº
- è¯»å†™é”ï¼šè¯»å†™é”å…è®¸æ›´é«˜çš„å¹¶è¡Œæ€§ï¼Œå®ƒåŒºåˆ†è¯»æ“ä½œå’Œå†™æ“ä½œ
    - å¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œå› ä¸ºè¯»æ“ä½œä¸ä¼šä¿®æ”¹æ•°æ®
    - å†™æ“ä½œæ˜¯ç‹¬å çš„ï¼Œå³å½“ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ—¢ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™
- æ¡ä»¶å˜é‡ï¼šä¸äº’æ–¥é”ä¸€èµ·ä½¿ç”¨ï¼Œçº¿ç¨‹åœ¨wait()å¤„é˜»å¡ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶è¢«`notify_all()`/`notify_one()`å”¤é†’
- call_onceï¼Œæ­é…`std::once_flag`ä¸€èµ·ä½¿ç”¨ï¼Œæ£€æŸ¥æ ‡å¿—ä½æ˜¯å¦è¢«æ”¹å†™ï¼Œæœ‰å°±è¯´æ˜å‡½æ•°è¢«æ‰§è¡Œè¿‡ï¼Œæ²¡æœ‰å°±è¯´æ˜å‡½æ•°æœªæ‰§è¡Œã€‚ç¡®ä¿å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¹Ÿå°±å…·å¤‡äº’æ–¥é‡çš„èƒ½åŠ›
- ä¿¡å·é‡ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„åŒæ­¥æœºåˆ¶ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ä¼šè°ƒç”¨Pæ“ä½œï¼ˆå‡è®¡æ•°ï¼‰ï¼Œç¦»å¼€æ—¶è°ƒç”¨Væ“ä½œï¼ˆåŠ è®¡æ•°ï¼‰
- åŸå­æ“ä½œï¼šå¯ä»¥å®ç°æ— é”ç¼–ç¨‹ã€‚C++æä¾›åŸå­æ“ä½œåº“ï¼Œç”¨äºæ‰§è¡Œçº¿ç¨‹å®‰å…¨çš„æ•´æ•°æˆ–æŒ‡é’ˆæ“ä½œã€‚

## é”ä¹‹å¤§èµ

- äº’æ–¥é”åŠ é”å¤±è´¥åï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾ CPU ï¼Œç»™å…¶ä»–çº¿ç¨‹ï¼›
- è‡ªæ—‹é”åŠ é”å¤±è´¥åï¼Œçº¿ç¨‹ä¼šå¿™ç­‰å¾…ï¼Œç›´åˆ°å®ƒæ‹¿åˆ°é”ï¼›
- è¯»å†™é”ï¼Œç”±è¯»é”å’Œå†™é”ä¸¤éƒ¨åˆ†æ„æˆï¼Œè¯»å†™é”é€‚ç”¨äºèƒ½æ˜ç¡®åŒºåˆ†è¯»æ“ä½œå’Œå†™æ“ä½œçš„åœºæ™¯
- ä¹è§‚é”ï¼Œå‡è®¾æœ€å¥½çš„æƒ…å†µä¸‹æ•°æ®ä¸ä¼šå‘ç”Ÿå†²çªï¼Œæ‰€ä»¥æ— éœ€åœ¨è¯»å†™æ“ä½œæ—¶å°†å…¶ä¸Šé”ã€‚é€šå¸¸é€šè¿‡ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³æ¥å®ç°ã€‚

## fork()

åˆ›å»ºå­è¿›ç¨‹ï¼Œå³ä¸€ä¸ªä¸è°ƒç”¨è¿›ç¨‹ç›¸åŒçš„å‰¯æœ¬

- å¤åˆ¶è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ï¼šé¦–å…ˆå¤åˆ¶å½“å‰è¿›ç¨‹çš„PCBï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„PCBï¼Œç”¨äºè¡¨ç¤ºå³å°†åˆ›å»ºçš„å­è¿›ç¨‹
- åˆ†é…å†…å­˜ï¼šå†…æ ¸ä¸ºå­è¿›ç¨‹åˆ†é…æ–°çš„å†…å­˜é¡µé¢ï¼Œå¹¶å°†çˆ¶è¿›ç¨‹çš„é¡µé¢æ ‡è®°ä¸ºåªè¯»ã€‚å¼€å§‹æ—¶ä»–ä»¬æœ‰ç›¸åŒçš„å†…å­˜å†…å®¹ï¼Œä½†å„è‡ªæœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´
- å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ï¼šå­è¿›ç¨‹ç»§æ‰¿çˆ¶è¿›ç¨‹æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ç³»ç»Ÿä¸ºæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦åˆ›å»ºå‰¯æœ¬ï¼Œçˆ¶å­è¿›ç¨‹å°±èƒ½ç‹¬ç«‹æ“ä½œå„è‡ªçš„æ–‡ä»¶æè¿°ç¬¦äº†
- è®¾ç½®è¿›ç¨‹IDï¼š å­è¿›ç¨‹ä¼šè¢«èµ‹äºˆä¸€ä¸ªæ–°çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ï¼Œè€Œçˆ¶è¿›ç¨‹çš„PIDä¿æŒä¸å˜ã€‚å­è¿›ç¨‹è¿˜ä¼šè·å¾—çˆ¶è¿›ç¨‹çš„PIDï¼Œä»¥ä¾¿å¯ä»¥è¯†åˆ«çˆ¶è¿›ç¨‹
- è¿”å›å€¼ï¼šçˆ¶è¿›ç¨‹ä¸­è°ƒç”¨fork()è¿”å›å­è¿›ç¨‹çš„PIDï¼Œfork()å¤±è´¥åˆ™è¿”å›-1ï¼›åœ¨å­è¿›ç¨‹ä¸­çš„è¿”å›æ˜¯0

æ³¨æ„äº‹é¡¹

- ä½¿ç”¨forkæ—¶è¦æ³¨æ„é¿å…æ— é™åˆ¶çš„åˆ›å»ºå­è¿›ç¨‹
- çˆ¶å­è¿›ç¨‹è¿è¡Œåœ¨ç‹¬ç«‹çš„åœ°å€ç©ºé—´ä¸­ã€‚åœ¨forkä¹‹åï¼Œçˆ¶å­è¿›ç¨‹ä¸­çš„å˜é‡å’Œç¨‹åºçŠ¶æ€æ˜¯ç‹¬ç«‹çš„ã€‚å¯¹æŸä¸ªè¿›ç¨‹ä¸­çš„å˜é‡ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªè¿›ç¨‹
- åœ¨å¤šçº¿ç¨‹ä¸­å°å¿ƒä½¿ç”¨forkï¼Œå› ä¸ºforkè°ƒç”¨ååªæœ‰è°ƒç”¨çº¿ç¨‹è¢«å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­ï¼Œå…¶ä»–çº¿ç¨‹ä¸ä¼šè¢«å¤åˆ¶ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´é”ç­‰åŒæ­¥æœºåˆ¶çš„é—®é¢˜
- å…±äº«çš„èµ„æºï¼šä»£ç æ®µã€æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ã€ç¯å¢ƒå˜é‡ã€‚ä¸å…±äº«çš„èµ„æºï¼šè¿›ç¨‹IDï¼ˆPIDï¼‰ã€çˆ¶è¿›ç¨‹IDã€å†…å­˜ï¼ˆå †ã€æ ˆï¼‰ï¼ˆå› ä¸ºç‹¬è‡ªçš„åœ°å€ç©ºé—´ï¼‰ã€æ–‡ä»¶é”

## ä¸­æ–­

ä¸­æ–­æ˜¯å¤„ç†å¼‚æ­¥äº‹ä»¶çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒå…è®¸åœ¨æ­£å¸¸ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œçªç„¶è½¬ç§»åˆ°å¦ä¸€ä¸ªä»»åŠ¡ï¼Œç„¶ååœ¨é€‚å½“çš„æ—¶å€™è¿”å›åŸæ¥çš„ä»»åŠ¡ã€‚

- åŸºæœ¬æ¦‚å¿µ
    - ä¸­æ–­è¯·æ±‚ï¼šå¤–éƒ¨è®¾å¤‡ï¼ˆå¦‚ç¡¬ä»¶è®¾å¤‡ã€æ—¶é’Ÿç­‰ï¼‰å‘å¤„ç†å™¨å‘é€è¯·æ±‚ï¼Œè¦æ±‚å¤„ç†å™¨æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œè½¬è€Œå¤„ç†è®¾å¤‡çš„è¯·æ±‚äº‹ä»¶
    - ä¸­æ–­å‘é‡ï¼šæ¯ä¸ªä¸­æ–­éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œç§°ä¸ºä¸­æ–­å‘é‡ã€‚å¤„ç†å™¨å¯ä»¥æ ¹æ®ä¸­æ–­å‘é‡æ‰¾åˆ°å¯¹åº”çš„ä¸­æ–­æœåŠ¡ç¨‹åºçš„åœ°å€ã€‚
    - ä¸­æ–­æ§åˆ¶å™¨ï¼šè´Ÿè´£ç®¡ç†å’Œåˆ†å‘å„ç§ä¸­æ–­è¯·æ±‚çš„ç¡¬ä»¶ï¼Œç¡®ä¿å¤„ç†å™¨èƒ½å¤Ÿæ­£ç¡®å“åº”å’Œå¤„ç†å„ç§ä¸­æ–­ã€‚
    - ä¸­æ–­æœåŠ¡ç¨‹åºï¼šå¤„ç†ä¸­æ–­çš„ç¨‹åºï¼Œå®ƒè´Ÿè´£åœ¨ä¸­æ–­å‘ç”Ÿæ—¶ä¿å­˜å½“å‰è¿›ç¨‹çš„çŠ¶æ€ï¼Œæ‰§è¡Œç›¸åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºï¼Œç„¶åæ¢å¤åŸæ¥çš„è¿›ç¨‹çŠ¶æ€
- ä¸­æ–­ç±»å‹
    - å¤–éƒ¨ä¸­æ–­ï¼šç”±å¤–éƒ¨è®¾å¤‡å‘èµ·çš„ä¸­æ–­è¯·æ±‚ï¼Œå¦‚ç¡¬ä»¶è®¾å¤‡çš„è¾“å…¥è¾“å‡ºè¯·æ±‚
    - å†…éƒ¨ä¸­æ–­ï¼šç”±å¤„ç†å™¨å†…éƒ¨çš„é”™è¯¯æˆ–å¼‚å¸¸å¼•èµ·çš„ä¸­æ–­ï¼Œå¦‚é™¤é›¶é”™è¯¯ã€å†…å­˜è®¿é—®é”™è¯¯
    - è½¯ä»¶ä¸­æ–­ï¼šç”±è½¯ä»¶æˆ–ç¨‹åºä¸»åŠ¨è§¦å‘çš„ä¸­æ–­ï¼Œç”¨äºå®ç°ç³»ç»Ÿè°ƒç”¨æˆ–å…¶ä»–è½¯ä»¶åŠŸèƒ½
- ä¸­æ–­çš„ä½œç”¨
    - å®æ—¶å“åº”ï¼šå…è®¸å¤„ç†å™¨å®æ—¶å“åº”å¤–éƒ¨è®¾å¤‡çš„è¯·æ±‚ï¼Œå¤„ç†å®æ—¶æ€§è¦æ±‚é«˜çš„ä»»åŠ¡
    - æé«˜æ•ˆç‡ï¼šé€šè¿‡å…è®¸å¤„ç†å™¨åœ¨ç­‰å¾…å¤–éƒ¨äº‹ä»¶æ—¶æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡å’Œå¹¶å‘æ€§
    - å¼‚å¸¸å¤„ç†ï¼šç”¨äºå¤„ç†å¤„ç†å™¨å†…éƒ¨å’Œå¤–éƒ¨è®¾å¤‡å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§

<h1 id="effectivecpp">â˜ï¸ Effective C++</h1>

1. è§† C++ ä¸ºä¸€ä¸ªè¯­è¨€è”é‚¦ï¼ˆCã€Object-Oriented C++ã€Template C++ã€STLï¼‰
2. å®å¯ä»¥ç¼–è¯‘å™¨æ›¿æ¢é¢„å¤„ç†å™¨
    - å°½é‡ä»¥ `const`ã€`enum`ã€`inline` æ›¿æ¢ `#define`
3. [å°½å¯èƒ½ä½¿ç”¨ const](https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/03.%E5%B0%BD%E5%8F%AF%E8%83%BD%E4%BD%BF%E7%94%A8const)
4. ç¡®å®šå¯¹è±¡è¢«ä½¿ç”¨å‰å·²å…ˆè¢«åˆå§‹åŒ–

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/04.png" style="width:55%;">
</p>

5. äº†è§£ C++ é»˜é»˜ç¼–å†™å¹¶è°ƒç”¨å“ªäº›å‡½æ•°
    - ç¼–è¯‘å™¨æš—è‡ªä¸ºç±»åˆ›å»ºctorã€copy ctorã€copy assignmentã€dtor
6. è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°ï¼Œå°±åº”è¯¥æ˜ç¡®æ‹’ç»
    - C++11ï¼šä½¿ç”¨deleteå…³é”®è¯
    - C++98ï¼šå°†ä¸æƒ³ä½¿ç”¨çš„æˆå‘˜å‡½æ•°å£°æ˜ä¸º privateï¼Œå¹¶ä¸”ä¸äºˆå®ç°
7. ä¸ºå¤šæ€åŸºç±»å£°æ˜ virtual ææ„å‡½æ•°

```cpp
å°†åŸºç±»çš„ææ„å‡½æ•°è®¾ä¸ºè™šå‡½æ•°ï¼Œå„ä¸ªæ´¾ç”Ÿç±»çš„ææ„å‡½æ•°åœ¨å…¶ç±»ä¸­å…·ä½“å®ç°

ææ„é¡ºåºï¼šæ´¾ç”Ÿç±» -> åŸºç±»

â›”æ³¨æ„ï¼šå¦‚æœä¸æ˜¯ä¸ºäº†å¤šæ€ï¼Œä¸è¦éšæ„å°†ææ„å‡½æ•°è®¾ä¸ºè™šå‡½æ•°

è™šå‡½æ•°éœ€è¦é€šè¿‡è™šå‡½æ•°è¡¨æ¥è®¿é—®ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå¯¹è±¡éƒ½éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´æ¥å­˜å‚¨æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆã€‚å¯¹äºä¸éœ€è¦å¤šæ€çš„ç±»æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç§èµ„æºæµªè´¹

è™šå‡½æ•°è°ƒç”¨é€šå¸¸æ¯”æ™®é€šå‡½æ•°è°ƒç”¨æ…¢ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦é€šè¿‡è™šå‡½æ•°è¡¨é—´æ¥è·³è½¬ï¼Œè¿™æ— ç–‘æ˜¯æ€§èƒ½æµªè´¹
```

8. åˆ«è®©å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°
    - dtorå¯ä»¥ç»“æŸç¨‹åºï¼Œä½†ä¸åº”è¯¥æŠ›å‡ºå¼‚å¸¸
9. ç»ä¸åœ¨æ„é€ å’Œææ„è¿‡ç¨‹ä¸­è°ƒç”¨ virtual å‡½æ•°
    - å¯¹è±¡åˆ›å»ºæ—¶æœªå®Œå…¨æ„å»ºï¼Œè™šå‡½æ•°è¡¨æœªå®Œå…¨åˆ›å»ºå¥½ï¼Œè°ƒç”¨è™šå‡½æ•°è¿˜æ˜¯åŸºç±»çš„ï¼Œä¸ä¼šå…·ä½“åˆ°æ´¾ç”Ÿç±»
10. ä»¤ `operator=` è¿”å›ä¸€ä¸ª `reference to *this`
    - ç”¨äºè¿é”èµ‹å€¼
11. åœ¨ `operator=` ä¸­å¤„ç† â€œè‡ªæˆ‘èµ‹å€¼â€
    - ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ˜¯è‡ªæˆ‘èµ‹å€¼ï¼Œå°±ä¸åšä»»ä½•äº‹
12. å¤åˆ¶å¯¹è±¡æ—¶å‹¿å¿˜å…¶æ¯ä¸€ä¸ªæˆåˆ†
13. ä»¥å¯¹è±¡ç®¡ç†èµ„æº
    - èµ„æºåœ¨ctorä¸­è·å¾—ï¼Œåœ¨dtoré‡Šæ”¾ï¼Œå»ºè®®ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œèµ„æºè·å–ç«‹å³åˆå§‹åŒ–ï¼ˆResource Acquisition Is Initializationï¼ŒRAIIï¼‰
14. [åœ¨èµ„æºç®¡ç†ç±»ä¸­å°å¿ƒ copying è¡Œä¸º](https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/14.%E5%9C%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E7%B1%BB%E4%B8%AD%E5%B0%8F%E5%BF%83%20copying%20%E8%A1%8C%E4%B8%BA)
15. åœ¨èµ„æºç®¡ç†ç±»ä¸­æä¾›å¯¹åŸå§‹èµ„æºçš„è®¿é—®
    - å¯¹åŸå§‹èµ„æºçš„è®¿é—®å¯èƒ½ç»è¿‡æ˜¾å¼è½¬æ¢æˆ–éšå¼è½¬æ¢ï¼Œä¸€èˆ¬è€Œè¨€æ˜¾å¼è½¬æ¢è¾ƒå®‰å…¨ï¼Œéšå¼è½¬æ¢å¯¹å®¢æˆ·è¾ƒæ–¹ä¾¿
    - å¢åŠ ä¸€ä¸ªgetæ–¹æ³•è·å–åŸå§‹èµ„æºçš„å¼•ç”¨æˆ–åœ°å€
16. æˆå¯¹ä½¿ç”¨ new å’Œ delete æ—¶è¦é‡‡å–ç›¸åŒå½¢å¼
    - deleteï¼šé‡Šæ”¾å†…å­˜å¹¶è°ƒç”¨ææ„å‡½æ•°
    - delete[]ï¼šé‡Šæ”¾å†…å­˜ï¼Œå¹¶é€ä¸€è°ƒç”¨array newçš„å¯¹è±¡ä»¬çš„ææ„å‡½æ•°
17. ä»¥ç‹¬ç«‹è¯­å¥å°† newed å¯¹è±¡ç½®å…¥æ™ºèƒ½æŒ‡é’ˆ

```cpp
åº”é€‰æ‹©No2ï¼Œå› ä¸ºNo1æœ‰æ½œåœ¨å†…å­˜æ³„æ¼é£é™©ã€‚å…ˆ new Widgetï¼Œæ¥ç€æ‰§è¡Œpriority()ï¼Œå¦‚æœæ°å¥½æŠ›å‡ºå¼‚å¸¸ç¨‹åºç»“æŸï¼Œæ­¤æ—¶å°±å‘ç”Ÿäº†èµ„æºæ³„æ¼

int priority();
//No.1
processWidget(std::shared_ptr<Widget>(new Widget), priority());
//No.2
std::shared_ptr<Widget> pw = make_shared<Widget>(new Widget);
processWidget(pw, priority());
```

18. è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨

```
# å»ºç«‹æ–°ç±»å‹

è®¾è®¡ä¸€ä¸ª Date(int month, int day, int year) æ¥å£ï¼Œä¼ å‚å†™æˆäº† Date(28, 10, 1999); ,æ˜æ˜¾å°±æ˜¯å†™å€’äº†æœˆä»½å’Œå¤©æ•°ï¼Œè¿™å¾ˆç®€å•ï¼Œå¢åŠ  Day ã€month å’Œ year ç±»

# è°¨é˜²å°† == å†™æˆ =

# ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ
```

19. è®¾è®¡ class çŠ¹å¦‚è®¾è®¡ typeï¼Œéœ€è¦è€ƒè™‘å¯¹è±¡åˆ›å»ºã€é”€æ¯ã€åˆå§‹åŒ–ã€èµ‹å€¼ã€å€¼ä¼ é€’ã€åˆæ³•å€¼ã€ç»§æ‰¿å…³ç³»ã€è½¬æ¢ã€ä¸€èˆ¬åŒ–ç­‰ç­‰ã€‚
20. å®ä»¥ constå¼•ç”¨ä¼ é€’ æ›¿æ¢ æŒ‰å€¼ä¼ é€’
    - å‰è€…é€šå¸¸æ›´é«˜æ•ˆã€é¿å…åˆ‡å‰²é—®é¢˜ï¼Œä½†ä¸é€‚ç”¨äºå†…ç½®ç±»å‹ã€STLè¿­ä»£å™¨ã€å‡½æ•°å¯¹è±¡
21. å¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶ reference
    - ä¸è¦é”™è¯¯çš„è¿”å›å¯¹è±¡çš„å¼•ç”¨/æŒ‡é’ˆ

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/21.png" style="width:60%;">
</p>

22. å°†æˆå‘˜å˜é‡å£°æ˜ä¸º private
    - ä¸ºäº†å°è£…ã€ä¸€è‡´æ€§ã€å¯¹å…¶è¯»å†™ç²¾ç¡®æ§åˆ¶ç­‰
23. å®ä»¥ non-memberã€non-friend æ›¿æ¢æˆå‘˜å‡½æ•°

```cpp
class WebBrowser {
    void clearCache();
    void clearCookies();
    //No.1
    void clearEverything(); //call clearCache(), clearCookies()
};
//No.2
void clearEverything(WebBrowser& wb) {
    wb.clearCache();
    wb.clearCookies();
}

æ¨èç¬¬äºŒç§æ–¹æ³•ï¼Œnon-member ä»£æ›¿ member å‡½æ•°ï¼Œå¢åŠ å°è£…æ€§ã€åŒ…è£¹å¼¹æ€§ã€æœºèƒ½æ‰©å……æ€§
```

24. è‹¥æ‰€æœ‰å‚æ•°çš†é¡»è¦ç±»å‹è½¬æ¢ï¼Œè¯·ä¸ºæ­¤é‡‡ç”¨ non-member å‡½æ•°
    - æ‰€æœ‰å‚æ•°åŒ…æ‹¬è¢«thisæŒ‡é’ˆæ‰€æŒ‡çš„é‚£ä¸ªéšå–»å‚æ•°

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/24.png" style="width:70%;">
</p>

25. è€ƒè™‘å†™ä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„ swap å‡½æ•°
26. å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/26.png" style="width:58%;">
</p>

27. å°½é‡å°‘åšè½¬å‹åŠ¨ä½œ
    - static_cast
    - dynamic_cast
    - const_cast
    - reinterpret_cast
28. é¿å…ä½¿ç”¨ handlesï¼ˆåŒ…æ‹¬ å¼•ç”¨ã€æŒ‡é’ˆã€è¿­ä»£å™¨ï¼‰æŒ‡å‘å¯¹è±¡å†…éƒ¨
    - ä»¥å¢åŠ å°è£…æ€§ã€ä½¿ const æˆå‘˜å‡½æ•°çš„è¡Œä¸ºæ›´åƒ constã€é™ä½ â€œè™šåŠå·ç ç‰Œâ€ï¼ˆå¦‚æ‚¬ç©ºæŒ‡é’ˆç­‰ï¼‰çš„å¯èƒ½æ€§
29. ä¸º â€œå¼‚å¸¸å®‰å…¨â€ è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„
    - å¼‚å¸¸å®‰å…¨å‡½æ•°å³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¸ä¼šæ³„éœ²èµ„æºæˆ–å…è®¸ä»»ä½•æ•°æ®ç»“æ„è´¥å
30. é€å½»äº†è§£ inlining çš„é‡Œé‡Œå¤–å¤–
    - inline åœ¨å¤§å¤šæ•°ç¨‹åºä¸­æ˜¯ç¼–è¯‘æœŸçš„è¡Œä¸º
    - å‡½æ•°æ˜¯å¦çœŸæ­£ inlineï¼Œå–å†³äºç¼–è¯‘å™¨ï¼Œå®ƒä»¬æ‹’ç»å¤ªè¿‡å¤æ‚ï¼ˆå¦‚å¾ªç¯æˆ–é€’å½’ï¼‰çš„å‡½æ•°
    - è™šå‡½æ•°çš„è°ƒç”¨ä¼šè®© inlining è½ç©ºï¼Œå› ä¸ºè™šå‡½æ•°æ˜¯é€šè¿‡è™šå‡½æ•°è¡¨å®ç°çš„ï¼Œè™šè¡¨æŒ‡é’ˆåœ¨åˆ›å»ºå¯¹è±¡æ—¶è®¾ç½®
    - inline é€ æˆçš„ä»£ç è†¨èƒ€å¯èƒ½å¸¦æ¥æ•ˆç‡æŸå¤±
31. å°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜å…³ç³»é™è‡³æœ€ä½
    - å¦‚æœä½¿ç”¨ object references æˆ– object pointers å¯ä»¥å®Œæˆä»»åŠ¡ï¼Œå°±ä¸è¦ä½¿ç”¨ objects
32. ç¡®å®špublicç»§æ‰¿å¡‘æ¨¡å‡º is-a å…³ç³»

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/src/Effective%20C%2B%2B/32.png" style="width:80%;">
</p>

33. é¿å…é®æ©ç»§æ‰¿è€Œæ¥çš„åå­—
    - å¯ä½¿ç”¨ using å£°æ˜æˆ–è½¬äº¤å‡½æ•°ï¼ˆforwardingï¼‰æ¥è®©è¢«é®æ©çš„åå­—å†è§å¤©æ—¥
34. åŒºåˆ†æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿
    åœ¨å…¬å…±ç»§æ‰¿ä¸‹ï¼Œæ´¾ç”Ÿç±»æ€»æ˜¯ç»§æ‰¿åŸºç±»çš„æ¥å£
    çº¯è™šå‡½æ•°åªå…·ä½“æŒ‡å®šæ¥å£ç»§æ‰¿
    éè™šå‡½æ•°å…·ä½“æŒ‡å®šæ¥å£ç»§æ‰¿ä»¥åŠå¼ºåˆ¶æ€§å®ç°ç»§æ‰¿
35. è€ƒè™‘ virtual å‡½æ•°ä»¥å¤–çš„å…¶ä»–é€‰æ‹©
        - è€ƒè™‘å°†è™šå‡½æ•°æ›¿æ¢ä¸ºå‡½æ•°æŒ‡é’ˆæˆå‘˜å˜é‡ï¼Œä»¥ `tr1::function` æˆå‘˜å˜é‡æ›¿æ¢è™šå‡½æ•°
36. ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„ non-virtual å‡½æ•°
37. ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„ç¼ºçœå‚æ•°å€¼
    - å› ä¸ºç¼ºçœå‚æ•°å€¼æ˜¯é™æ€ç»‘å®šï¼Œè€Œè™šå‡½æ•°æ˜¯åŠ¨æ€ç»‘å®š
38. é€šè¿‡å¤åˆå¡‘æ¨¡ has-a æˆ– â€œæ ¹æ®æŸç‰©å®ç°å‡ºâ€
    - åœ¨åº”ç”¨åŸŸï¼Œå¤åˆæ„å‘³ has-aï¼ˆæœ‰ä¸€ä¸ªï¼‰ï¼›åœ¨å®ç°åŸŸï¼Œå¤åˆæ„å‘³ç€ is-implemented-in-terms-ofï¼ˆæ ¹æ®æŸç‰©å®ç°å‡ºï¼‰
39. æ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨ private ç»§æ‰¿
40. æ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨å¤šé‡ç»§æ‰¿
    - å¤šç»§æ‰¿æ¯”å•ä¸€ç»§æ‰¿å¤æ‚ï¼Œå¯èƒ½å¯¼è‡´æ–°çš„æ­§ä¹‰æ€§
    - ä½†ç¡®æœ‰æ­£å½“ç”¨é€”ï¼Œå¦‚ â€œpublic ç»§æ‰¿æŸä¸ª interface classâ€ å’Œ â€œprivate ç»§æ‰¿æŸä¸ªååŠ©å®ç°çš„ classâ€ï¼›
    - virtual ç»§æ‰¿å¯è§£å†³å¤šç»§æ‰¿ä¸‹è±å½¢ç»§æ‰¿çš„äºŒä¹‰æ€§é—®é¢˜ï¼Œä½†ä¼šå¢åŠ å¤§å°ã€é€Ÿåº¦ã€åˆå§‹åŒ–åŠèµ‹å€¼çš„å¤æ‚åº¦ç­‰ç­‰æˆæœ¬
41. äº†è§£éšå¼æ¥å£å’Œç¼–è¯‘æœŸå¤šæ€
42. äº†è§£ typename çš„åŒé‡æ„ä¹‰
43. å­¦ä¹ å¤„ç†æ¨¡æ¿åŒ–åŸºç±»å†…çš„åç§°
44. å°†ä¸å‚æ•°æ— å…³çš„ä»£ç æŠ½ç¦»æ¨¡æ¿
    - å› ç±»å‹æ¨¡æ¿å‚æ•°é€ æˆä»£ç è†¨èƒ€å¾€å¾€å¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°æˆ–ç±»æˆå‘˜å˜é‡æ›¿æ¢æ¨¡æ¿å‚æ•°æ¥æ¶ˆé™¤
    - å› ç±»å‹å‚æ•°è€Œé€ æˆçš„ä»£ç è†¨èƒ€å¾€å¾€å¯ä»¥é€šè¿‡è®©å¸¦æœ‰å®Œå…¨ç›¸åŒäºŒè¿›åˆ¶è¡¨è¿°çš„å®ç°ç±»å‹å…±äº«å®ç°ç 
45. è¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹ï¼ˆè¯·ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿ï¼ˆmember function templatesï¼‰ç”Ÿæˆ â€œå¯æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹â€ çš„å‡½æ•°ï¼›å£°æ˜ member templates ç”¨äº â€œæ³›åŒ– copy æ„é€ â€ æˆ– â€œæ³›åŒ– assignment æ“ä½œâ€ æ—¶è¿˜éœ€è¦å£°æ˜æ­£å¸¸çš„ copy æ„é€ å‡½æ•°å’Œ copy assignment æ“ä½œç¬¦ï¼‰
46. éœ€è¦ç±»å‹è½¬æ¢æ—¶è¯·ä¸ºæ¨¡æ¿å®šä¹‰éæˆå‘˜å‡½æ•°ï¼ˆå½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª class templateï¼Œè€Œå®ƒæ‰€æä¾›ä¹‹ â€œä¸æ­¤ template ç›¸å…³çš„â€ å‡½æ•°æ”¯æŒ â€œæ‰€æœ‰å‚æ•°ä¹‹éšå¼ç±»å‹è½¬æ¢â€ æ—¶ï¼Œè¯·å°†é‚£äº›å‡½æ•°å®šä¹‰ä¸º â€œclass template å†…éƒ¨çš„ friend å‡½æ•°â€ï¼‰
47. è¯·ä½¿ç”¨ traits classes è¡¨ç°ç±»å‹ä¿¡æ¯ï¼ˆtraits classes é€šè¿‡ templates å’Œ â€œtemplates ç‰¹åŒ–â€ ä½¿å¾— â€œç±»å‹ç›¸å…³ä¿¡æ¯â€ åœ¨ç¼–è¯‘æœŸå¯ç”¨ï¼Œé€šè¿‡é‡è½½æŠ€æœ¯ï¼ˆoverloadingï¼‰å®ç°åœ¨ç¼–è¯‘æœŸå¯¹ç±»å‹æ‰§è¡Œ if...else æµ‹è¯•ï¼‰
48. è®¤è¯† template å…ƒç¼–ç¨‹ï¼ˆæ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTMPï¼Œtemplate metaprogrammingï¼‰å¯å°†å·¥ä½œç”±è¿è¡ŒæœŸç§»å¾€ç¼–è¯‘æœŸï¼Œå› æ­¤å¾—ä»¥å®ç°æ—©æœŸé”™è¯¯ä¾¦æµ‹å’Œæ›´é«˜çš„æ‰§è¡Œæ•ˆç‡ï¼›TMP å¯è¢«ç”¨æ¥ç”Ÿæˆ â€œç»™äºˆæ”¿ç­–é€‰æ‹©ç»„åˆâ€ï¼ˆbased on combinations of policy choicesï¼‰çš„å®¢æˆ·å®šåˆ¶ä»£ç ï¼Œä¹Ÿå¯ç”¨æ¥é¿å…ç”Ÿæˆå¯¹æŸäº›ç‰¹æ®Šç±»å‹å¹¶ä¸é€‚åˆçš„ä»£ç ï¼‰
49. äº†è§£ new-handler çš„è¡Œä¸ºï¼ˆset\_new\_handler å…è®¸å®¢æˆ·æŒ‡å®šä¸€ä¸ªåœ¨å†…å­˜åˆ†é…æ— æ³•è·å¾—æ»¡è¶³æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ï¼›nothrow new æ˜¯ä¸€ä¸ªé¢‡å…·å±€é™çš„å·¥å…·ï¼Œå› ä¸ºå®ƒåªé€‚ç”¨äºå†…å­˜åˆ†é…ï¼ˆoperator newï¼‰ï¼Œåç»§çš„æ„é€ å‡½æ•°è°ƒç”¨è¿˜æ˜¯å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼‰
50. äº†è§£ new å’Œ delete çš„åˆç†æ›¿æ¢æ—¶æœºï¼ˆä¸ºäº†æ£€æµ‹è¿ç”¨é”™è¯¯ã€æ”¶é›†åŠ¨æ€åˆ†é…å†…å­˜ä¹‹ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ã€å¢åŠ åˆ†é…å’Œå½’è¿˜é€Ÿåº¦ã€é™ä½ç¼ºçœå†…å­˜ç®¡ç†å™¨å¸¦æ¥çš„ç©ºé—´é¢å¤–å¼€é”€ã€å¼¥è¡¥ç¼ºçœåˆ†é…å™¨ä¸­çš„éæœ€ä½³é½ä½ã€å°†ç›¸å…³å¯¹è±¡æˆç°‡é›†ä¸­ã€è·å¾—éä¼ ç»Ÿçš„è¡Œä¸ºï¼‰
51. ç¼–å†™ new å’Œ delete æ—¶éœ€å›ºå®ˆå¸¸è§„ï¼ˆoperator new åº”è¯¥å†…æ¶µä¸€ä¸ªæ— ç©·å¾ªç¯ï¼Œå¹¶åœ¨å…¶ä¸­å°è¯•åˆ†é…å†…å­˜ï¼Œå¦‚æœå®ƒæ— æ³•æ»¡è¶³å†…å­˜éœ€æ±‚ï¼Œå°±åº”è¯¥è°ƒç”¨ new-handlerï¼Œå®ƒä¹Ÿåº”è¯¥æœ‰èƒ½åŠ›å¤„ç† 0 bytes ç”³è¯·ï¼Œclass ä¸“å±ç‰ˆæœ¬åˆ™è¿˜åº”è¯¥å¤„ç† â€œæ¯”æ­£ç¡®å¤§å°æ›´å¤§çš„ï¼ˆé”™è¯¯ï¼‰ç”³è¯·â€ï¼›operator delete åº”è¯¥åœ¨æ”¶åˆ° null æŒ‡é’ˆæ—¶ä¸åšä»»ä½•äº‹ï¼Œclass ä¸“å±ç‰ˆæœ¬åˆ™è¿˜åº”è¯¥å¤„ç† â€œæ¯”æ­£ç¡®å¤§å°æ›´å¤§çš„ï¼ˆé”™è¯¯ï¼‰ç”³è¯·â€ï¼‰
52. å†™äº† placement new ä¹Ÿè¦å†™ placement deleteï¼ˆå½“ä½ å†™ä¸€ä¸ª placement operator newï¼Œè¯·ç¡®å®šä¹Ÿå†™å‡ºäº†å¯¹åº”çš„ placement operator deleteï¼Œå¦åˆ™å¯èƒ½ä¼šå‘ç”Ÿéšå¾®è€Œæ—¶æ–­æ—¶ç»­çš„å†…å­˜æ³„æ¼ï¼›å½“ä½ å£°æ˜ placement new å’Œ placement deleteï¼Œè¯·ç¡®å®šä¸è¦æ— æ„è¯†ï¼ˆéæ•…æ„ï¼‰åœ°é®æ©äº†å®ƒä»¬åœ°æ­£å¸¸ç‰ˆæœ¬ï¼‰
53. ä¸è¦è½»å¿½ç¼–è¯‘å™¨çš„è­¦å‘Š
54. è®©è‡ªå·±ç†Ÿæ‚‰åŒ…æ‹¬ TR1 åœ¨å†…çš„æ ‡å‡†ç¨‹åºåº“ï¼ˆTR1ï¼ŒC++ Technical Report 1ï¼ŒC++11 æ ‡å‡†çš„è‰ç¨¿æ–‡ä»¶ï¼‰
55. è®©è‡ªå·±ç†Ÿæ‚‰ Boostï¼ˆå‡†æ ‡å‡†åº“ï¼‰

<h1 id="internet">â˜ï¸ è®¡ç®—æœºç½‘ç»œ</h1>

## è¾“å…¥ç½‘å€åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
1. è¾“å…¥urlåï¼Œç”¨æˆ·ä¸»æœºå…ˆæŸ¥è¯¢æœ¬æœºDNSç¼“å­˜ï¼Œæœ‰è®°å½•å°±çŸ¥é“å¾…è®¿é—®urlçš„IPæ˜¯ä»€ä¹ˆäº†
2. å¦‚æœæ²¡æœ‰è®°å½•ï¼ŒDNSå®¢æˆ·ç«¯å°±å‘é€DNSæŸ¥è¯¢æŠ¥æ–‡ï¼Œå®ƒè¢«UDPåè®®å°è£…æˆUDPæ•°æ®æŠ¥ï¼Œè¿›ä¸€æ­¥å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œé€šè¿‡ä»¥å¤ªç½‘å‘é€ç»™DNSæœåŠ¡å™¨
3. æœåŠ¡å™¨è§£æä¹‹åå›é€ä¸€ä¸ªDNSå“åº”æŠ¥æ–‡ï¼Œå°è£…åœ¨IPæ•°æ®åŒ…ä¸­
4. ç”¨æˆ·ä¸»æœºçš„DNSè¿›ç¨‹è§£æä¹‹åå°±çŸ¥é“urlå¯¹åº”çš„IPæ˜¯ä»€ä¹ˆï¼Œéšåå­˜å‚¨åˆ°DNSè¡¨ä¸­
5. ç”¨æˆ·ä¸»æœºä¸»åŠ¨å‘èµ·TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œè¯·æ±‚å’ŒwebæœåŠ¡å™¨å»ºç«‹è¿æ¥
6. ç”¨æˆ·ä¸»æœºçš„HTTPè¿›ç¨‹å‘é€HTTPè¯·æ±‚æŠ¥æ–‡ï¼Œå®ƒè¢«TCPåè®®å°è£…æˆTCPæŠ¥æ–‡æ®µï¼Œè¿›ä¸€æ­¥å°è£…è¿›IPæ•°æ®æŠ¥å‘é€å‡ºå»
7. webæœåŠ¡å™¨æ¥æ”¶åˆ°åè§£ææŠ¥æ–‡ï¼Œå¹¶å›é€HTTPå“åº”æŠ¥æ–‡ä¼ ç»™ç”¨æˆ·ä¸»æœº
8. ç”¨æˆ·ä¸»æœºæ¥æ”¶åæ ¹æ®ç«¯å£å·ï¼Œäº¤ç»™HTTPè¿›ç¨‹è§£æå¹¶æ¸²æŸ“

## åˆ†å±‚æ¶æ„

![è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„](https://github.com/arqady01/cpp-interview/blob/main/internet/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B.png)

å„å±‚ä½œç”¨åŠå¸¸è§åè®®ï¼š

ä¸ƒå±‚ | ä½œç”¨ | åè®®
---|---|---
ç‰©ç†å±‚ | é€šè¿‡åª’ä»‹ä¼ è¾“æ¯”ç‰¹ï¼Œç¡®å®šæœºæ¢°åŠç”µæ°”è§„èŒƒï¼ˆæ¯”ç‰¹ Bitï¼‰ | RJ45ã€CLOCKã€IEEE802.3ï¼ˆä¸­ç»§å™¨ï¼Œé›†çº¿å™¨ï¼‰
æ•°æ®é“¾è·¯å±‚|å°†æ¯”ç‰¹ç»„è£…æˆå¸§å’Œç‚¹åˆ°ç‚¹çš„ä¼ é€’ï¼ˆå¸§ Frameï¼‰| PPPã€FRã€HDLCã€VLANã€MACï¼ˆç½‘æ¡¥ï¼Œäº¤æ¢æœºï¼‰
ç½‘ç»œå±‚|è´Ÿè´£æ•°æ®åŒ…ä»æºåˆ°å®¿çš„ä¼ é€’å’Œç½‘é™…äº’è¿ï¼ˆåŒ… Packetï¼‰|IPã€ICMPã€ARPã€RARPã€OSPFã€IPXã€RIPã€IGRPï¼ˆè·¯ç”±å™¨ï¼‰
è¿è¾“å±‚|æä¾›ç«¯åˆ°ç«¯çš„å¯é æŠ¥æ–‡ä¼ é€’å’Œé”™è¯¯æ¢å¤ï¼ˆ æ®µSegmentï¼‰|TCPã€UDPã€SPX
ä¼šè¯å±‚|å»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢ä¼šè¯ï¼ˆä¼šè¯åè®®æ•°æ®å•å…ƒ SPDUï¼‰|NFSã€SQLã€NETBIOSã€RPC
è¡¨ç¤ºå±‚|å¯¹æ•°æ®è¿›è¡Œç¿»è¯‘ã€åŠ å¯†å’Œå‹ç¼©ï¼ˆè¡¨ç¤ºåè®®æ•°æ®å•å…ƒ PPDUï¼‰|JPEGã€MPEGã€ASII
åº”ç”¨å±‚|å…è®¸è®¿é—®OSIç¯å¢ƒçš„æ‰‹æ®µï¼ˆåº”ç”¨åè®®æ•°æ®å•å…ƒ APDUï¼‰|FTPã€DNSã€Telnetã€SMTPã€HTTPã€WWWã€NFSã€DHCP

äº”å±‚ | ä½œç”¨ | è§£å†³çš„é—®é¢˜ | å¸¸è§åè®®
---|---|---|---
åº”ç”¨å±‚ | ç½‘ç»œåº”ç”¨ | è§£å†³é€šè¿‡åº”ç”¨çš„äº¤äº’æ¥è§£å†³ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜ | HTTP SMTP DNS RTP
è¿è¾“å±‚ | ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ | è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜ | TCP UDP
ç½‘ç»œå±‚ | ä¸ºæ•°æ®æŠ¥ä»æºåˆ°ç›®çš„é€‰æ‹©è·¯ç”± | è§£å†³åˆ†ç»„åœ¨å¤šä¸ªç½‘ç»œä¸Šè·¯ç”±çš„é—®é¢˜ | IP ICMP ARP RIP
æ•°æ®é“¾è·¯å±‚ | ç›¸é‚»ç½‘ç»œèŠ‚ç‚¹é—´çš„æ•°æ®ä¼ è¾“ | è§£å†³åˆ†ç»„åœ¨ç›¸é‚»ç½‘ç»œä¸Šä¼ è¾“çš„é—®é¢˜ | PPP MAC
ç‰©ç†å±‚ | åœ¨çº¿è·¯ä¸Šä¼ è¾“æ¯”ç‰¹bit | è§£å†³ç”¨ä½•ç§ä¿¡å·ä¼ è¾“æ¯”ç‰¹çš„é—®é¢˜ | RJ45 IEEE802.3

## ç‰©ç†å±‚

* ä¼ è¾“æ•°æ®çš„å•ä½ï¼šæ¯”ç‰¹
* æ•°æ®ä¼ è¾“ç³»ç»Ÿï¼šæºç³»ç»Ÿï¼ˆæºç‚¹ã€å‘é€å™¨ï¼‰ --> ä¼ è¾“ç³»ç»Ÿ --> ç›®çš„ç³»ç»Ÿï¼ˆæ¥æ”¶å™¨ã€ç»ˆç‚¹ï¼‰

é€šé“ï¼š
* å•å‘é€šé“ï¼ˆå•å·¥é€šé“ï¼‰ï¼šåªæœ‰ä¸€ä¸ªæ–¹å‘é€šä¿¡ï¼Œæ²¡æœ‰åæ–¹å‘äº¤äº’ï¼Œå¦‚å¹¿æ’­
* åŒå‘äº¤æ›¿é€šä¿¡ï¼ˆåŠåŒå·¥é€šä¿¡ï¼‰ï¼šé€šä¿¡åŒæ–¹éƒ½å¯å‘æ¶ˆæ¯ï¼Œä½†ä¸èƒ½åŒæ—¶å‘é€æˆ–æ¥æ”¶
* åŒå‘åŒæ—¶é€šä¿¡ï¼ˆå…¨åŒå·¥é€šä¿¡ï¼‰ï¼šé€šä¿¡åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡æ¯

é€šé“å¤ç”¨æŠ€æœ¯ï¼š
* é¢‘åˆ†å¤ç”¨ï¼ˆFDMï¼ŒFrequency Division Multiplexingï¼‰ï¼šä¸åŒç”¨æˆ·åœ¨ä¸åŒé¢‘å¸¦ï¼Œæ‰€ç”¨ç”¨æˆ·åœ¨åŒæ ·æ—¶é—´å ç”¨ä¸åŒå¸¦å®½èµ„æº
* æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼ŒTime Division Multiplexingï¼‰ï¼šä¸åŒç”¨æˆ·åœ¨åŒä¸€æ—¶é—´æ®µçš„ä¸åŒæ—¶é—´ç‰‡ï¼Œæ‰€æœ‰ç”¨æˆ·åœ¨ä¸åŒæ—¶é—´å ç”¨åŒæ ·çš„é¢‘å¸¦å®½åº¦
* æ³¢åˆ†å¤ç”¨ï¼ˆWDMï¼ŒWavelength Division Multiplexingï¼‰ï¼šå…‰çš„é¢‘åˆ†å¤ç”¨
* ç åˆ†å¤ç”¨ï¼ˆCDMï¼ŒCode Division Multiplexingï¼‰ï¼šä¸åŒç”¨æˆ·ä½¿ç”¨ä¸åŒçš„ç ï¼Œå¯ä»¥åœ¨åŒæ ·æ—¶é—´ä½¿ç”¨åŒæ ·é¢‘å¸¦é€šä¿¡

### é›†çº¿å™¨å’Œäº¤æ¢æœºçš„åŒºåˆ«

- å‘é€å•æ’­å¸§
    - é›†çº¿å™¨ä¼šå°†å•æ’­å¸§è½¬å‘ç»™å…¶ä»–ç«™ç‚¹ï¼Œä»–ä»¬ä¼šæ ¹æ®å¸§çš„macåœ°å€å†³å®šæ¥æ”¶è¿˜æ˜¯ä¸¢å¼ƒ
    - äº¤æ¢æœºæ ¹æ®å•æ’­å¸§å’Œå¸§è½¬å‘è¡¨ï¼Œè¿›è¡Œæ˜ç¡®è½¬å‘ç»™ç›®æ ‡ç«™ç‚¹
- å‘é€å¹¿æ’­å¸§
    - é›†çº¿å™¨å·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œä¸è¯†åˆ«macåœ°å€ï¼Œä¸ç®¡æ˜¯å•æ’­å¸§è¿˜æ˜¯å¹¿æ’­å¸§ï¼Œä»–åªè´Ÿè´£è½¬å‘
    - äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå†ç»“åˆå¸§è½¬å‘è¡¨ï¼Œè¿›è¡Œæ˜ç¡®è½¬å‘ã€ç›²ç›®è½¬å‘æˆ–ä¸¢å¼ƒï¼Œå¯¹äºå¹¿æ’­å¸§ï¼Œä¼šè½¬å‘ç»™å…¶ä»–å…¨éƒ¨ç«™ç‚¹
- å¤šç«™ç‚¹é€šä¿¡ A->BåŒæ—¶C->D
    - é›†çº¿å™¨ä¸­ä¼šå‘ç”Ÿç¢°æ’ï¼Œç¢°æ’ä¿¡å·ä¼šä¼ é€’ç»™å„ä¸ªä¸»æœºï¼Œç½‘å¡æ£€æµ‹åˆ°ç¢°æ’ä¼šä¸¢å¼ƒ
    - äº¤æ¢æœºä¼šå¯¹æ”¶åˆ°çš„å¸§å­˜å‚¨è½¬å‘ï¼Œä¸ä¼šäº§ç”Ÿç¢°æ’ï¼ŒBå’ŒDéƒ½ä¼šæ”¶åˆ°å„è‡ªçš„å•æ’­å¸§

## æ•°æ®é“¾è·¯å±‚

ä¸»è¦ä¿¡é“ï¼š
* ç‚¹å¯¹ç‚¹ä¿¡é“
* å¹¿æ’­ä¿¡é“

### ç‚¹å¯¹ç‚¹ä¿¡é“

* æ•°æ®å•å…ƒï¼šå¸§

ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼š
* å°è£…æˆå¸§ï¼šæŠŠç½‘ç»œå±‚çš„ IP æ•°æ®æŠ¥å°è£…æˆå¸§ï¼Œ`SOH - æ•°æ®éƒ¨åˆ† - EOT`
* é€æ˜ä¼ è¾“ï¼šä¸ç®¡æ•°æ®éƒ¨åˆ†ä»€ä¹ˆå­—ç¬¦ï¼Œéƒ½èƒ½ä¼ è¾“å‡ºå»ï¼›å¯ä»¥é€šè¿‡å­—èŠ‚å¡«å……æ–¹æ³•è§£å†³ï¼ˆå†²çªå­—ç¬¦å‰åŠ è½¬ä¹‰å­—ç¬¦ï¼‰
* å·®é”™æ£€æµ‹ï¼šé™ä½è¯¯ç ç‡ï¼ˆBERï¼ŒBit Error Rateï¼‰ï¼Œå¹¿æ³›ä½¿ç”¨å¾ªç¯å†—ä½™æ£€æµ‹ï¼ˆCRCï¼ŒCyclic Redundancy Checkï¼‰

ç‚¹å¯¹ç‚¹åè®®ï¼ˆPoint-to-Point Protocolï¼‰ï¼š
* ç‚¹å¯¹ç‚¹åè®®ï¼ˆPoint-to-Point Protocolï¼‰ï¼šç”¨æˆ·è®¡ç®—æœºå’Œ ISP é€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„åè®®

### å¹¿æ’­ä¿¡é“

å¹¿æ’­é€šä¿¡ï¼š
* ç¡¬ä»¶åœ°å€ï¼ˆç‰©ç†åœ°å€ã€MAC åœ°å€ï¼‰
* å•æ’­ï¼ˆunicastï¼‰å¸§ï¼ˆä¸€å¯¹ä¸€ï¼‰ï¼šæ”¶åˆ°çš„å¸§çš„ MAC åœ°å€ä¸æœ¬ç«™çš„ç¡¬ä»¶åœ°å€ç›¸åŒ
* å¹¿æ’­ï¼ˆbroadcastï¼‰å¸§ï¼ˆä¸€å¯¹å…¨ä½“ï¼‰ï¼šå‘é€ç»™æœ¬å±€åŸŸç½‘ä¸Šæ‰€æœ‰ç«™ç‚¹çš„å¸§
* å¤šæ’­ï¼ˆmulticastï¼‰å¸§ï¼ˆä¸€å¯¹å¤šï¼‰ï¼šå‘é€ç»™æœ¬å±€åŸŸç½‘ä¸Šä¸€éƒ¨åˆ†ç«™ç‚¹çš„å¸§

### ARQåè®®

è‡ªåŠ¨é‡ä¼ è¯·æ±‚åè®®é€šè¿‡ä½¿ç”¨ç¡®è®¤å’Œè¶…æ—¶æœºåˆ¶ï¼Œåœ¨ä¸å¯é çš„æœåŠ¡ä¸Šå®ç°å¯é çš„ä¿¡æ¯ä¼ è¾“ï¼Œæ˜¯å¯é ä¼ è¾“çš„åŸºç¡€ã€‚

1. åœæ­¢-ç­‰å¾…åè®®SW
    - å‘é€æ–¹æ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„åï¼Œä¸èƒ½å°†å…¶ä»å‘é€ç¼“å­˜ä¸­åˆ é™¤ï¼Œè‹¥æ”¶åˆ°æ¥æ”¶æ–¹çš„ACKå°±åˆ é™¤ç¼“å­˜å¹¶å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„ï¼›è‹¥æ”¶åˆ°NAKå°±çŸ¥é“è¯¯ç å¸§è¢«ä¸¢å¼ƒäº†ï¼Œé‡ä¼ æ•°æ®åˆ†ç»„
    - å‘é€æ–¹æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„åï¼Œåœæ­¢å‘é€ï¼Œç­‰å¾…æ¥æ”¶ACKæˆ–è€…NAKï¼Œè¿™å°±æ˜¯åœæ­¢-ç­‰å¾…çš„ç”±æ¥
2. å›é€€Nå¸§åè®®GBN
    - å‘é€çª—å£å°ºå¯¸W<sub>T</sub>ï¼š1 ï¼œ W<sub>T</sub> â‰¤ 2<sup>n</sup> - 1
    - æ¥æ”¶çª—å£å°ºå¯¸W<sub>R</sub> = 1
    - ç´¯è®¡ç¡®è®¤æœºåˆ¶ï¼šæ¥æ”¶æ–¹ä¸ä¸€å®šè¦å¯¹å‘é€æ–¹çš„åˆ†ç»„é€ä¸ªå‘é€ç¡®è®¤ï¼Œè€Œæ˜¯å¯ä»¥åœ¨æ”¶åˆ°å‡ ä¸ªåˆ†ç»„åï¼Œå¯¹æŒ‰éœ€åˆ°è¾¾çš„æœ€åä¸€ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ï¼ŒACK<sub>n</sub>è¡¨ç¤ºåºå·nåŠä»¥å‰çš„åˆ†ç»„éƒ½è¢«æ­£ç¡®æ¥æ”¶
    - å½“ç¬¬kå¸§å› ä¸ºè¯¯ç è¿‡é«˜è¢«ä¸¢å¼ƒï¼Œå°±ç®—åé¢åˆ†ç»„æŒ‰åºåˆ°è¾¾ï¼Œæ¯åˆ°è¾¾ä¸€ä¸ªï¼Œæ¥æ”¶æ–¹å°±å‘é€ä¸€ä¸ªACK<sub>k-1</sub>ï¼Œè¿ç»­æ”¶åˆ°4ä¸ªACK<sub>k-1</sub>ï¼Œå‘é€æ–¹å°±ç«‹å³å‘é€ç¬¬kå¸§ï¼Œè€Œåé¢çš„å¸§éƒ½è¦é‡ä¼ ï¼Œæ‰€ä»¥å«å›é€€Nå¸§åè®®
3. é€‰æ‹©é‡ä¼ åè®®SR
    - å‘é€çª—å£W<sub>T</sub>ï¼š1ï¼œ W<sub>T</sub> â‰¤ 2<sup>n-1</sup>
    - æ¥æ”¶çª—å£W<sub>R</sub>ï¼š1 ï¼œ W<sub>R</sub> â‰¤ W<sub>T</sub>
    - é€ä¸€ç¡®è®¤æœºåˆ¶ï¼šå½“è¯¯ç å¸§è¢«ä¸¢å¼ƒï¼Œå‘é€æ–¹åªéœ€è¦é‡ä¼ è¯¯ç å¸§å°±å¥½ï¼Œæ‰€ä»¥ä¸èƒ½é‡‡ç”¨ç´¯è®¡ç¡®è®¤ï¼Œè€Œæ˜¯é€ä¸€ç¡®è®¤ï¼Œå¯¹æ¥æ”¶çª—å£ä¸­å·²æ”¶åˆ°çš„å¸§æ‰“æ ‡è®°å³å¯
    - W<sub>T</sub>å’ŒW<sub>R</sub>éƒ½ä¸èƒ½è¿‡å¤§ï¼Œå¦åˆ™æ¥æ”¶æ–¹æ— æ³•åˆ†è¾¨æ–°æ—§åˆ†ç»„ï¼Œé€ æˆåˆ†ç»„é‡å¤

### CSMA/CDè½½æ³¢ç›‘å¬

ä¸ºäº†é˜²æ­¢å…±äº«æ€»çº¿å‹ç½‘ç»œçš„åè°ƒæ€»çº¿ä¸Šå„ç«™ç‚¹çš„äº‰ç”¨æ€»çº¿é—®é¢˜ï¼Œæ‰€ä»¥è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥/ç¢°æ’æ£€æµ‹åè®®åº”è¿è€Œç”Ÿ

1. å¤šå€æ¥å…¥MA
    - å¤šä¸ªç«™ç‚¹è¿æ¥åœ¨ä¸€æ¡æ€»çº¿ä¸Šï¼Œç«äº‰ä½¿ç”¨
2. è½½æ³¢å…¼å®¹CS
    - æ¯ä¸ªç«™ç‚¹åœ¨å‘é€å¸§å‰ï¼Œè¦å…ˆæ£€æµ‹æ€»çº¿ä¸Šæ˜¯å¦æœ‰å…¶ä»–ç«™ç‚¹åœ¨å‘é€ï¼ˆå…ˆå¬åè¯´ï¼‰
    - æ£€æµ‹åˆ°æ€»çº¿ç©ºé—²ï¼Œå°±å‘é€å¸§
    - æ£€æµ‹åˆ°æ€»çº¿å¿™ï¼Œåˆ™ç»§ç»­æ£€æµ‹å¹¶ç­‰å¾…ï¼Œç„¶åå‘é€å¸§
3. ç¢°æ’æ£€æµ‹CD
    - æ¯ä¸ªæ­£åœ¨å‘é€çš„å¸§ï¼Œè¾¹å‘é€è¾¹æ£€æµ‹ç¢°æ’ï¼ˆè¾¹è¯´è¾¹å¬ï¼‰
    - ä¸€ä½†æ£€æµ‹åˆ°ç¢°æ’ï¼Œç«‹å³åœæ­¢å‘é€ï¼Œé€€é¿ä¸€æ®µæ—¶é—´åå†ä»è½½æ³¢ç›‘å¬å¼€å§‹å‘é€

![](/resource/network/csmacd.png)

### macåœ°å€åŠå…¶ä½œç”¨

MACåœ°å€ç”¨äºåœ¨ç½‘ç»œä¸­å”¯ä¸€æ ‡è¯†è®¾å¤‡ï¼Œé€šå¸¸è¢«ç§°ä¸ºç‰©ç†åœ°å€

- å”¯ä¸€æ€§ï¼šæ¯ä¸ªè®¾å¤‡çš„MACåœ°å€éƒ½æ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œè¿™ç¡®ä¿äº†åœ¨åŒä¸€ç½‘ç»œä¸­èƒ½å¤Ÿå‡†ç¡®åœ°è¯†åˆ«å’Œå®šä½æ¯å°è®¾å¤‡
- æ•°æ®ä¼ è¾“ä¸­çš„å¯»å€ï¼šåœ¨æ•°æ®åŒ…ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå‘é€æ–¹ä¼šå°†ç›®æ ‡è®¾å¤‡çš„MACåœ°å€å°è£…åœ¨æ•°æ®å¸§çš„å¤´éƒ¨ï¼Œä»¥ä¾¿ç½‘ç»œè®¾å¤‡æ ¹æ®è¯¥MACåœ°å€è¿›è¡Œå¯»å€å’Œè½¬å‘
- ARPåè®®æ”¯æŒï¼šIPåœ°å€ä¸MACåœ°å€ä¹‹é—´çš„æ˜ å°„æ˜¯é€šè¿‡ARPåè®®å®Œæˆçš„
    - æ ¹æ®IPåœ°å€è·å–ç‰©ç†åœ°å€ã€‚ä¸»æœºå‘é€ä¿¡æ¯æ—¶å°†åŒ…å«ç›®æ ‡IPåœ°å€çš„ARPè¯·æ±‚å¹¿æ’­åˆ°å±€åŸŸç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºï¼Œå¹¶æ¥æ”¶è¿”å›æ¶ˆæ¯ï¼Œä»¥ç¡®å®šç›®æ ‡çš„ç‰©ç†åœ°å€ï¼›æ”¶åˆ°è¿”å›æ¶ˆæ¯åå°†è¯¥IPåœ°å€å’Œç‰©ç†åœ°å€å­˜å…¥æœ¬æœºARPç¼“å­˜ä¸­ï¼Œå¹¶ä¿ç•™ä¸€å®šæ—¶é—´ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ç›´æ¥æŸ¥è¯¢ARPç¼“å­˜ä»¥èŠ‚çº¦èµ„æº

## ç½‘ç»œå±‚

### ICMPï¼ˆç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰

- ä¸»æœºæˆ–è·¯ç”±å™¨ä½¿ç”¨ICMPæ¥å‘é€å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡ï¼Œæä¾›ç½‘ç»œè¯Šæ–­ã€æµ‹è¯•å’Œç®¡ç†çš„åŠŸèƒ½ã€‚
- ICMPåœ¨IPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„åè®®å­—æ®µä¸º1

ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ä¸€å…±æœ‰äº”ç§

1. ç»ˆç‚¹ä¸å¯è¾¾
    - å½“ä¸»æœºæˆ–è·¯ç”±å™¨æ— æ³•äº¤ä»˜æ•°æ®æŠ¥æ—¶ï¼Œéšå³ä¸¢å¼ƒè¯¥æ•°æ®åŒ…ï¼Œå¹¶å‘æºç‚¹å‘é€ç»ˆç‚¹ä¸å¯è¾¾æŠ¥æ–‡
2. å‚æ•°é—®é¢˜
    - IPæŠ¥æ–‡é¦–éƒ¨ä¸­çš„é¦–éƒ¨æ£€éªŒå’Œå­—æ®µåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œä¸¢å¼ƒæ•°æ®æŠ¥ï¼Œå¹¶å‘æºç‚¹å‘é€å‚æ•°é—®é¢˜æŠ¥æ–‡
3. æ—¶é—´è¶…è¿‡
    - å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªç›®çš„IPåœ°å€ä¸æ˜¯è‡ªå·±çš„æŠ¥æ–‡ï¼Œå°±å°†æŠ¥æ–‡çš„TTLç”Ÿå­˜æ—¶é—´å‡ä¸€
    - å¦‚æœTTLä¸ä¸ºé›¶ï¼Œè·¯ç”±å™¨ä¼šå°†æŠ¥æ–‡è½¬å‘å‡ºå»ï¼›
    - å¦‚æœTTLä¸º0ï¼Œä¸¢å¼ƒæ•°æ®æŠ¥ï¼Œå¹¶å‘æºç‚¹å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡
4. æºç‚¹æŠ‘åˆ¶
    - å½“ä¸»æœºæˆ–è·¯ç”±å™¨ç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€æºç‚¹æŠ‘åˆ¶æŠ¥æ–‡ï¼Œå‘ŠçŸ¥æºç‚¹åº”å°†å‘é€é€Ÿç‡æ”¾æ…¢
5. æ”¹å˜è·¯ç”±ï¼ˆé‡å®šå‘ï¼‰
    - å½“è·¯ç”±å™¨å‘ç°æ›´å¥½çš„è·¯å¾„æ—¶ï¼Œä¼šå‘é€é‡å®šå‘æŠ¥æ–‡ï¼Œé€šçŸ¥å‘é€å‘æ›´æ¢è·¯ç”±

ICMPè¯¢é—®æŠ¥æ–‡æœ‰ä¸¤ç§
1. å›é€è¯·æ±‚å’Œå›ç­”
    - ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡æ˜¯ä¸»æœºæˆ–è·¯ç”±å™¨å‘ä¸€ä¸ªç‰¹å®šä¸»æœºå‘å‡ºè¯¢é—®ï¼Œæ”¶åˆ°æ­¤æŠ¥æ–‡çš„ä¸»æœºå¿…é¡»ç»™æºä¸»æœºæˆ–è·¯ç”±å™¨å‘é€ICMPå›é€å›ç­”æŠ¥æ–‡
    - å¯ç”¨æ¥æµ‹è¯•ç›®çš„ä¸»æœºæ˜¯å¦å¯è¾¾å’Œäº†è§£ç›¸å…³çŠ¶æ€
2. æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­”
    - è¯·æ±‚ç›®çš„ä¸»æœºæˆ–è·¯ç”±å™¨å›ç­”å½“å‰æ—¶é—´å’Œæ—¥æœŸï¼Œè¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥è¿›è¡Œæ—¶é’ŸåŒæ­¥å’Œæµ‹é‡æ—¶é—´

ICMPå…¸å‹åº”ç”¨
1. åˆ†ç»„ç½‘é—´æ¢æµ‹Ping
    - ç”¨æ¥æµ‹è¯•ä¸»æœºæˆ–è·¯ç”±å™¨é—´çš„è¿é€šæ€§
    - åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚çš„ICMPï¼ˆæ²¡æœ‰é€šè¿‡ä¼ è¾“å±‚çš„TCPæˆ–UDPï¼‰
    - ä½¿ç”¨ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡
2. è·Ÿè¸ªè·¯ç”±traceroute
    - ç”¨æ¥æµ‹è¯•IPæ•°æ®æŠ¥ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºè¦ç»è¿‡å“ªäº›è·¯ç”±
    - å®ç°åŸç†ï¼š
    Tracerouteå‘é€ä¸€ä¸ªUDPæŠ¥æ–‡åˆ°ç›®æ ‡ä¸»æœºï¼ŒTTLå­—æ®µè®¾ç½®ä¸º1ï¼Œæ„å‘³ç€æŠ¥æ–‡åªèƒ½ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç„¶åè¢«ä¸¢å¼ƒï¼›å½“ç¬¬ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°UDPæŠ¥æ–‡æ—¶ï¼Œå®ƒä¼šå‘ç° TTL å·²ç»è¿‡æœŸï¼Œäºæ˜¯å›é€ä¸€ä¸ªICMPæ—¶é—´è¶…æ—¶æŠ¥æ–‡ï¼Œè¿™ä¸ªæŠ¥æ–‡åŒ…å«è·¯ç”±å™¨çš„IPåœ°å€å’Œå…¶ä»–ä¿¡æ¯ã€‚æ¥ç€æºç‚¹ç»§ç»­å‘é€ï¼Œä½†ä¼šå°†TTLè®¾ç½®ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€ç»ˆç›®æ ‡ä¸»æœºä¼šå›é€ICMPå›æ˜¾åº”ç­”æŠ¥æ–‡ï¼Œè¡¨æ˜æŠ¥æ–‡å·²ç»åˆ°è¾¾ã€‚

### IGMPï¼ˆç½‘é™…ç»„ç®¡ç†åè®®ï¼‰

ICMPåœ¨IPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„åè®®å­—æ®µä¸º2

|      | ICMP                                       | IGMP                                                             |
| ---- | ------------------------------------------ | ---------------------------------------------------------------- |
| å…¨ç§° | Internet Control Message Protocol          | Internet Group Management Protocol                               |
| åŠŸèƒ½ | æ§åˆ¶æ¶ˆæ¯ã€é”™è¯¯æŠ¥å‘Šã€ç½‘ç»œè¯Šæ–­ã€ç»´æŠ¤è¿æ¥çŠ¶æ€ | ç®¡ç†å¤šæ’­ç»„æˆå‘˜ï¼Œç¡®ä¿åªæœ‰éœ€è¦æ¥å—å¤šæ’­æµé‡çš„ä¸»æœºæ‰èƒ½æ”¶åˆ°å¤šæ’­æ•°æ®åŒ… |
| åœºæ™¯ | pingæµ‹è¯•ã€ç½‘ç»œæ•…éšœæ’æŸ¥ã€è·¯ç”±é‡å®šå‘ | è®¾å¤‡åŠ å…¥æˆ–ç¦»å¼€å¤šæ’­ç»„ï¼Œæ§åˆ¶å¤šæ’­é€šä¿¡              |
| å¯¹è±¡ | ç‚¹å¯¹ç‚¹é€šä¿¡                            | å¤šæ’­é€šä¿¡   

### IPåœ°å€åˆ†ç±»

IP åœ°å€åˆ†ç±»ï¼š `IP åœ°å€ ::= {<ç½‘ç»œå·>,<ä¸»æœºå·>}`

IP åœ°å€ç±»åˆ« | ç½‘ç»œå· | ç½‘ç»œèŒƒå›´ | ä¸»æœºå· | IP åœ°å€èŒƒå›´
---|---|---|---|---
A ç±» | 8bitï¼Œç¬¬ä¸€ä½å›ºå®šä¸º 0    | 0 ~ 127 | 24bit | 1.0.0.0 ~ 127.255.255.255
B ç±» | 16bitï¼Œå‰ä¸¤ä½å›ºå®šä¸º 10  | 128.0 ~ 191.255 | 16bit | 128.0.0.0 ~ 191.255.255.255
C ç±» | 24bitï¼Œå‰ä¸‰ä½å›ºå®šä¸º 110 | 192.0.0 ~ 223.255.255 | 8bit | 192.0.0.0 ~ 223.255.255.255
D ç±» | å‰å››ä½å›ºå®šä¸º 1110ï¼Œåé¢ä¸ºå¤šæ’­åœ°å€
E ç±» | å‰äº”ä½å›ºå®šä¸º 11110ï¼Œåé¢ä¿ç•™ä¸ºä»Šåæ‰€ç”¨

| åœ°å€ç±»å‹ | åœ°å€èŒƒå›´ï¼ˆç¬¬ä¸€ä¸ªå­—èŠ‚ï¼‰ | å­ç½‘æ©ç  | å®¹çº³ä¸»æœºæ•° | ç”¨é€”                             |
| ------ | ---------------------- | -------- | ---------- | ---------------------------------- |
| Aç±»     | 1 ~ 126                | /8       | 2^24 ~ 2     | å¤§å‹ç½‘ç»œï¼Œäº’è”ç½‘è¿è¥å•† |
| Bç±»     | 128 ~ 191              | /16      | 2^16 ~ 2     | ä¸­å‹ç½‘ç»œï¼Œå¤§å­¦ã€æ”¿åºœæœºæ„ |
| Cç±»     | 192 ~ 223              | /24      | 2^8 ~ 2      | å°å‹ç½‘ç»œï¼Œå®¶åº­ |
| Dç±»     | 224 ~ 239              | N/A      | N/A        | ç»„æ’­åœ°å€      |
| Eç±»     | 240 ~ 255              | N/A      | N/A        | ä¿ç•™ï¼Œå®éªŒç”¨é€”              |


#### å›ç¯åœ°å€
`127.0.0.0/8`æ•´ä¸ªåœ°å€èŒƒå›´éƒ½è¢«ä¿ç•™ä½œä¸ºå›ç¯åœ°å€ï¼Œç”¨äºåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¿›è¡Œè‡ªæˆ‘æµ‹è¯•å’Œè¯Šæ–­ï¼Œæ ‡å‡†å›ç¯åœ°å€æ˜¯`127.0.0.1`

#### å­ç½‘æ©ç 
å­ç½‘æ©ç æ ‡å¿—äº†ä¸¤ä¸ªIPæ˜¯å¦åŒå±äºä¸€ä¸ªå­ç½‘ï¼ŒæŒ‡ç¤ºIPåœ°å€ä¸­çš„å“ªäº›ä½ä»£è¡¨ç½‘ç»œéƒ¨åˆ†ï¼Œå“ªäº›ä½ä»£è¡¨ä¸»æœºéƒ¨åˆ†ã€‚

ä¾‹é¢˜1ï¼šIPæ˜¯218.75.230.0ï¼Œå­ç½‘æ©ç æ˜¯255.255.255.192ï¼Œå³255.255.255.11000000

ç­”ï¼šå¯çŸ¥ä»ä¸»æœºå·ä¸­å€Ÿ2ä½ä½œä¸ºå­ç½‘å·ï¼Œåˆ’åˆ†çš„å­ç½‘æ•°ä¸º2^2=4ï¼ˆ00ã€01ã€10ã€11ï¼‰ï¼Œæ¯ä¸ªå­ç½‘å¯åˆ†é…çš„åœ°å€æ•°é‡ä¸º2^(8-2)-2=62ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š

| ç½‘ç»œå·  | å­ç½‘å· | ä¸»æœºå· | åˆ’åˆ†ç»†èŠ‚                          |
| ---------- | ------ | ------ | ------------------------------------- |
| 218.75.230 | 00     | 000000 | å­ç½‘0çš„ç½‘ç»œåœ°å€ï¼š218.75.230.0 |
| 218.75.230 | 00     | 000001 | å­ç½‘0å¯åˆ†é…çš„æœ€å°åœ°å€ï¼š218.75.230.1 |
| 218.75.230 | 00     | 111110 | å­ç½‘0å¯åˆ†é…çš„æœ€å¤§åœ°å€ï¼š218.75.230.62 |
| 218.75.230 | 00     | 111111 | å­ç½‘0çš„å¹¿æ’­åœ°å€ï¼š218.75.230.63 |
| 218.75.230 | 01     | 000000 | å­ç½‘1çš„ç½‘ç»œåœ°å€ï¼š218.75.230.64 |
| 218.75.230 | 01     | 000001 | å­ç½‘1å¯åˆ†é…çš„æœ€å°åœ°å€ï¼š218.75.230.65 |
| 218.75.230 | 01     | 111110 | å­ç½‘1å¯åˆ†é…çš„æœ€å¤§åœ°å€ï¼š218.75.230.126 |
| 218.75.230 | 01     | 111111 | å­ç½‘1çš„å¹¿æ’­åœ°å€ï¼š218.75.230.127 |
| ......     | 10     | ...... | ......ç•¥                             |

ä¾‹é¢˜2ï¼šIPæ˜¯192.168.1.10ï¼Œå­ç½‘æ©ç æ˜¯255.255.255.0 çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º

#### Aã€Bã€Cç±»ç§æœ‰åœ°å€

ç§æœ‰åœ°å€ä¸ä¼šåœ¨å…¨çƒä½¿ç”¨ï¼Œåªå…·æœ‰æœ¬åœ°æ„ä¹‰ã€‚

- Aç±»ï¼š10.0.0.0/8ï¼ŒèŒƒå›´æ˜¯ï¼š10.0.0.0~10.255.255.255
- Bç±»ï¼š172.16.0.0/12ï¼ŒèŒƒå›´æ˜¯ï¼š172.16.0.0~172.31.255.255
- Cç±»ï¼š192.168.0.0/16ï¼ŒèŒƒå›´æ˜¯ï¼š192.168.0.0~192.168.255.255

### è·¯ç”±è¡¨åŒ…å«ä»€ä¹ˆï¼Ÿ

1. ç½‘ç»œ IDï¼ˆNetwork ID, Network numberï¼‰ï¼šå°±æ˜¯ç›®æ ‡åœ°å€çš„ç½‘ç»œ IDã€‚
2. å­ç½‘æ©ç ï¼ˆsubnet maskï¼‰ï¼šç”¨æ¥åˆ¤æ–­ IP æ‰€å±ç½‘ç»œ
3. ä¸‹ä¸€è·³åœ°å€/æ¥å£ï¼ˆNext hop / interfaceï¼‰ï¼šå°±æ˜¯æ•°æ®åœ¨å‘é€åˆ°ç›®æ ‡åœ°å€çš„æ—…é€”ä¸­ä¸‹ä¸€ç«™çš„åœ°å€ã€‚å…¶ä¸­ interface æŒ‡å‘ next hopï¼ˆå³ä¸ºä¸‹ä¸€ä¸ª routeï¼‰ã€‚ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿï¼ˆAS, Autonomous systemï¼‰ä¸­çš„ route åº”è¯¥åŒ…å«åŒºåŸŸå†…æ‰€æœ‰çš„å­ç½‘ç»œï¼Œè€Œé»˜è®¤ç½‘å…³ï¼ˆNetwork id: `0.0.0.0`, Netmask: `0.0.0.0`ï¼‰æŒ‡å‘è‡ªæ²»ç³»ç»Ÿçš„å‡ºå£ã€‚

æ ¹æ®åº”ç”¨å’Œæ‰§è¡Œçš„ä¸åŒï¼Œè·¯ç”±è¡¨å¯èƒ½å«æœ‰å¦‚ä¸‹é™„åŠ ä¿¡æ¯ï¼š

1. èŠ±è´¹ï¼ˆCostï¼‰ï¼šå°±æ˜¯æ•°æ®å‘é€è¿‡ç¨‹ä¸­é€šè¿‡è·¯å¾„æ‰€éœ€è¦çš„èŠ±è´¹ã€‚
2. è·¯ç”±çš„æœåŠ¡è´¨é‡
3. è·¯ç”±ä¸­éœ€è¦è¿‡æ»¤çš„å‡º/å…¥è¿æ¥åˆ—è¡¨

### å¹¿æ’­åŸŸå’Œç¢°æ’åŸŸæœ‰ä»€ä¹ˆåŒºåˆ«

- å¹¿æ’­åŸŸæ˜¯ç½‘ç»œä¸­èƒ½æ¥æ”¶åˆ°åŒä¸€å¹¿æ’­æ¶ˆæ¯çš„æ‰€æœ‰è®¾å¤‡çš„é›†åˆ

- ç‰¹ç‚¹ï¼š

  - åœ¨åŒä¸€å¹¿æ’­åŸŸå†…ï¼Œä¸€ä¸ªè®¾å¤‡å‘é€çš„å¹¿æ’­åŒ…å¯ä»¥è¢«æ‰€æœ‰å…¶ä»–è®¾å¤‡æ¥æ”¶åˆ°

  - é€šå¸¸ç”±è·¯ç”±å™¨åˆ’åˆ†ï¼Œè·¯ç”±å™¨ä¸ä¼šè½¬å‘å¹¿æ’­åŒ…

  - å¹¿æ’­åŸŸç”¨äºç½‘ç»œä¸­çš„åœ°å€è§£æã€è®¾å¤‡å‘ç°ç­‰åŠŸèƒ½
  - å¹¿æ’­åŸŸå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚



- ç¢°æ’åŸŸæ˜¯ç½‘ç»œä¸­å¯èƒ½å‘ç”Ÿæ•°æ®åŒ…ç¢°æ’çš„åŒºåŸŸ

- ç‰¹ç‚¹ï¼š

  - åœ¨åŒä¸€ç¢°æ’åŸŸå†…ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªè®¾å¤‡å‘é€æ•°æ®

  - ç”±ç½‘æ¡¥ã€äº¤æ¢æœºæˆ–è·¯ç”±å™¨åˆ’åˆ†

  - ç¢°æ’åŸŸå½±å“ç½‘ç»œæ€§èƒ½ï¼Œç¢°æ’åŸŸè¶Šå°ï¼Œç½‘ç»œæ•ˆç‡è¶Šé«˜
  - ç¢°æ’åŸŸä¸»è¦æ¶‰åŠç‰©ç†å±‚ï¼ˆç¬¬1å±‚ï¼‰
 
### IPæŠ¥æ–‡é¦–éƒ¨æ ¼å¼
![](/resource/network/IP_header.png)

1. ç‰ˆæœ¬ï¼šIPv4è¿˜æ˜¯v6
2. é¦–éƒ¨é•¿åº¦ï¼šå 4ä½ï¼Œæ‰€ä»¥ç†è®ºæœ€å°ä¸º(0000)<sub>2</sub>ï¼Œæœ€å¤§ä¸º(1111)<sub>2</sub>
    - å› ä¸ºIPæ•°æ®æŠ¥é¦–éƒ¨ä¸­å›ºå®šéƒ¨åˆ†æ˜¯20Bï¼Œå•ä½æ˜¯4Bï¼Œ(5)<sub>10</sub>=(0101)<sub>2</sub>
    - (1111)<sub>2</sub>=(15)<sub>10</sub>ï¼Œå•ä½æ˜¯4Bï¼Œæœ€å¤§ä¸º60B
    - IPæ•°æ®æŠ¥åˆ†ä¸ºå›ºå®šéƒ¨åˆ†20å­—èŠ‚+æœ€å¤§40å­—èŠ‚çš„å¯å˜éƒ¨åˆ†
3. åŒºåˆ†æœåŠ¡ï¼šå 8ä½ï¼ŒæœŸæœ›è·å¾—å“ªç§ç±»å‹çš„æœåŠ¡ï¼Œæ¯”å¦‚ä¼˜å…ˆå‘é€ä¸€ä¸ªIPæ•°æ®æŠ¥
4. æ€»é•¿åº¦ï¼š16ä½ï¼Œè¡¨ç¤ºIPæŠ¥æ–‡çš„æ€»é•¿åº¦ï¼Œæœ€å¤§å€¼2<sup>16</sup>-1=65535
5. ç”Ÿå­˜æ—¶é—´TTLï¼šIPæ•°æ®æŠ¥çš„å¯¿å‘½ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨TTLå‡ä¸€ï¼Œç­‰äº0å°±ä¸¢å¼ƒ
6. åè®®ï¼šå 8ä½ï¼Œæ•°æ®éƒ¨åˆ†æ‰€ä½¿ç”¨çš„åè®®ï¼Œæ¯”å¦‚ICMPä¸º1ï¼ŒIGMPä¸º2ï¼ŒTCPä¸º6ï¼ŒUDPä¸º17
7. é¦–éƒ¨æ£€éªŒå’Œï¼šç”¨æ¥æ£€æŸ¥é¦–éƒ¨æ˜¯å¦å‡ºé”™çš„æœºåˆ¶
8. æ ‡è¯†ï¼šå 16ä½ï¼Œå…·æœ‰ç›¸åŒçš„æ ‡è¯†å­—æ®µå€¼çš„åˆ†ç‰‡æŠ¥æ–‡ä¼šè¢«é‡ç»„æˆåŸæ¥çš„æ•°æ®æŠ¥
9. æ ‡å¿—ï¼šå 3ä½ï¼Œç¬¬ä¸€ä½æœªä½¿ç”¨ï¼Œç¬¬äºŒä½ç§°ä¸ºDFï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸åˆ†ç‰‡ï¼Œå–å€¼ä¸º0 æ—¶å³å…è®¸åˆ†ç‰‡ï¼Œå–å€¼ä¸º1å³ä¸å…è®¸åˆ†ç‰‡ï¼›ç¬¬ä¸‰ä½ç§°ä¸ºMFï¼Œè®¾ç½®ä¸º0è¡¨ç¤ºæ²¡æœ‰æ›´å¤šåˆ†ç‰‡è¦å‘é€ï¼Œä¸º1è¡¨ç¤ºè¿˜æœ‰åˆ†ç‰‡è¦å‘é€
10. ç‰‡åç§»ï¼šè¾ƒé•¿çš„IPæ•°æ®æŠ¥åˆ†ç»„åï¼ŒæŸä¸€ç‰‡åœ¨åŸåˆ†ç»„ä¸­çš„å…·ä½“ä½ç½®ï¼Œå•ä½8B
11. æºIPï¼šå 4å­—èŠ‚
12. ç›®çš„IPï¼šå 4å­—èŠ‚

## ä¼ è¾“å±‚

ç«¯å£ï¼š

åº”ç”¨ç¨‹åº | FTP | TELNET | SMTP | DNS | TFTP | HTTP | HTTPS | SNMP  
--- | --- | --- |--- |--- |--- |--- |--- |---   
ç«¯å£å· | 21 | 23 | 25 | 53 | 69 | 80 | 443 | 161  

### TCPæŠ¥æ–‡é¦–éƒ¨æ ¼å¼

![](/resource/network/TCP_header.png)

1. æºç«¯å£ï¼šæ ‡è¯†è¯¥tcpæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹
2. ç›®çš„ç«¯å£ï¼šæ ‡è¯†æ¥æ”¶è¯¥tcpæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹
3. åºå·ï¼šå 32ä½ï¼ŒæŒ‡å‡ºæœ¬TCPæŠ¥æ–‡æ®µæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·
4. ç¡®è®¤å·ï¼šå³ACKï¼Œç¡®è®¤å·åªæœ‰å½“ACKæ ‡å¿—ä¸º1æ—¶æ‰æœ‰æ•ˆï¼Œä¸º0åˆ™æ— æ•ˆã€‚ç¡®è®¤å·æŒ‡æ˜ä¸‹ä¸€ä¸ªæœŸå¾…æ”¶åˆ°çš„å­—èŠ‚åºå·ï¼ŒåŒæ—¶åºå·ä¹‹å‰çš„æ•°æ®å·²ç»æ­£ç¡®æ”¶åˆ°
5. æ•°æ®åç§»ï¼šå 4ä½ï¼Œå•ä½ä¸º4å­—èŠ‚ï¼Œå®ƒæŒ‡å‡ºæŠ¥æ–‡è½½è·è·TCPæŠ¥å¤´èµ·å§‹å¤„æœ‰å¤šè¿œ
6. ä¿ç•™å­—æ®µï¼šæœªæ¥æœ‰ç”¨ï¼Œç›®å‰ç½®ç©º
7. æ ‡å¿—ä½
+ ç´§æ€¥æ ‡å¿—ä½URGï¼šç­‰äº1ç´§æ€¥æŒ‡é’ˆæ‰ç”Ÿæ•ˆï¼Œç”¨äºç«‹å³å°†TCPå‘é€ç¼“å­˜çš„å­—èŠ‚æµå‘é€å‡ºå»
+ ç¡®è®¤æ ‡å¿—ä½ACKï¼šç­‰äº1è¡¨ç¤ºç¡®è®¤å·æœ‰æ•ˆï¼Œç­‰äº0è¡¨ç¤ºç¡®è®¤å·æ— æ•ˆ
+ æ¨é€æ ‡å¿—ä½PSHï¼šæ¥æ”¶æ–¹æ”¶åˆ°PSHç­‰äº1çš„æŠ¥æ–‡æ®µåå°½å¿«ä¸Šäº¤åº”ç”¨è¿›ç¨‹ï¼Œä¸å¿…ç­‰åˆ°æ¥æ”¶ç¼“å­˜æ»¡åæ‰å†ä¸Šäº¤ä»˜
+ é‡ç½®æ ‡å¿—ä½RSTï¼šé‡ç½®ç”±äºä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› è€Œå‡ºç°é”™è¯¯çš„è¿æ¥
+ åŒæ­¥æ ‡å¿—ä½SYNï¼šåœ¨å»ºç«‹è¿æ¥æ—¶åŒæ­¥åºå·
+ ç»ˆæ­¢æ ‡å¿—ä½FINï¼šé‡Šæ”¾TCPè¿æ¥
8. çª—å£ï¼šä»¥æ¥æ”¶æ–¹çš„æ¥å—èƒ½åŠ›æ¥æ§åˆ¶å‘é€å‘çš„å‘é€èƒ½åŠ›ï¼Œæˆä¸ºæµé‡æ§åˆ¶ã€‚å‘é€çª—å£å¤§å°è¿˜å–å†³äºæ‹¥å¡çª—å£å¤§å°ï¼Œå³`min{æ¥æ”¶çª—å£ï¼Œæ‹¥å¡çª—å£}`
9. ç´§æ€¥æŒ‡é’ˆï¼šæŒ‡å‡ºæ•°æ®è½½è·éƒ¨åˆ†åŒ…å«äº†å¤šé•¿çš„ç´§æ€¥æ•°æ®

### TCPç²˜åŒ…

1. è¦å‘é€çš„æ•°æ®å¤§äºTCPå‘é€ç¼“å†²åŒºå¤§å°
2. å¾…å‘é€æ•°æ®å¤§äºTCPæœ€å¤§æŠ¥æ–‡é•¿åº¦ï¼ˆ2^16-1-20=65495ï¼‰ï¼ŒTCPåœ¨ä¼ è¾“å‰å°†è¿›è¡Œæ‹†åŒ…
3. å¾…å‘é€çš„æ•°æ®å°äºTCPå‘é€ç¼“å†²åŒºçš„å¤§å°ï¼Œå°†å¤šæ¬¡å†™å…¥ç¼“å†²åŒºçš„æ•°æ®ä¸€å¹¶å‘é€å‡ºå»
4. æ¥æ”¶ç«¯æ²¡æœ‰åŠæ—¶å¤„ç†æ¥æ”¶ç¼“å†²åŒº

é¦–å…ˆçº æ­£ä¸€ä¸ªè¯¯åŒºï¼Œé”™ä¸åœ¨tcpï¼Œè€Œæ˜¯ä¸çŸ¥é“ä¸€ä¸ªæ¶ˆæ¯çš„è¾¹ç•Œåœ¨å“ªï¼Œæ— æ³•æœ‰æ•ˆåˆ’åˆ†å‡ºç”¨æˆ·æ¶ˆæ¯ã€‚è§£å†³æ–¹æ¡ˆï¼š
- å›ºå®šé•¿åº¦çš„æ¶ˆæ¯
- ç”¨ç‰¹æ®Šå­—ç¬¦ä½œä¸ºè¾¹ç•Œï¼Œæ¯”å¦‚\r
- è‡ªå®šä¹‰åŒ…å¤´å’ŒåŒ…ä½“ï¼ŒåŒ…å¤´å¤§å°å›ºå®šï¼Œæ¯”å¦‚intå‹æ•°æ®ï¼Œç”¨æ¥è¡¨æ˜åŒ…ä½“å¤šå¤§ï¼Œæ¥æ”¶æ–¹æŒ‰æ­¤æ¥æ¥æ”¶

### TCPå¯é ä¼ è¾“

- ä¼ è¾“å±‚å±‚é¢
    - è¿æ¥ç®¡ç†ï¼šå³ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ã€‚èƒ½å»ºç«‹èµ·å¯é çš„è¿æ¥ï¼Œè¿™æ˜¯ä¿è¯ä¼ è¾“å¯é æ€§çš„å‰æ
    - åºåˆ—å·ï¼štcpåŸºäºå­—èŠ‚æµï¼Œå¯¹å­—èŠ‚è¿›è¡Œç¼–å·ï¼Œåºåˆ—å·èƒ½é˜²æ­¢åˆ†ç»„ä¸¢å¤±ã€åˆ†ç»„é‡å¤å’Œåˆ†ç»„å¤±åº
    - æµé‡æ§åˆ¶ï¼šå¦‚æœå‘é€æ–¹å‘é€é€Ÿåº¦è¿‡å¿«ï¼Œå°±ä¼šå¯¼è‡´æ¥æ”¶ç«¯çš„ç¼“å†²æº¢å‡ºï¼Œè¿›è€Œå¯¼è‡´ä¸¢åŒ…ã€‚æ‰€ä»¥TCPæŠ¥æ–‡æ®µé¦–éƒ¨ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œç”¨æ¥æ”¶æ–¹çš„æ¥å—èƒ½åŠ›æ¥æ§åˆ¶å‘é€å‘çš„å‘é€é€Ÿåº¦
    - æ‹¥å¡æ§åˆ¶ï¼šå‘é€ç«¯ç»´æŠ¤ä¸€ä¸ªæ‹¥å¡çª—å£ï¼Œå½“ç½‘ç»œæ‹¥å µä¸¥é‡æ—¶ï¼Œå‘é€ç«¯å‡å°‘æ•°æ®å‘é€ã€‚æ‰€ä»¥å‘é€ç«¯çš„å‘é€é€Ÿåº¦ï¼Œå—é™äºæ»‘åŠ¨çª—å£å’Œæ‹¥å¡çª—å£ä¸­çš„æœ€å°å€¼
        - æ…¢å¼€å§‹
        - æ‹¥å¡é¿å…
        - å¿«é‡ä¼ 
        - å¿«æ¢å¤
- ç½‘ç»œå±‚å±‚é¢
    - æ ¡éªŒå’Œï¼šä¸€èˆ¬æ˜¯CRCå¾ªç¯å†—ä½™æ ¡éªŒï¼Œåœ¨IPæŠ¥æ–‡é¦–éƒ¨çš„æ£€éªŒå’Œå­—æ®µä¸­
- æ•°æ®é“¾è·¯å±‚å±‚é¢
    - ARQï¼šè‡ªåŠ¨è¯·æ±‚é‡ä¼ åè®®ï¼Œé€šè¿‡ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶å®ç°çš„å¯é ä¼ è¾“åè®®ï¼Œç±»å‹æœ‰ï¼šåœæ­¢ç­‰å¾…SWã€å›é€€Nå¸§GBNã€é€‰æ‹©é‡ä¼ SR
- è¶…æ—¶é‡ä¼ æœºåˆ¶

### TCPæ‹¥å¡æ§åˆ¶

![](/resource/network/TCP_congestion_control.png)

1. æ…¢å¯åŠ¨
+ ç›®çš„ï¼šåˆå§‹æ—¶å‘é€å°‘é‡æ•°æ®ï¼Œç„¶åå‘ˆæŒ‡æ•°å¢é•¿ã€‚ç”¨æ¥å¿«é€Ÿæ¢æµ‹ç½‘ç»œçš„å¯ç”¨å¸¦å®½ã€‚
+ è¿‡ç¨‹
    - è¿æ¥å»ºç«‹æ—¶ï¼Œcwndï¼ˆæ‹¥å¡çª—å£ï¼‰è®¾ä¸º1ä¸ªMSSï¼ˆæœ€å¤§æŠ¥æ–‡æ®µå¤§å°ï¼‰
    - æ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwndå¢åŠ 1ä¸ªMSS
    - æ¯ç»è¿‡ä¸€ä¸ªRTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰ï¼Œcwndä¼šæ²¿2ã€4ã€8ã€16ç¿»å€å¢é•¿
2. æ‹¥å¡é¿å…
+ å½“cwndç­‰äºssthreshï¼ˆæ…¢å¼€å§‹é—¨é™ï¼‰æ—¶è§¦å‘æ‹¥å¡é¿å…ã€‚cwmdçº¿æ€§å¢é•¿ï¼Œæ¯ä¸ªRTTå¢åŠ 1ä¸ªMSS
3. å¿«é‡ä¼ 
+ ç›®çš„ï¼šå¿«é€Ÿæ£€æµ‹å’Œå“åº”ä¸¢åŒ…
+ è§¦å‘æ¡ä»¶ï¼šå½“æ”¶åˆ°3ä¸ªé‡å¤çš„ACKï¼Œä¸ç­‰å¾…è¶…æ—¶ï¼Œç«‹å³é‡ä¼ å¯èƒ½ä¸¢å¤±çš„æŠ¥æ–‡æ®µ
4. å¿«æ¢å¤
+ ç›®çš„ï¼šåœ¨æ£€æµ‹åˆ°ä¸¢åŒ…åå¿«é€Ÿæ¢å¤ä¼ è¾“é€Ÿç‡ã€‚
+ è§¦å‘æ¡ä»¶ï¼šåœ¨è¿›å…¥å¿«é‡ä¼ å
+ è¿‡ç¨‹ï¼šå°†ssthreshå’Œcwndè®¾ä¸ºçª—å£çš„ä¸€åŠï¼Œé‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µï¼Œå¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…

![](https://gitee.com/huihut/interview/raw/master/images/TCPæ‹¥å¡çª—å£cwndåœ¨æ‹¥å¡æ§åˆ¶æ—¶çš„å˜åŒ–æƒ…å†µ.png)
![](https://gitee.com/huihut/interview/raw/master/images/å¿«é‡ä¼ ç¤ºæ„å›¾.png)
![](https://gitee.com/huihut/interview/raw/master/images/TCPçš„æ‹¥å¡æ§åˆ¶æµç¨‹å›¾.png)

### TCPä¸‰æ¬¡æ¡æ‰‹

![](/resource/network/TCP_handshakes.png)

1. SYN=1ï¼Œseq=xï¼ˆéšæœºï¼‰ï¼Œä¸å¯æºå¸¦æ•°æ®
+ åŒæ­¥æ ‡å¿—ä½SYN=1ï¼Œè¡¨æ˜è¿™æ˜¯è¿æ¥è¯·æ±‚æŠ¥æ–‡æˆ–è€…è¿æ¥è¯·æ±‚ç¡®è®¤æŠ¥æ–‡
+ seqæ˜¯åºå·ï¼Œå 32ä½ï¼Œç”±å®¢æˆ·ç«¯éšå³ç”Ÿæˆ
+ ç¡®è®¤å·æ— æ•ˆï¼Œå®¢æˆ·ç«¯æœªæ”¶åˆ°æœåŠ¡ç«¯çš„æŠ¥æ–‡ï¼Œä¸çŸ¥é“æ¥ä¸‹æ¥æœŸå¾…ä»€ä¹ˆ
2. SYN=1ï¼ŒACK=1ï¼Œseq=yï¼ˆéšæœºï¼‰ï¼Œack=x+1ï¼Œä¸å¯æºå¸¦æ•°æ®
+ SYN=1ï¼Œè¡¨æ˜è¿™æ˜¯è¿æ¥è¯·æ±‚æŠ¥æ–‡æˆ–è€…è¿æ¥è¯·æ±‚ç¡®è®¤æŠ¥æ–‡
+ ACK=1.ç¡®è®¤å­—æ®µç”Ÿæ•ˆï¼Œackæ˜¯æœŸå¾…ä¸‹æ¬¡å¯¹æ–¹å‘é€æŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶å¯¹xå·å­—èŠ‚ç¡®è®¤
+ seqåºå·ç”±æœåŠ¡å™¨éšæœºç”Ÿæˆ
3. ACK=1ï¼Œseq=x+1ï¼Œack=y+1ï¼Œå¯ä»¥æºå¸¦æ•°æ®
+ ACK=1ï¼Œè¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯æœŸå¾…æ”¶åˆ°y+1å·æ•°æ®ï¼Œå¹¶å¯¹yå·æ•°æ®ç¡®è®¤
+ seqæ˜¯ç¬¬â‘ æ­¥åçš„é€’å¢

é—®é¢˜ï¼šä¸¤æ¬¡æ¡æ‰‹ä»£æ›¿ä¸‰æ¬¡æ¡æ‰‹å¯ä¸å¯ä»¥ï¼Ÿ

ç­”ï¼šä¸è¡Œï¼Œè‹¥é‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼Œä¹Ÿå°±æ˜¯ç¬¬â‘¢å·ï¼ˆå¯¹ç¡®è®¤çš„ç¡®è®¤æŠ¥æ–‡ï¼‰ä¸å‘é€ï¼Œå¦‚æœTCPè¿æ¥è¯·æ±‚â‘ å·å»¶è¿Ÿé€è¾¾ï¼Œé‚£ä¹ˆåæ¥çš„è¿æ¥è¯·æ±‚é‡Šæ”¾åï¼Œå®¢æˆ·ç«¯å·²å…³æœºï¼Œè€Œè¿æ¥è¯·æ±‚æ­¤æ—¶é€åˆ°ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç›´æ¥å»ºç«‹äº†é€šä¿¡ï¼ŒåŠ¿å¿…é€ æˆæœåŠ¡å™¨çš„èµ„æºæµªè´¹

### å¦‚ä½•å”¯ä¸€ç¡®å®šä¸€ä¸ª TCP è¿æ¥
TCP å››å…ƒç»„å¯ä»¥å”¯ä¸€çš„ç¡®å®šä¸€ä¸ªè¿æ¥ï¼Œå››å…ƒç»„åŒ…æ‹¬ï¼š

- æºåœ°å€
- æºç«¯å£
- ç›®çš„åœ°å€
- ç›®çš„ç«¯å£

### TCPæœ€å¤§è¿æ¥æ•°
å®¢æˆ·ç«¯ IP å’Œ ç«¯å£æ˜¯å¯å˜çš„ï¼Œç†è®ºä¸Šä¸º `IPæ•° * ç«¯å£æ•°`ï¼Œä½†æ˜¯å—ä»¥ä¸‹å› ç´ å½±å“ï¼š

-  ç¡¬ä»¶èµ„æºï¼šå†…å­˜å’ŒCPU
-  æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼šæ¯ä¸ªTCPè¿æ¥éƒ½ä¼šå ç”¨ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦
-  ç½‘ç»œå¸¦å®½ï¼š å¤§é‡çš„å¹¶å‘è¿æ¥ä¼šå ç”¨å¤§é‡ç½‘ç»œå¸¦å®½
-  åº”ç”¨ç¨‹åºè®¾è®¡ï¼š åº”ç”¨ç¨‹åºè‡ªèº«çš„æ¶æ„å’Œè®¾è®¡å¯èƒ½é™åˆ¶äº†èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§è¿æ¥æ•°

### TCPå››æ¬¡æŒ¥æ‰‹

![](/resource/network/TCP_waves.png)

### 2MSLç­‰å¾…æ—¶é•¿çš„ä½œç”¨
### ä¸ºä»€ä¹ˆéœ€è¦TIME_WAIT çŠ¶æ€
![](/resource/network/2MSL.png)

æœåŠ¡ç«¯å¾—ä¸åˆ°â‘£å·å›åº”æŠ¥æ–‡ï¼Œé‡ä¼ æ•°æ®æŠ¥â‘¢ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å·²å…³é—­ï¼Œå†ä¹Ÿæ— æ³•å‘é€â‘£å·ï¼Œäºæ˜¯æœåŠ¡ç«¯ä¸€ç›´å¾—ä¸åˆ°é‡Šæ”¾

### ä¸ºä»€ä¹ˆSYN/FINä¸åŒ…å«æ•°æ®å´è¦æ¶ˆè€—ä¸€ä¸ªåºåˆ—å·
SYN/FINéœ€è¦å¯¹ç«¯çš„ç¡®è®¤ï¼Œä¸€å®šæ¶ˆè€—tcpæŠ¥æ–‡çš„åºåˆ—å·

### SYN floodæ”»å‡»
å®¢æˆ·ç«¯ä¼ªé€ IPå‘é€SYNåŒ…ï¼ŒæœåŠ¡å™¨ä¼šå›é€ä¸€ä¸ªè¯·æ±‚ç¡®è®¤åŒ…ï¼ŒåŠ¿å¿…ä¼šé€ æˆå¤§é‡è¿æ¥å¤„äºSYN-REVDï¼ˆåŒæ­¥å·²æ¥å—ï¼‰çŠ¶æ€ï¼Œè€ŒåŠè¿æ¥é˜Ÿåˆ—å¤§å°æœ‰é™ï¼Œå¡«æ»¡åä¹Ÿå°±æ— æ³•å¤„ç†æ­£å¸¸è¯·æ±‚äº†

### å‡ºç°å¤§é‡time-waitçŠ¶æ€é—®é¢˜åˆ†æ
1. é«˜å¹¶å‘è¿æ¥ï¼šæ¯æ¬¡è¿æ¥å…³é—­åï¼Œè¿æ¥ä¼šç»è¿‡ TIME-WAIT çŠ¶æ€
2. åœ¨æŸäº›æ“ä½œç³»ç»Ÿä¸­ï¼Œé»˜è®¤çš„ TIME-WAIT å¯èƒ½æ¯”è¾ƒé•¿ï¼Œä¹Ÿå°±æ˜¯2å€çš„MSLï¼Œé€šå¸¸æ˜¯60æˆ–120ç§’
3. ç«¯å£è€—å°½ï¼šå¦‚æœæœåŠ¡å™¨çš„å¯ç”¨ç«¯å£èµ„æºè¢«è€—å°½ï¼Œæ–°è¿æ¥æ— æ³•å»ºç«‹ï¼Œæ—§è¿æ¥æ— æ³•åŠæ—¶é‡Šæ”¾ï¼Œä»è€Œå¯¼è‡´å¤§é‡çš„TIME-WAITçŠ¶æ€
4. ç½‘ç»œå»¶è¿Ÿæˆ–ä¸¢åŒ…ï¼šå¦‚æœç½‘ç»œå»¶è¿Ÿè¾ƒé«˜æˆ–ä¸¢åŒ…è¾ƒå¤šï¼Œå¯èƒ½å¯¼è‡´ç¡®è®¤å…³é—­çš„ACKåŒ…ä¸¢å¤±ï¼Œä¸»åŠ¨å…³é—­è¯·æ±‚åŒ…æ— æ³•å‘å‡ºï¼Œå¯¼è‡´TIME-WAITçŠ¶æ€æ—¶é—´å»¶é•¿

è§£å†³åŠæ³•ï¼š

1. å°†httpè¯·æ±‚å¤´ä¸­å‚æ•°connectionè®¾ä¸ºkeep-aliveï¼Œä»¥å‡å°‘TCPè¿æ¥å’Œå…³é—­æ¬¡æ•°ï¼Œå‡å°‘è¿›å…¥TIME-WAITçŠ¶æ€æ¬¡æ•°
2. é…ç½®TIME-WAITä»2MSLè‡³1MSL
3. å¢åŠ å¯ç”¨ç«¯å£èµ„æºï¼Œé¿å…ç«¯å£è€—å°½
4. ä½¿ç”¨è¿æ¥æ± æ¥ç®¡ç†è¿æ¥ï¼Œæˆ–åœ¨åº”ç”¨å±‚å®ç°è´Ÿè½½å‡è¡¡ï¼Œç›®çš„éƒ½æ˜¯å‡å°‘TCPè¿æ¥çš„åˆ›å»ºå’Œå…³é—­

### TCP æœ‰é™çŠ¶æ€æœº

![TCP çš„æœ‰é™çŠ¶æ€æœº](https://gitee.com/huihut/interview/raw/master/images/TCPçš„æœ‰é™çŠ¶æ€æœº.png)


### UDPæŠ¥æ–‡é¦–éƒ¨æ ¼å¼
![](/resource/network/UDP_header.png)

1. æºç«¯å£
é•¿åº¦ä¸º16ä½ï¼ŒæŒ‡æ˜å‘é€æ•°æ®çš„è¿›ç¨‹
2. ç›®çš„ç«¯å£
é•¿åº¦ä¸º16ä½ï¼ŒæŒ‡æ˜ç›®çš„ä¸»æœºæ¥æ”¶æ•°æ®çš„è¿›ç¨‹
3. é•¿åº¦å­—æ®µ
å¤§å°ä¸º16ä½ï¼ŒæŒ‡å‡ºUDPæŠ¥å¤´å’Œæ•°æ®è½½è·ä¸¤éƒ¨åˆ†çš„æ€»å¤§å°
4. æ£€éªŒå’Œ
å¤§å°ä¸º16ä½ï¼Œç”¨äºæ£€æµ‹UDPæŠ¥æ–‡åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿé”™è¯¯


### TCP ä¸ UDP çš„åŒºåˆ«

| åè®® | TCP | UDP |
| -- | -- | -- |
| è¿æ¥æ€§ | é¢å‘è¿æ¥ï¼ŒåŸºäºå­—èŠ‚æµ | æ— è¿æ¥ï¼ŒåŸºäºæ•°æ®æŠ¥ |
| æ”¯æŒ | ç‚¹åˆ°ç‚¹ | ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤š |
| å¯é æ€§ | ä½¿ç”¨é¡ºåºæ§åˆ¶ã€é”™è¯¯æ£€æµ‹ã€é‡ä¼ æœºåˆ¶ç¡®ä¿æ•°æ®å®Œæ•´æ€§ | æ•°æ®åŒ…å¯èƒ½ä¸¢å¤±ã€å¤±åºå’Œé‡å¤ |
| æµé‡æ§åˆ¶ | æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œé¿å…ç½‘ç»œè¿‡è½½ | æ—  |
| å¼€é”€ | å›ºå®š20å­—èŠ‚+40å­—èŠ‚çš„å¯å˜éƒ¨åˆ† | å›ºå®š8å­—èŠ‚ |
| åº”ç”¨åœºæ™¯ | httpã€æ–‡ä»¶ä¼ è¾“ftpã€é‚®ä»¶smtpç­‰ | è§†é¢‘ã€åœ¨çº¿æ¸¸æˆã€DNSæŸ¥è¯¢ç­‰ |

## åº”ç”¨å±‚

### DNS
DNSçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†äººç±»å¯è¯»çš„åŸŸåè½¬æ¢ä¸ºæœºå™¨å¯è¯»çš„IPåœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºDNSè§£æã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ google.com æ—¶ï¼ŒDNSä¼šå°†å…¶è½¬æ¢ä¸ºå¯¹åº”çš„IPåœ°å€

#### DNS åŸŸåè§£æçš„å·¥ä½œæµç¨‹
1. æµè§ˆå™¨é¦–å…ˆæ£€æŸ¥è‡ªå·±çš„DNSç¼“å­˜ï¼ŒæŸ¥è¯¢æ˜¯å¦å·²ç»å­˜å‚¨äº†è¯¥åŸŸåå¯¹åº”çš„IPåœ°å€
2. å¦‚æœæµè§ˆå™¨ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™ä¼šæŸ¥è¯¢æ“ä½œç³»ç»Ÿçš„DNSç¼“å­˜
3. å¦‚æœæ“ä½œç³»ç»Ÿç¼“å­˜ä¸­ä¹Ÿæ²¡æœ‰ï¼Œä¼šæ£€æŸ¥æœ¬åœ°çš„hostsæ–‡ä»¶ï¼Œçœ‹æ˜¯å¦æœ‰è¯¥åŸŸåçš„æ˜ å°„
4. å¦‚æœå‰é¢çš„æ­¥éª¤éƒ½æ²¡æœ‰æ‰¾åˆ°IPåœ°å€ï¼Œå®¢æˆ·ç«¯ä¼šå‘æœ¬åœ°DNSæœåŠ¡å™¨å‘é€é€’å½’æŸ¥è¯¢è¯·æ±‚
5. è¿­ä»£æŸ¥è¯¢ï¼š å¦‚æœæœ¬åœ°DNSæœåŠ¡å™¨çš„ç¼“å­˜ä¸­æ²¡æœ‰æ‰€éœ€ä¿¡æ¯ï¼Œå®ƒä¼šå¼€å§‹è¿›è¡Œè¿­ä»£æŸ¥è¯¢ï¼šé¦–å…ˆæŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨ï¼Œè·å–é¡¶çº§åŸŸåï¼ˆå¦‚.comï¼‰çš„DNSæœåŠ¡å™¨åœ°å€ï¼Œç„¶åæŸ¥è¯¢é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè·å–äºŒçº§åŸŸåï¼ˆå¦‚example.comï¼‰çš„DNSæœåŠ¡å™¨åœ°å€ï¼Œæœ€åæŸ¥è¯¢äºŒçº§åŸŸåæœåŠ¡å™¨ï¼Œè·å– www.example.com çš„IPåœ°å€
6. è¿”å›å¹¶ç¼“å­˜ç»“æœï¼šè¿”å›ç»“æœï¼Œå®¢æˆ·ç«¯å’Œæœ¬åœ°DNSæœåŠ¡å™¨éƒ½ä¼šç¼“å­˜ï¼Œä»¥ä¾¿å°†æ¥å¿«é€Ÿè®¿é—®
7. æœ€åï¼Œå®¢æˆ·ç«¯ç”¨IPåœ°å€ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹è¿æ¥

#### DNSçš„ç«¯å£å·
53

#### DNSåŠ«æŒ
æ”»å‡»è€…åœ¨ç”¨æˆ·æŸ¥è¯¢DNSæœåŠ¡å™¨æ—¶ç¯¡æ”¹å“åº”ï¼Œå°†ç”¨æˆ·è¯·æ±‚çš„åŸŸåæ˜ å°„åˆ°æ”»å‡»è€…æ§åˆ¶çš„è™šå‡IPåœ°å€ä¸Š

#### DNSçš„åº•å±‚ä½¿ç”¨TCPè¿˜æ˜¯UDPï¼Ÿ
UDP

- é€Ÿåº¦ï¼šUDP æ˜¯æ— è¿æ¥åè®®ï¼Œç›¸æ¯” TCPï¼Œå®ƒæ— éœ€å»ºç«‹è¿æ¥ï¼Œå¯ä»¥æ›´å¿«åœ°å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚è¿™å¯¹äº DNS æŸ¥è¯¢æ¥è¯´å¾ˆé‡è¦ï¼Œå› ä¸ºç”¨æˆ·å¸Œæœ›å¿«é€Ÿè·å¾—ç»“æœ
- ç®€å•æ€§ï¼šUDPæŠ¥æ–‡ç»“æ„æ¯” TCP æ›´ç®€å•ï¼Œå®ç°èµ·æ¥æ›´æ–¹ä¾¿
- å¯é æ€§ï¼šè™½ç„¶ UDP åè®®æœ¬èº«ä¸ä¿è¯å¯é çš„æ•°æ®ä¼ è¾“ï¼Œä½† DNS åè®®æœ¬èº«åŒ…å«äº†ä¸€äº›æœºåˆ¶æ¥ä¿è¯æŸ¥è¯¢ç»“æœçš„å¯é æ€§ï¼Œä¾‹å¦‚é‡è¯•æœºåˆ¶

å½“ç„¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¾‹å¦‚éœ€è¦ä¼ è¾“å¤§é‡æ•°æ®æˆ–éœ€è¦æ›´å¯é çš„è¿æ¥æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ TCP åè®®è¿›è¡Œ DNS æŸ¥è¯¢

### FTP

* FTPï¼ˆFile Transfer Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯ç”¨äºåœ¨ç½‘ç»œä¸Šè¿›è¡Œæ–‡ä»¶ä¼ è¾“çš„ä¸€å¥—æ ‡å‡†åè®®ï¼Œä½¿ç”¨å®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼ï¼Œä½¿ç”¨ TCP æ•°æ®æŠ¥ï¼Œæä¾›äº¤äº’å¼è®¿é—®ï¼ŒåŒå‘ä¼ è¾“ã€‚
* TFTPï¼ˆTrivial File Transfer Protocolï¼Œç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ä¸€ä¸ªå°ä¸”æ˜“å®ç°çš„æ–‡ä»¶ä¼ è¾“åè®®ï¼Œä¹Ÿä½¿ç”¨å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼Œä½¿ç”¨UDPæ•°æ®æŠ¥ï¼Œåªæ”¯æŒæ–‡ä»¶ä¼ è¾“è€Œä¸æ”¯æŒäº¤äº’ï¼Œæ²¡æœ‰åˆ—ç›®å½•ï¼Œä¸èƒ½å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½é‰´å®š

### DHCP

åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œä½¿ç”¨UDPåè®®å·¥ä½œï¼ŒDHCPå®¢æˆ·ç«¯ç›‘å¬68ç«¯å£å·ï¼ŒæœåŠ¡ç«¯ç›‘å¬67ç«¯å£å·ã€‚DHCPé€šå¸¸è¢«ç”¨äºå±€åŸŸç½‘ç¯å¢ƒçš„åˆ†é…IPåœ°å€ï¼Œä½¿å®¢æˆ·ç«¯åŠ¨æ€åœ°è·å¾—IPåœ°å€ã€DNSç­‰ä¿¡æ¯

### TELNET

* TELNET åè®®æ˜¯ TCP/IP åè®®æ—ä¸­çš„ä¸€å‘˜ï¼Œæ˜¯ Internet è¿œç¨‹ç™»é™†æœåŠ¡çš„æ ‡å‡†åè®®å’Œä¸»è¦æ–¹å¼ã€‚å®ƒä¸ºç”¨æˆ·æä¾›äº†åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®Œæˆè¿œç¨‹ä¸»æœºå·¥ä½œçš„èƒ½åŠ›ã€‚

* HTTPï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ç”¨äºä» WWWï¼ˆWorld Wide Webï¼Œä¸‡ç»´ç½‘ï¼‰æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚

* SMTPï¼ˆSimple Mail Transfer Protocolï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ç»„ç”¨äºç”±æºåœ°å€åˆ°ç›®çš„åœ°å€ä¼ é€é‚®ä»¶çš„è§„åˆ™ï¼Œç”±å®ƒæ¥æ§åˆ¶ä¿¡ä»¶çš„ä¸­è½¬æ–¹å¼ã€‚SMTP åè®®å±äº TCP/IP åè®®ç°‡ï¼Œå®ƒå¸®åŠ©æ¯å°è®¡ç®—æœºåœ¨å‘é€æˆ–ä¸­è½¬ä¿¡ä»¶æ—¶æ‰¾åˆ°ä¸‹ä¸€ä¸ªç›®çš„åœ°ã€‚
* Socket å»ºç«‹ç½‘ç»œé€šä¿¡è¿æ¥è‡³å°‘è¦ä¸€å¯¹ç«¯å£å·ï¼ˆSocketï¼‰ã€‚Socket æœ¬è´¨æ˜¯ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ï¼Œå¯¹ TCP/IP çš„å°è£…ï¼ŒTCP/IP ä¹Ÿè¦æä¾›å¯ä¾›ç¨‹åºå‘˜åšç½‘ç»œå¼€å‘æ‰€ç”¨çš„æ¥å£ï¼Œè¿™å°±æ˜¯ Socket ç¼–ç¨‹æ¥å£ã€‚

### URLå’ŒURIçš„åŒºåˆ«
URIï¼ˆUniform Resource Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºåç§°çš„å­—ç¬¦ä¸²ã€‚å®ƒä¸»è¦ç”¨äºæ ‡è¯†èµ„æºï¼Œå‘Šè¯‰ä½ è¿™ä¸ªèµ„æºçš„å”¯ä¸€æ ‡è¯†ç¬¦æ˜¯ä»€ä¹ˆã€‚

URLï¼ˆUniform Resource Locatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰æ˜¯URIçš„ä¸€ä¸ªå­é›†ï¼Œå®ƒä¸ä»…æ ‡è¯†äº†èµ„æºï¼Œè¿˜æä¾›äº†å®šä½è¯¥èµ„æºçš„æ–¹æ³•ã€‚

åœ¨Webå¼€å‘ä¸­ï¼Œé€šå¸¸ä½¿ç”¨çš„æ˜¯URLï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä»…éœ€è¦æ ‡è¯†èµ„æºï¼Œè¿˜éœ€è¦çŸ¥é“å¦‚ä½•è·å–å®ƒã€‚

### HTTP

è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ç§ç”¨äºåˆ†å¸ƒå¼ã€åä½œå¼å’Œè¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿçš„åº”ç”¨å±‚åè®®ï¼Œæ‰¿è½½äºtcpåè®®ä¹‹ä¸Šï¼Œhttpç”±è¯·æ±‚å’Œå“åº”æ„æˆï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„å®¢æˆ·ç«¯æœåŠ¡å™¨æ¨¡å‹ï¼ˆB/Sï¼‰

#### HTTPæŠ¥æ–‡æœ‰å“ªäº›éƒ¨åˆ†
1. èµ·å§‹è¡Œ
    - å¯¹äºè¯·æ±‚æŠ¥æ–‡ï¼Œè¿™ä¸€è¡Œç§°ä¸ºè¯·æ±‚è¡Œï¼ŒåŒ…å«HTTPæ–¹æ³•ã€è¯·æ±‚URLå’ŒHTTPç‰ˆæœ¬ã€‚
    - å¯¹äºå“åº”æŠ¥æ–‡ï¼Œè¿™ä¸€è¡Œç§°ä¸ºçŠ¶æ€è¡Œï¼ŒåŒ…å«HTTPç‰ˆæœ¬ã€çŠ¶æ€ç å’ŒåŸå› çŸ­è¯­ã€‚
2. é¦–éƒ¨å­—æ®µ
    - åŒ…å«å¤šä¸ªé”®å€¼å¯¹ï¼Œç”¨äºä¼ é€’å…³äºè¯·æ±‚æˆ–å“åº”çš„é™„åŠ ä¿¡æ¯ã€‚
    - å¸¸è§çš„é¦–éƒ¨å­—æ®µåŒ…æ‹¬Content-Typeï¼Œ Content-Lengthï¼Œ Hostï¼Œ User-Agentç­‰ã€‚
3. ç©ºè¡Œ
    - ç”¨äºåˆ†éš”é¦–éƒ¨å­—æ®µå’Œæ¶ˆæ¯ä¸»ä½“ã€‚
4. æ¶ˆæ¯ä¸»ä½“
    - å¯é€‰éƒ¨åˆ†ï¼ŒåŒ…å«å®é™…ä¼ è¾“çš„æ•°æ®ã€‚
    - è‹¥æ–¹æ³•æ˜¯ GETï¼Œåˆ™ä¸ºç©ºï¼ˆæ•°æ®éƒ½åœ¨urlé‡Œé¢ï¼‰
    - åœ¨POSTè¯·æ±‚ä¸­æ˜¯è¦æäº¤çš„æ•°æ®ï¼Œæ¯”å¦‚JSONæ•°æ®æˆ–HTMLå†…å®¹ç­‰ã€‚

#### httpå¸¸è§è¯·æ±‚ç±»å‹

1. GET
    - ç”¨é€”ï¼šåªä»æœåŠ¡å™¨è·å–æŒ‡å®šçš„èµ„æºï¼Œä¸åº”è¯¥å¯¹æœåŠ¡å™¨äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚
    - ç¤ºä¾‹ï¼šè®¿é—®ç½‘é¡µã€è·å–APIæ•°æ®ã€‚
2. POST
    - ç”¨é€”ï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œè¯·æ±‚æœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚è¿™å¯èƒ½ä¼šæ”¹å˜æœåŠ¡å™¨ä¸Šçš„èµ„æºçŠ¶æ€ã€‚
    - ç¤ºä¾‹ï¼šæäº¤è¡¨å•ã€ä¸Šä¼ æ–‡ä»¶ã€‚
3. PUT
    - ç”¨é€”ï¼šä¸Šä¼ æŒ‡å®šçš„èµ„æºï¼Œå¦‚æœèµ„æºå­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºã€‚
    - ç‰¹ç‚¹ï¼šæ˜¯å¹‚ç­‰çš„ï¼Œå¤šæ¬¡æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œç»“æœåº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚
    - ç¤ºä¾‹ï¼šæ›´æ–°ç”¨æˆ·ä¿¡æ¯ã€‚
4. DELETE
    - ç”¨é€”ï¼šåˆ é™¤æŒ‡å®šçš„èµ„æºã€‚
    - ç‰¹ç‚¹ï¼šä¹Ÿæ˜¯å¹‚ç­‰çš„ã€‚
    - ç¤ºä¾‹ï¼šåˆ é™¤æŸç¯‡åšå®¢æ–‡ç« ã€‚
5. HEAD
    - ç”¨é€”ï¼šç±»ä¼¼äºGETè¯·æ±‚ï¼Œä½†æœåŠ¡å™¨ä¸è¿”å›æ¶ˆæ¯ä½“ï¼Œåªè¿”å›HTTPå¤´ã€‚
    - ç‰¹ç‚¹ï¼šç”¨äºè·å–èµ„æºçš„å…ƒä¿¡æ¯ï¼Œè€Œä¸éœ€è¦ä¼ è¾“å…¨éƒ¨å†…å®¹ã€‚
    - ç¤ºä¾‹ï¼šæ£€æŸ¥è¶…é“¾æ¥çš„æœ‰æ•ˆæ€§ã€è·å–èµ„æºæ›´æ–°æ—¶é—´ã€‚
6. OPTIONS
    - ç”¨é€”ï¼šè·å–ç›®æ ‡èµ„æºæ”¯æŒçš„é€šä¿¡é€‰é¡¹ä¿¡æ¯ã€‚
    - ç‰¹ç‚¹ï¼šå¸¸ç”¨äºCORSï¼ˆè·¨æºèµ„æºå…±äº«ï¼‰ä¸­çš„é¢„æ£€è¯·æ±‚ã€‚
    - ç¤ºä¾‹ï¼šæ£€æŸ¥æœåŠ¡å™¨æ”¯æŒå“ªäº›HTTPæ–¹æ³•ã€‚
7. PATCH
    - ç”¨é€”ï¼šå¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹ã€‚
    - ç‰¹ç‚¹ï¼šä¸PUTä¸åŒï¼ŒPATCHç”¨äºå¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚
    - ç¤ºä¾‹ï¼šæ›´æ–°ç”¨æˆ·çš„æŸä¸ªå…·ä½“å­—æ®µï¼Œå¦‚é‚®ç®±åœ°å€ã€‚
8. TRACE
    - ç”¨é€”ï¼šå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚
    - ç‰¹ç‚¹ï¼šå¯ä»¥æŸ¥çœ‹è¯·æ±‚ç»è¿‡çš„ä¸­é—´æœåŠ¡å™¨ã€‚
    - ç¤ºä¾‹ï¼šè¿½è¸ªè¯·æ±‚-å“åº”çš„ä¼ è¾“è·¯å¾„ã€‚
9. CONNECT
    - ç”¨é€”ï¼šå»ºç«‹ä¸€ä¸ªåˆ°ç”±ç›®æ ‡èµ„æºæ ‡è¯†çš„æœåŠ¡å™¨çš„éš§é“ã€‚
    - ç‰¹ç‚¹ï¼šé€šå¸¸ç”¨äºSSLåŠ å¯†é€šä¿¡ï¼ˆHTTPSï¼‰ã€‚
    - ç¤ºä¾‹ï¼šä¸ä»£ç†æœåŠ¡å™¨å»ºç«‹SSLè¿æ¥ã€‚

è¡¥å……è¯´æ˜ï¼š

1. å¹‚ç­‰æ€§ï¼šGETã€HEADã€PUTã€DELETEæ–¹æ³•æ˜¯å¹‚ç­‰çš„ï¼Œè¿™æ„å‘³ç€å¤šæ¬¡é‡å¤æ‰§è¡Œä¸ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚
2. å®‰å…¨æ€§ï¼šGETã€HEADã€OPTIONSæ–¹æ³•è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬ä¸åº”è¯¥å¯¹æœåŠ¡å™¨çŠ¶æ€äº§ç”Ÿå½±å“ã€‚
3. ç¼“å­˜ï¼šGETã€HEADã€POSTã€PATCHè¿™äº›æ–¹æ³•çš„å“åº”é€šå¸¸æ˜¯å¯ç¼“å­˜çš„ï¼Œè€ŒPUTå’ŒDELETEé€šå¸¸ä¸å¯ç¼“å­˜ã€‚

#### httpå¸¸è§çŠ¶æ€ç 

* 1xxä¿¡æ¯æ€§çŠ¶æ€ç ï¼šè¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†
    * 100 Continueï¼šç»§ç»­ï¼Œå®¢æˆ·ç«¯åº”ç»§ç»­å…¶è¯·æ±‚
    * 101 Switching Protocols åˆ‡æ¢åè®®ã€‚æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢åè®®ã€‚åªèƒ½åˆ‡æ¢åˆ°æ›´é«˜çº§çš„åè®®ï¼Œä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ° HTTP çš„æ–°ç‰ˆæœ¬åè®®
* 2xxæˆåŠŸçŠ¶æ€ç ï¼šè¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—
    * 200 OK: è¯·æ±‚æˆåŠŸ
    * 201 Created: è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æºã€‚ä¾‹å¦‚å½“æˆåŠŸæäº¤äº†ä¸€ä¸ªè¡¨å•ï¼Œåˆ›å»ºäº†æ–°çš„ç”¨æˆ·è´¦å·æ—¶å¯èƒ½ä¼šçœ‹åˆ°è¿™ä¸ªçŠ¶æ€ç 
    * 204 No Content: æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†ä¸éœ€è¦è¿”å›ä»»ä½•å®ä½“å†…å®¹
* 3xxé‡å®šå‘çŠ¶æ€ç ï¼šéœ€è¦åç»­æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚
    * 301 Moved Permanently: è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ä¾‹å¦‚å½“ä¸€ä¸ªç½‘ç«™URLç»“æ„æ”¹å˜ï¼Œæ—§çš„URLä¼šè¿”å›301ï¼Œå¹¶æŒ‡å‘æ–°çš„URL
    * 302 Found: è¯·æ±‚çš„èµ„æºä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ä¾‹å¦‚ï¼šåœ¨ç”¨æˆ·ç™»å½•åï¼Œç½‘ç«™å¯èƒ½ä¼šä½¿ç”¨302é‡å®šå‘åˆ°ç”¨æˆ·çš„ä¸ªäººä¸»é¡µ
* 4xxå®¢æˆ·ç«¯é”™è¯¯ï¼šè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚
    * 400 Bad Request: å®¢æˆ·ç«¯è¯·æ±‚çš„è¯­æ³•é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•è§£æã€‚ä¾‹å¦‚ï¼šå½“ä½ æäº¤äº†ä¸€ä¸ªæ ¼å¼ä¸æ­£ç¡®çš„è¡¨å•
    * 401 Unauthorized: è¦æ±‚ç”¨æˆ·æä¾›èº«ä»½è®¤è¯ã€‚ä¾‹å¦‚ï¼šå½“è¯•å›¾è®¿é—®éœ€è¦ç™»å½•çš„é¡µé¢ï¼Œé‚£ä¹ˆæ¸¸å®¢ç”¨æˆ·ä¼šçœ‹åˆ°è¿™ä¸ªçŠ¶æ€ç 
    * 403 Forbidden: æœåŠ¡å™¨ç†è§£è¯·æ±‚ä½†æ‹’ç»æ‰§è¡Œã€‚ä¾‹å¦‚ï¼šå½“å°è¯•è®¿é—®ä¸€ä¸ªæ— æƒé™æŸ¥çœ‹çš„æ–‡ä»¶æ—¶
    * 404 Not Found: è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°ã€‚è¿™å¯èƒ½æ˜¯æœ€å¹¿ä¸ºäººçŸ¥çš„é”™è¯¯çŠ¶æ€ç äº†ï¼Œè¡¨ç¤ºè®¿é—®çš„é¡µé¢ä¸å­˜åœ¨
    * 408 Request Timeout: æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ—¶é—´è¿‡é•¿ï¼Œè¶…æ—¶
* 5xxæœåŠ¡å™¨é”™è¯¯ï¼šæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯
    * 500 Internal Server Error: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚
    * 503 Service Unavailable: ç”±äºè¶…è½½æˆ–ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡å™¨æš‚æ—¶çš„æ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å»¶æ—¶çš„é•¿åº¦å¯åŒ…å«åœ¨æœåŠ¡å™¨çš„ Retry-After å¤´ä¿¡æ¯ä¸­
    * 504 Gateway Timeout: å……å½“ç½‘å…³æˆ–ä»£ç†çš„æœåŠ¡å™¨ï¼ŒæœªåŠæ—¶ä»è¿œç«¯æœåŠ¡å™¨è·å–è¯·æ±‚

#### HTTPçš„é•¿è¿æ¥æ˜¯ä»€ä¹ˆ
HTTPé•¿è¿æ¥ï¼Œä¹Ÿç§°ä¸ºæŒä¹…è¿æ¥ï¼Œæ˜¯æŒ‡åœ¨ä¸€æ¬¡TCPè¿æ¥ä¸Šå¯ä»¥å‘é€å’Œæ¥æ”¶å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¯·æ±‚å’Œå“åº”åéƒ½å…³é—­è¿æ¥ã€‚

åœ¨HTTP/1.0ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªè¯·æ±‚/å“åº”å¯¹ä¹‹åéƒ½ä¼šå…³é—­TCPè¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯éœ€è¦å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå®ƒå¿…é¡»ä¸ºæ¯ä¸ªè¯·æ±‚å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚æ‰€ä»¥é¢‘ç¹å»ºç«‹/å…³é—­è¿æ¥ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´å’Œèµ„æºï¼Œå› ä¸ºTCPè¿ç»“éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ã€‚

HTTP/1.1å¼•å…¥äº†é•¿è¿æ¥çš„æ¦‚å¿µï¼Œé€šè¿‡å°†Connectionå¤´éƒ¨è®¾ç½®ä¸ºkeep-aliveæ¥å®ç°ã€‚å½“ä½¿ç”¨é•¿è¿æ¥æ—¶ï¼ŒTCPåœ¨å‘é€å®Œå“åº”åä¸ä¼šç«‹å³å…³é—­ï¼Œè€Œæ˜¯ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚å®¢æˆ·ç«¯å¯ä»¥åœ¨åŒä¸€ä¸ªè¿æ¥ä¸Šå‘é€å¤šä¸ªè¯·æ±‚ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚é‡æ–°å»ºç«‹è¿æ¥ã€‚è¿™å‡å°‘äº†å»ºç«‹è¿æ¥çš„å»¶è¿Ÿå¼€é”€ï¼Œä¹Ÿå‡å°‘äº†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„èµ„æºæ¶ˆè€—ï¼Œæé«˜æ€§èƒ½

#### HTTPé»˜è®¤çš„ç«¯å£æ˜¯ä»€ä¹ˆ
HTTPé»˜è®¤çš„ç«¯å£å·æ˜¯80ï¼ŒHTTPSé»˜è®¤portæ˜¯443

å½“ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ä¸€ä¸ªç½‘å€æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç«¯å£å·ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä½¿ç”¨80ç«¯å£æ¥å°è¯•å»ºç«‹è¿æ¥ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è®¿é—® `http://www.example.com` æ—¶ï¼Œå®é™…ä¸Šæ˜¯è®¿é—®`http://www.example.com:80`ï¼Œä½†ç«¯å£å·80é€šå¸¸è¢«çœç•¥ï¼Œå› ä¸ºå®ƒæ˜¯é»˜è®¤çš„

#### æœåŠ¡ç«¯æ­£å¸¸å¯åŠ¨ï¼Œåˆ†æå®¢æˆ·ç«¯è¯·æ±‚ä¸åˆ°çš„åŸå› 
- å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ¥å£æ²¡æœ‰å“åº”ï¼š
    - æ£€æŸ¥æ¥å£IPåœ°å€æ˜¯å¦æ­£ç¡®ï¼Œpingä¸€ä¸‹æ¥å£åœ°å€ã€‚
    - æ£€æŸ¥è¢«æµ‹æ¥å£ç«¯å£å·æ˜¯å¦æ­£ç¡®ï¼Œå¯ä»¥åœ¨æœ¬æœºTelnetæ¥å£çš„IPå’Œç«¯å£å·ï¼Œæ£€æŸ¥ç«¯å£å·èƒ½å¦è¿é€š
    - æ£€æŸ¥æœåŠ¡å™¨çš„é˜²ç«å¢™æ˜¯å¦å…³é—­ï¼Œå¦‚æœæ˜¯ä»¥ä¸ºå®‰å…¨æˆ–è€…æƒé™é—®é¢˜ä¸èƒ½å…³é—­ï¼Œéœ€è¦æ‰¾è¿ç»´è¿›è¡Œç­–ç•¥é…ç½®ï¼Œå¼€æ”¾å¯¹åº”çš„IPå’Œç«¯å£ã€‚
    - æ£€æŸ¥ä½ çš„å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ã€æµ‹è¯•å·¥å…· (opens new window)ï¼‰ï¼Œæ˜¯å¦è®¾ç½®äº†ç½‘ç»œä»£ç†ï¼Œç½‘ç»œä»£ç†å¯ä»¥é€ æˆè¯·æ±‚å¤±è´¥ã€‚
- å¦‚æœå®¢æˆ·ç«¯çš„è¯·æ±‚æœ‰å“åº”ï¼Œå¹¶è¿”å›äº†é”™è¯¯çŠ¶æ€ç 

400ï¼šå®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ï¼Œæ¯”å¦‚è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯  
401ï¼šæœªæˆæƒï¼Œæ¯”å¦‚è¯·æ±‚headeré‡Œï¼Œç¼ºä¹å¿…è¦çš„ä¿¡æ¯å¤´
403ï¼šç¦æ­¢ï¼Œå¸¸è§åŸå› æ˜¯å› ä¸ºç”¨æˆ·çš„è´¦å·æ²¡æœ‰å¯¹åº”çš„URLæƒé™
404ï¼šèµ„æºæœªæ‰¾åˆ°
500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯
502/503/504ï¼šé”™è¯¯çš„ç½‘å…³ã€æœåŠ¡å™¨æ— æ³•è·å¾—ã€ç½‘å…³è¶…æ—¶

#### æœåŠ¡å™¨pingä¸é€šä½†httpèƒ½è¯·æ±‚æˆåŠŸï¼Œé—®é¢˜åˆ†æ
ping èµ°çš„æ˜¯ icmp åè®®ï¼Œhttp èµ°çš„æ˜¯ tcp åè®®ã€‚å¯èƒ½æœåŠ¡å™¨çš„é˜²ç«å¢™ç¦æ­¢ icmp åè®®ï¼Œä½†æ˜¯ tcp åè®®æ²¡æœ‰ç¦æ­¢

#### HTTPä¸ºä»€ä¹ˆä¸å®‰å…¨
1. æ•°æ®æ˜æ–‡ä¼ è¾“ï¼šHTTPåè®®ä¼ è¾“çš„æ•°æ®æœªç»åŠ å¯†ï¼Œè¿™æ„å‘³ç€æ•°æ®åœ¨ç½‘ç»œä¸­ä»¥æ˜æ–‡å½¢å¼ä¼ è¾“ã€‚å¦‚æœæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«æˆªè·ï¼Œæ”»å‡»è€…å¯ä»¥è½»æ˜“åœ°çªƒå–è¿™äº›æ•°æ®
2. æ˜“å—ä¸­é—´äººæ”»å‡»ï¼šç”±äºæ•°æ®æœªåŠ å¯†ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­æ’å…¥è‡ªå·±ä½œä¸ºä¸­é—´äººï¼Œæˆªå–ã€ç¯¡æ”¹æˆ–æ›¿æ¢ä¼ è¾“çš„æ•°æ®ã€‚è¿™ç§æ”»å‡»å¯ä»¥ç”¨äºçªƒå–ä¿¡æ¯ã€é‡å®šå‘ç”¨æˆ·åˆ°æ¶æ„ç½‘ç«™æˆ–ä¿®æ”¹ç½‘é¡µå†…å®¹ã€‚
3. æ— æ³•éªŒè¯é€šä¿¡åŒæ–¹çš„èº«ä»½ï¼šHTTPåè®®ä¸æä¾›ä»»ä½•æœºåˆ¶æ¥éªŒè¯æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯çš„èº«ä»½ã€‚è¿™æ„å‘³ç€ç”¨æˆ·æ— æ³•ç¡®å®šä»–ä»¬æ­£åœ¨ä¸çœŸæ­£çš„æœåŠ¡å™¨é€šä¿¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¼ªè£…æˆåˆæ³•æœåŠ¡å™¨çš„æ”»å‡»è€…ã€‚
4. æ— æ³•ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼šHTTPåè®®ä¸æä¾›æ•°æ®å®Œæ•´æ€§éªŒè¯æœºåˆ¶ã€‚è¿™æ„å‘³ç€åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ•°æ®å¯èƒ½è¢«ç¯¡æ”¹ï¼Œè€Œæ¥æ”¶æ–¹æ— æ³•æ£€æµ‹åˆ°è¿™ç§ç¯¡æ”¹ã€‚

#### HTTPå’ŒHTTPSçš„åŒºåˆ«
+ HTTP æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œå­˜åœ¨å®‰å…¨é£é™©çš„é—®é¢˜ã€‚HTTPS åˆ™è§£å†³ HTTP ä¸å®‰å…¨çš„ç¼ºé™·ï¼Œåœ¨ TCP å’Œ HTTP ç½‘ç»œå±‚ä¹‹é—´åŠ å…¥äº† SSL/TLS å®‰å…¨åè®®ï¼Œä½¿å¾—æŠ¥æ–‡èƒ½å¤ŸåŠ å¯†ä¼ è¾“ã€‚
+ HTTP åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹ä¹‹åä¾¿å¯è¿›è¡Œ HTTP çš„æŠ¥æ–‡ä¼ è¾“ã€‚è€Œ HTTPS åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹ä¹‹åï¼Œè¿˜éœ€è¿›è¡Œ SSL/TLS çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œæ‰å¯è¿›å…¥åŠ å¯†æŠ¥æ–‡ä¼ è¾“ã€‚
+ HTTP é»˜è®¤ç«¯å£å· 80ï¼ŒHTTPS é»˜è®¤ç«¯å£å· 443
+ HTTPS åè®®éœ€è¦ç”³è¯·CAè¯ä¹¦ï¼Œæ¥ä¿è¯æœåŠ¡å™¨çš„èº«ä»½æ˜¯å¯ä¿¡çš„

### ç®€è¿°LRUç®—æ³•

æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•æ ¹æ®æ•°æ®çš„å†å²è®¿é—®è®°å½•æ¥è¿›è¡Œæ·˜æ±°æ•°æ®ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜â€ã€‚

* æ–°æ•°æ®æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨
* æ¯å½“ç¼“å­˜æ•°æ®è¢«è®¿é—®ï¼Œåˆ™å°†æ•°æ®ç§»åˆ°é“¾è¡¨å¤´éƒ¨
* å½“é“¾è¡¨æ»¡æ—¶ï¼Œå°†é“¾è¡¨å°¾éƒ¨çš„æ•°æ®ä¸¢å¼ƒ

![LRUç®—æ³•](https://github.com/arqady01/cpp-interview/blob/main/internet/LRU.png)

### cookieã€sessionã€tokençš„åŒºåˆ«ï¼Ÿ
1. Cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸­çš„å°å‹æ–‡æœ¬æ–‡ä»¶ï¼Œç”±æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨åœ¨åç»­è¯·æ±‚ä¸­ä¼šå°†cookieå‘é€å›æœåŠ¡å™¨ã€‚cookieå¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚æ¯”å¦‚å½“ç™»å½•è´­ç‰©ç½‘ç«™æ—¶ï¼Œç½‘ç«™å¯èƒ½ä¼šä½¿ç”¨cookieæ¥è®°ä½ä½ çš„ç™»å½•çŠ¶æ€å’Œè´­ç‰©è½¦å†…å®¹ã€‚
2. sessionæ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥æ˜¯å†…å­˜ã€æ•°æ®åº“ç­‰å¤šç§å½¢å¼ã€‚sessionç”¨äºè·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œæ¯ä¸ªsessionå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„session IDï¼Œè¿™ä¸ªIDä¼šä»¥cookieçš„å½¢å¼å­˜å‚¨åœ¨å®¢æˆ·ç«¯ã€‚
3. Tokenæ˜¯ä¸€ç§æ›´ç°ä»£çš„èº«ä»½éªŒè¯æ–¹å¼ï¼Œé€šå¸¸æ˜¯åœ¨ç”¨æˆ·ç™»å½•åç”±æœåŠ¡å™¨ç”Ÿæˆçš„ä¸€ä¸²åŠ å¯†å­—ç¬¦ä¸²ã€‚å®¢æˆ·ç«¯åœ¨åç»­è¯·æ±‚ä¸­ä¼šåœ¨headerä¸­æºå¸¦è¿™ä¸ªtokenã€‚

ä¸»è¦åŒºåˆ«ï¼š

1. å­˜å‚¨ä½ç½®ï¼š
    - Cookieï¼šå®¢æˆ·ç«¯
    - Sessionï¼šæœåŠ¡å™¨ç«¯ï¼ˆsession IDåœ¨å®¢æˆ·ç«¯ï¼‰
    - Tokenï¼šå®¢æˆ·ç«¯ï¼ˆæœåŠ¡å™¨é€šå¸¸ä¸å­˜å‚¨ï¼‰
2. å®‰å…¨æ€§ï¼š  
Token > Session > Cookie
3. å¯æ‰©å±•æ€§ï¼š  
Tokenæœ€ä½³ï¼Œå› ä¸ºå®ƒæ˜¯æ— çŠ¶æ€çš„ï¼Œè€ŒSessionéœ€è¦æœåŠ¡å™¨å­˜å‚¨ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¯èƒ½é¢ä¸´æŒ‘æˆ˜ã€‚
4. ç”¨é€”ï¼š
    - Cookieï¼šå¸¸ç”¨äºå­˜å‚¨ç”¨æˆ·åå¥½è®¾ç½®ã€è´­ç‰©è½¦ä¿¡æ¯ç­‰ä¸éœ€è¦é«˜åº¦å®‰å…¨çš„æ•°æ®ã€‚
    - Sessionï¼šç”¨äºå­˜å‚¨æœåŠ¡å™¨ç«¯çš„ç”¨æˆ·çŠ¶æ€
    - Tokenï¼šä¸»è¦ç”¨äºèº«ä»½éªŒè¯å’Œæˆæƒç­‰è¾ƒé«˜å®‰å…¨åœºæ™¯

### å¦‚æœæŠŠæ•°æ®å­˜å‚¨åˆ° localStorageï¼Œå’ŒCookieæœ‰ä»€ä¹ˆåŒºåˆ«
+ å­˜å‚¨å®¹é‡ï¼šCookie çš„å­˜å‚¨å®¹é‡é€šå¸¸è¾ƒå°ï¼Œä¸€èˆ¬é™åˆ¶åœ¨å‡  KB å·¦å³ã€‚è€Œ LocalStorage çš„å­˜å‚¨å®¹é‡é€šå¸¸è¾ƒå¤§ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦å­˜å‚¨å¤§é‡æ•°æ®ï¼ŒLocalStorage é€šå¸¸æ›´é€‚åˆ
+ æ•°æ®å‘é€ï¼šCookie åœ¨æ¯æ¬¡ HTTP è¯·æ±‚ä¸­éƒ½ä¼šè‡ªåŠ¨å‘é€åˆ°æœåŠ¡å™¨ï¼Œè€Œ localStorage åˆ™ä¸ä¼šï¼Œå®ƒä»…åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨æ•°æ®
+ ç”Ÿå‘½å‘¨æœŸï¼šCookie å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œè€Œ LocalStorage çš„æ•°æ®å°†æ°¸ä¹…å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œé™¤éæ‰‹åŠ¨åˆ é™¤
+ å®‰å…¨æ€§ï¼šCookie çš„å®‰å…¨æ€§è¾ƒä½ï¼Œå› ä¸º Cookie åœ¨æ¯æ¬¡ HTTP è¯·æ±‚ä¸­éƒ½ä¼šè‡ªåŠ¨å‘é€åˆ°æœåŠ¡å™¨ï¼Œå­˜åœ¨è¢«çªƒå–æˆ–ç¯¡æ”¹çš„é£é™©ï¼Œè€Œ LocalStorage çš„æ•°æ®ä»…å­˜å‚¨åœ¨æµè§ˆå™¨ï¼Œç›¸å¯¹æ›´å®‰å…¨ä¸€äº›

### ä»€ä¹ˆæ•°æ®åº”å­˜åˆ°cookieï¼ŒLocalstorageå‘¢ï¼Ÿ
Cookie é€‚åˆç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®ã€è·¨åŸŸè®¿é—®å’Œè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè€Œ LocalStorage é€‚åˆç”¨äºåœ¨åŒä¸€åŸŸåä¸‹çš„ä¸åŒé¡µé¢ä¹‹é—´å…±äº«æ•°æ®ã€å­˜å‚¨å¤§é‡æ•°æ®å’Œæ°¸ä¹…å­˜å‚¨æ•°æ®


### é›¶æ‹·è´æŠ€æœ¯

ä¼˜ç‚¹

åœ¨ä¼ ç»Ÿçš„æ•°æ®ä¼ è¾“ä¸­ï¼Œæ•°æ®éœ€è¦åœ¨ç”¨æˆ·å’Œå†…æ ¸ç©ºé—´ä¹‹é—´è¿›è¡Œå¤šæ¬¡å¤åˆ¶ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªåº”ç”¨ç¨‹åºä»ç£ç›˜è¯»å–æ–‡ä»¶å¹¶å‘é€åˆ°ç½‘ç»œæ—¶ï¼Œæ•°æ®é¦–å…ˆéœ€è¦ä»ç£ç›˜å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´çš„ç¼“å†²åŒºï¼Œç„¶åå†ä»å†…æ ¸ç©ºé—´çš„ç¼“å†²åŒºå¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºï¼Œæœ€åå†ä»ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºå¤åˆ¶å›å†…æ ¸ç©ºé—´çš„ç½‘ç»œç¼“å†²åŒºã€‚è¿™äº›å¤åˆ¶æ“ä½œä¼šæ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´å’Œå†…å­˜å¸¦å®½ã€‚

é›¶æ‹·è´é¿å…äº†å†…æ ¸ç©ºé—´åˆ°ç”¨æˆ·ç©ºé—´çš„æ•°æ®æ‹·è´ã€‚ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶ã€‚åº”ç”¨ç¨‹åºå¯ä»¥å°†æ–‡ä»¶ç›´æ¥æ˜ å°„åˆ°å…¶åœ°å€ç©ºé—´ï¼Œç„¶åç›´æ¥æ“ä½œè¿™äº›æ•°æ®ï¼Œæ— éœ€å°†æ•°æ®å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ sendfile ç­‰ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™äº›ç³»ç»Ÿè°ƒç”¨å¯ä»¥ç›´æ¥å°†æ•°æ®ä»ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å‘é€åˆ°å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œæ— éœ€ç»è¿‡ç”¨æˆ·ç©ºé—´ã€‚

ç¼ºç‚¹

ç”±äºè®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“æ˜¯é€šè¿‡ DMA å®Œæˆçš„ï¼Œå› æ­¤ç”¨æˆ·ç©ºé—´çš„æ•°æ®ç¼“å†²åŒºå†…å­˜é¡µå¿…é¡»è¿›è¡Œé¡µé”å®šï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢å…¶ç‰©ç†é¡µæ¡†åœ°å€è¢«äº¤æ¢åˆ°ç£ç›˜æˆ–è€…è¢«ç§»åŠ¨åˆ°æ–°çš„åœ°å€è€Œå¯¼è‡´ DMA å»æ‹·è´æ•°æ®çš„æ—¶å€™åœ¨æŒ‡å®šçš„åœ°å€æ‰¾ä¸åˆ°å†…å­˜é¡µä»è€Œå¼•å‘ç¼ºé¡µé”™è¯¯ï¼Œè€Œé¡µé”å®šçš„å¼€é”€å¹¶ä¸æ¯” CPU æ‹·è´å°ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…é¢‘ç¹çš„é¡µé”å®šç³»ç»Ÿè°ƒç”¨ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»åˆ†é…å’Œæ³¨å†Œä¸€ä¸ªæŒä¹…çš„å†…å­˜æ± ï¼Œç”¨äºæ•°æ®ç¼“å†²ã€‚

å¦‚æœè®¿é—®çš„æ•°æ®ä¸åœ¨åº”ç”¨ç¨‹åºç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆæ¯æ¬¡æ•°æ®éƒ½ä¼šç›´æ¥ä»ç£ç›˜è¿›è¡ŒåŠ è½½ï¼Œè¿™ç§ç›´æ¥åŠ è½½ä¼šéå¸¸ç¼“æ…¢ã€‚åœ¨åº”ç”¨å±‚å¼•å…¥ç›´æ¥ I/O éœ€è¦åº”ç”¨å±‚è‡ªå·±ç®¡ç†ï¼Œè¿™å¸¦æ¥äº†é¢å¤–çš„ç³»ç»Ÿå¤æ‚æ€§

## select/poll/epoll

- æ€§èƒ½å·®å¼‚
    - epoll ä½¿ç”¨äº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼ˆç±»ä¼¼è§‚å¯Ÿè€…æ¨¡å¼æ¨¡å‹ï¼‰ï¼Œåœ¨å¤„ç†å¤§é‡è¿æ¥æ—¶æ€§èƒ½æ›´å¥½
    - select å’Œ poll éœ€è¦è½®è¯¢æ‰€æœ‰çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ•ˆç‡è¾ƒä½
- æ–‡ä»¶æè¿°ç¬¦æ•°é‡å·®å¼‚
    - select ä¸€èˆ¬ä¸º 1024 ä¸ª
    - poll é€šå¸¸é™åˆ¶ä¹Ÿæ˜¯ 1024 ä¸ª
    - epoll åœ¨Linuxä¸‹æ— æ˜ç¡®é™åˆ¶ï¼Œå¯ä»¥å¤„ç†æ›´å¤§æ•°é‡çš„æ–‡ä»¶æè¿°ç¬¦
- äº‹ä»¶è§¦å‘æ–¹å¼
    - select åˆ©ç”¨æ•°ç»„å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦ï¼Œä½¿ç”¨è½®è¯¢æ–¹å¼æ¥æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€
    - poll åˆ©ç”¨é“¾è¡¨å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦ï¼Œéœ€è¦è½®è¯¢æ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†IOäº‹ä»¶
    - epoll åˆ©ç”¨çº¢é»‘æ ‘å­˜å‚¨ï¼Œäº‹ä»¶é€šçŸ¥æ¨¡å‹ï¼Œåœ¨æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ä¼šé€šçŸ¥ç¨‹åºï¼Œä¸éœ€è¦éå†æ‰€æœ‰çš„æ–‡ä»¶æè¿°ç¬¦
        - LTæ°´å¹³è§¦å‘
            1. LTæ˜¯ epoll çš„é»˜è®¤å·¥ä½œæ¨¡å¼ï¼Œå½“ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦ä¸Šæœ‰å¯è¯»ã€å¯å†™æˆ–å¼‚å¸¸äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œepoll ä¼šé€šçŸ¥
            2. å¦‚æœåº”ç”¨ç¨‹åºæœªå¤„ç†å®Œæ•°æ®ï¼Œåªè¦è¿˜æœ‰æ•°æ®å¯è¯»å†™ï¼Œepoll_waitä¼šå†æ¬¡è¿”å›è¯¥æ–‡ä»¶æè¿°ç¬¦
            3. åªè¦æœ‰æ•°æ®å¯è¯»å¯å†™ï¼Œepoll_wait() å°†æŒç»­é€šçŸ¥è¯¥äº‹ä»¶
        - ETè¾¹ç¼˜è§¦å‘
            1. epoll ä»…åœ¨çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ä»æ— æ•°æ®å˜ä¸ºæœ‰æ•°æ®ï¼Œä»ä¸å¯å†™å˜ä¸ºå¯å†™
            2. å½“é€šè¿‡ epoll_wait() é€šçŸ¥åº”ç”¨ç¨‹åºæŸä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šçš„äº‹ä»¶åï¼Œç¨‹åºå¿…é¡»å¤„ç†è¯¥äº‹ä»¶ï¼ˆå°½å¯èƒ½å¤šçš„è¯»å–æ•°æ®æˆ–å†™å…¥æ•°æ®ï¼‰ï¼Œå› ä¸º epoll ä¸ä¼šå†æ¬¡é€šçŸ¥è¯¥äº‹ä»¶ï¼Œé™¤éçŠ¶æ€å†æ¬¡å‘ç”Ÿå˜åŒ–
            3. åº”ç”¨ç¨‹åºéœ€è¦éé˜»å¡çš„æ–¹å¼æ“ä½œæ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥é¿å…åœ¨è¯»å†™æ“ä½œæ—¶è¢«é˜»å¡ï¼Œå› ä¸ºæ²¡æœ‰æ–°çš„é€šçŸ¥å‘ŠçŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æˆ–å¯å†™
            
- æ¥å£å‚æ•°ï¼š
    - select çš„å‚æ•°æ˜¯ä¸€ä¸ª fd_set ç»“æ„ä½“æ•°ç»„ï¼Œéœ€è¦é€šè¿‡å®å®šä¹‰è¿›è¡Œæ“ä½œ
    - poll çš„å‚æ•°æ˜¯ä¸€ä¸ª pollfd ç»“æ„ä½“æ•°ç»„
    - epoll åˆ©ç”¨ä¸‰ä¸ªå‡½æ•° epoll_createã€epoll_ctl å’Œ epoll_wait æ¥å®Œæˆæ“ä½œï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ çµæ´»

## å¦‚ä½•è¿›è¡Œç½‘ç»œè¿é€šæ€§æµ‹è¯•

1. Ping
- é€šè¿‡å‘ç›®æ ‡ä¸»æœºå‘é€ ICMP Echo è¯·æ±‚åŒ…ï¼Œå¹¶ç­‰å¾…å“åº”ï¼Œæ¥åˆ¤æ–­ç›®æ ‡ä¸»æœºæ˜¯å¦å¯è¾¾
- ç¤ºä¾‹: ping www.baidu.com
- æ³¨æ„: Ping å‘½ä»¤åªèƒ½æµ‹è¯•åˆ°ç½‘ç»œå±‚ï¼Œä¸èƒ½æµ‹è¯•åº”ç”¨ç¨‹åºå±‚çš„è¿é€šæ€§
2. Traceroute
- é€šè¿‡é€è·³çš„æ–¹å¼è·Ÿè¸ªæ•°æ®åŒ…ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºçš„è·¯å¾„ï¼Œæ˜¾ç¤ºæ•°æ®åŒ…ç»è¿‡çš„è·¯ç”±å™¨
- ç¤ºä¾‹: traceroute www.baidu.com
- ä½œç”¨: å¯ä»¥å¸®åŠ©å®šä½ç½‘ç»œæ•…éšœå‘ç”Ÿçš„ä½ç½®
3. nslookup
- æŸ¥è¯¢åŸŸåå¯¹åº”çš„IPåœ°å€
- ç¤ºä¾‹: nslookup www.baidu.com
- ä½œç”¨: éªŒè¯DNSè§£ææ˜¯å¦æ­£å¸¸
4. telnet
- ç”¨äºè¿œç¨‹ç™»å½•åˆ°å¦ä¸€å°ä¸»æœº
- ä½¿ç”¨æ–¹æ³•: telnet ç›®æ ‡ä¸»æœºIPåœ°å€ ç›®æ ‡ç«¯å£
- ç¤ºä¾‹: telnet www.baidu.com 80 (æµ‹è¯•80ç«¯å£æ˜¯å¦å¼€æ”¾)
- æ³¨æ„: telnet å‘½ä»¤å­˜åœ¨å®‰å…¨é£é™©ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨

<h1 id="algorithm">ğŸ€ å‰‘æŒ‡offer</h1>

## å‰‘æŒ‡Offer

[é¢˜åº“](https://github.com/arqady01/Cpp-interface/blob/main/src/Offer/offer.md)

## é€’å½’ä¸å›æº¯

**ä½¿ç”¨é€’å½’æ³•çš„æ³¨æ„äº‹é¡¹**

1. é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šæ¯ä¸ªé€’å½’å‡½æ•°å¿…é¡»æœ‰ä¸€ä¸ªæ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶ï¼Œå¦åˆ™ä¼šæ— é™é€’å½’ï¼Œæœ€ç»ˆæ ˆæº¢å‡º
2. æ ˆç©ºé—´é™åˆ¶ï¼šè®¾è®¡é€’å½’ç®—æ³•æ—¶è¦è€ƒè™‘é€’å½’æ·±åº¦é—®é¢˜ï¼Œå› ä¸ºé€’å½’è°ƒç”¨ä¼šå ç”¨æ ˆç©ºé—´
3. é‡å¤è®¡ç®—é—®é¢˜ï¼šå¦‚æœé€’å½’è¿‡ç¨‹ä¸­å­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å‰ªææˆ–åŠ¨æ€è§„åˆ’æ¥ä¼˜åŒ–æ€§èƒ½ã€‚

**å›æº¯æ³•è§£å†³çš„äº”ç±»é—®é¢˜**

- ç»„åˆé—®é¢˜ï¼šNä¸ªæ•°é‡Œé¢æŒ‰ä¸€å®šè§„åˆ™æ‰¾å‡ºkä¸ªæ•°çš„é›†åˆ
- åˆ‡å‰²é—®é¢˜ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ä¸€å®šè§„åˆ™æœ‰å‡ ç§åˆ‡å‰²æ–¹å¼
- å­é›†é—®é¢˜ï¼šä¸€ä¸ªNä¸ªæ•°çš„é›†åˆé‡Œæœ‰å¤šå°‘ç¬¦åˆæ¡ä»¶çš„å­é›†
- æ’åˆ—é—®é¢˜ï¼šNä¸ªæ•°æŒ‰ä¸€å®šè§„åˆ™å…¨æ’åˆ—ï¼Œæœ‰å‡ ç§æ’åˆ—æ–¹å¼
- æ£‹ç›˜é—®é¢˜ï¼šNçš‡åï¼Œè§£æ•°ç‹¬

ç»„åˆä¸å¼ºè°ƒé¡ºåºï¼Œè€Œæ’åˆ—å¼ºè°ƒé¡ºåºï¼Œå³ï¼šç»„åˆæ— åºï¼Œæ’åˆ—æœ‰åºã€‚

å›æº¯æ³•éƒ½å¯ä»¥æŠ½è±¡ä¸ºæ ‘å½¢ç»“æ„ï¼›é›†åˆçš„å¤§å°å³æ ‘çš„å®½åº¦ï¼Œé€’å½’å›æº¯çš„æ·±åº¦å°±æ˜¯æ ‘çš„æ·±åº¦ï¼Œé€’å½’å›æº¯å¿…é¡»æœ‰ç»ˆæ­¢æ¡ä»¶ï¼Œæ ‘æ˜¯ä¸€é¢—é«˜åº¦æœ‰é™çš„Nå‰æ ‘

**å›æº¯æ³•æ¨¡æ¿**

```cpp
void backtracking(å‚æ•°) {
    if æ»¡è¶³ç»ˆæ­¢æ¡ä»¶ {
        å°†ç»“æœçº³å…¥ç»“æœé›†;
        return;
    }
    for (é€‰æ‹©ï¼šæœ¬å±‚é›†åˆä¸­å…ƒç´ ï¼ˆæ ‘ä¸­èŠ‚ç‚¹å­©å­çš„æ•°é‡å°±æ˜¯é›†åˆçš„å¤§å°ï¼‰) {
        å¤„ç†èŠ‚ç‚¹;
        backtracking(è·¯å¾„ï¼Œé€‰æ‹©åˆ—è¡¨); //é€’å½’
        å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ
    }
}
```

[é€’å½’ä¸å›æº¯é¢˜åº“](https://github.com/arqady01/Cpp-interface/blob/main/src/Offer/backtravel.md)

## é“¾è¡¨

[é“¾è¡¨é¢˜åº“](https://github.com/arqady01/Cpp-interface/blob/main/src/Offer/ListNode.md)

## äºŒå‰æ ‘

#### å…ˆåºéå†é€’å½’æ³•

```cpp
void preOrder(TreeNode* root) { 
    if (root == nullptr) return; //â‘ é€’å½’ç»ˆæ­¢æ¡ä»¶
    visit(root); //è®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œè‡ªè¡Œå®šä¹‰
    //â‘¡å•å±‚é€’å½’é€»è¾‘
    if (root->left != nullptr)
        preOrder(root->left);
    if (root->right != nullptr)
        preOrder(root->right);
}
```

#### å…ˆåºéå†è¿­ä»£æ³•

å€ŸåŠ©æ ˆæ¥å®ç°ï¼Œå­©å­èŠ‚ç‚¹ä»å³è‡³å·¦ä¾æ¬¡å…¥æ ˆ

```cpp
void preOrder(TreeNode* root) {
    if (root == nullptr)
        return; //ç©ºæ ‘ï¼Œç›´æ¥è¿”å›
    TreeNode* cur = root; //æ“ä½œèŠ‚ç‚¹
    std::stack<TreeNode*> s;
    s.push(cur); //å¤´èŠ‚ç‚¹å…¥æ ˆ
    while (!s.empty()) {
        cur = s.top(); //step1.å–å‡ºæ ˆé¡¶å…ƒç´ 
        visit(cur); //å¯¹å…ƒç´ å¤„ç†ï¼Œæ¯”å¦‚æ‰“å°cur->val
        s.pop(); //step2.è®¿é—®å®Œæ¯•æŠ›å‡ºæ ˆé¡¶å…ƒç´ 
        //step3.å­©å­èŠ‚ç‚¹ä»å³è‡³å·¦å…¥æ ˆ
        if (cur->right != nullptr) {
            s.push(cur->right);
        }
        if (cur->left != nullptr) {
            s.push(cur->left);
        }
    }
}
```

#### ä¸­åºéå†é€’å½’æ³•

```cpp
void midOrder(TreeNode* root) { 
    if (root == nullptr) return; //â‘ é€’å½’ç»ˆæ­¢æ¡ä»¶
    //â‘¡å•å±‚é€’å½’é€»è¾‘
    if (root->left != nullptr) {
        preOrder(root->left);
    }
    visit(root); //è®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œè‡ªè¡Œå®šä¹‰
    if (root->right != nullptr) {
        preOrder(root->right);
    }
}
```

#### ä¸­åºéå†è¿­ä»£æ³•

å€ŸåŠ©æ ˆï¼Œå…ˆæŠŠå·¦å­æ ‘å…¥æ ˆï¼Œå†å›é€€å»å¤„ç†å³å­èŠ‚ç‚¹

```cpp
void midOrder(TreeNode* root) {
    if (root == nullptr) {
        return;
    }
    std::stack<TreeNode*> s;
    TreeNode* cur = root; //æ“ä½œèŠ‚ç‚¹
    while (!s.empty() || cur != nullptr) {
        //å·¦å­æ ‘ä¸åœçš„å…¥æ ˆ
        if (cur != nullptr) {
            s.push(cur);
            cur = cur->left; //èµ°å·¦è¾¹
        } else {
            cur = s.top(); //curä¸ºç©ºæ—¶ï¼Œå°±å›é€€åˆ°æ ˆé¡¶å…ƒç´ 
            visit(cur); //å¯¹å…ƒç´ å¤„ç†ï¼Œæ¯”å¦‚æ‰“å°cur->val
            s.pop();
            cur = cur->right; //èµ°å³è¾¹ï¼Œèµ°å®Œä¹‹åç»§ç»­æå·¦è¾¹
        }
    }
}
```

æˆ–è€…æ”¹é€ ä¸€ä¸‹ï¼Œè¿™ä¸ªæ”¹é€ ä¹Ÿå¿…é¡»è¦ä¼š

```cpp
void midOrder(TreeNode* root) {
    if (root == nullptr) {
        return;
    }
    std::stack<TreeNode*> s;
    TreeNode* cur = root; //æ“ä½œèŠ‚ç‚¹
    while (!s.empty() || cur != nullptr) {
        //å·¦å­æ ‘ä¸åœçš„å…¥æ ˆ
        while (cur != nullptr) {
            s.push(cur);
            cur = cur->left; //èµ°å·¦è¾¹
        }
        cur = s.top(); //curä¸ºç©ºæ—¶ï¼Œå°±å›é€€åˆ°æ ˆé¡¶å…ƒç´ 
        visit(cur); //å¯¹å…ƒç´ å¤„ç†ï¼Œæ¯”å¦‚æ‰“å°cur->val
        s.pop();
        cur = cur->right; //èµ°å³è¾¹ï¼Œèµ°å®Œä¹‹åç»§ç»­æå·¦è¾¹
    }
}
```

éœ€è¦è¡¥å……çš„æ˜¯ï¼Œå¯¹äºäºŒå‰æœç´¢æ ‘ï¼Œä½¿ç”¨ä¸­åºéå†ä¼šå¾—åˆ°ä¸€ä¸ªä»å°åˆ°å¤§çš„åºåˆ—ï¼Œä½†æ˜¯å¦‚æœæ”¹å˜å…¥æ ˆçš„é¡ºåºå°†ä¼šå¾—åˆ°ä¸€ä¸ªä»å¤§åˆ°å°çš„åºåˆ—ï¼š

```cpp
void midOrder(TreeNode* root) {
    if (root == nullptr) {
        return;
    }
    std::stack<TreeNode*> s;
    TreeNode* cur = root; //æ“ä½œèŠ‚ç‚¹
    while (!s.empty() || cur != nullptr) {
        //å·¦å­æ ‘ä¸åœçš„å…¥æ ˆ
        while (cur != nullptr) {
            s.push(cur);
            cur = cur->right; //èµ°å³è¾¹ //æ”¹åŠ¨ä¸€
        }
        cur = s.top(); //curä¸ºç©ºæ—¶ï¼Œå°±å›é€€åˆ°æ ˆé¡¶å…ƒç´ 
        visit(cur); //å¯¹å…ƒç´ å¤„ç†ï¼Œæ¯”å¦‚æ‰“å°cur->val
        s.pop();
        cur = cur->left; //èµ°å·¦è¾¹ï¼Œèµ°å®Œä¹‹åç»§ç»­æå³è¾¹ //æ”¹åŠ¨äºŒ
    }
}
```

#### åç»­éå†é€’å½’æ³•

```cpp
void posOrder(TreeNode* root) { 
    if (root == nullptr) return; //â‘ é€’å½’ç»ˆæ­¢æ¡ä»¶
    //â‘¡å•å±‚é€’å½’é€»è¾‘
    if (root->left != nullptr) {
        posOrder(root->left);
    }
    if (root->right != nullptr) {
        posOrder(root->right);
    }
    visit(root); //è®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œè‡ªè¡Œå®šä¹‰
}
```

#### åç»­éå†è¿­ä»£æ³•

å€ŸåŠ©æ ˆ

```cpp
std::stack<TreeNode*> posOrder(TreeNode* root) {
    if (root == nullptr) {
        return;
    }
    TreeNode* cur = root; //æ“ä½œèŠ‚ç‚¹
    std::stack<TreeNode*> s1;
    std::stack<TreeNode*> s2; //æ”¶é›†æ ˆ
    s1.push(cur); //é¦–å…ˆå°†æ ¹èŠ‚ç‚¹å…¥æ ˆ
    while (!s1.empty()) {
        cur = s1.top(); //å–å‡ºs1æ ˆé¡¶å…ƒç´ 
        //å¯¹æ¯”å…ˆåºéå†ï¼ŒvisitåŠ¨ä½œæ¢æˆäº†å‹å…¥æ”¶é›†æ ˆåŠ¨ä½œ
        //åŒæ—¶ä»å³è‡³å·¦ä¹Ÿæ¢æˆäº†ä»å·¦è‡³å³
        s2.push(cur);
        s1.pop(); //å¼¹å‡ºs1æ ˆé¡¶å…ƒç´ 
        if (cur->left != nullptr) {
            s1.push(root->left);
        }
        if (cur->right != nullptr) {
            s2.push(root->right);
        }
    }
    return s2; //è¯»å‡ºæ”¶é›†æ ˆä¸­æ•°æ®ï¼Œå°±æ˜¯ååºéå†åºåˆ—
}
```

#### å¹¿åº¦ä¼˜å…ˆéå†

```cpp
void bfs(TreeNode* root) {
    if (root == nullptr)
        return;
    std::queue<TreeNode*> q;
    q.push(root);
    while (!q.empty()) {
        root = q.front();
        visit(root->val); //è®¿é—®
        q.pop();
        if (root->left != nullptr)
            q.push(root->left);
        if (root->right != nullptr)
            q.push(root->right);
    }
}
```

[äºŒå‰æ ‘é¢˜åº“](https://github.com/arqady01/Cpp-interface/blob/main/src/BinaryTree.md#L150)

## åŠ¨æ€è§„åˆ’

è§£é¢˜æ­¥éª¤

- ç¡®å®šdpæ•°ç»„åŠä¸‹æ ‡çš„å«ä¹‰
- ç¡®å®šé€’æ¨å…¬å¼
- dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
- ç¡®å®šéå†é¡ºåºï¼ˆèƒŒåŒ…é—®é¢˜å’Œæ’åˆ—ç»„åˆæ•°é—®é¢˜å°¤å…¶é‡è¦ï¼‰
- ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„

[åŠ¨æ€è§„åˆ’é¢˜åº“](https://github.com/arqady01/Cpp-interface/blob/main/src/dp.md)

## å•è°ƒæ ˆ

#### æ¯æ—¥æ¸©åº¦

æ•°ç»„temperaturesè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„answerï¼Œå…¶ä¸­answer[i]æ˜¯æŒ‡å¯¹äºç¬¬iå¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨0æ¥ä»£æ›¿ã€‚

è¾“å…¥: temperatures = [35,31,33,36,34]

è¾“å‡º: [3,1,1,0,0]

è¾“å…¥: temperatures = [30,60,90]

è¾“å‡º: [1,1,0]

å•è°ƒæ ˆæ€æƒ³ï¼Œå¯»æ‰¾å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ 

i = 0æ—¶ï¼Œè¿˜ä¸æ¸…æ¥šåé¢æœ‰æ²¡æœ‰å‡ºç°æ¯”35â„ƒæ›´é«˜çš„æ¸©åº¦ï¼Œæ‰€ä»¥0ï¼ˆ35â„ƒï¼‰å…¥æ ˆ

i = 1æ—¶ï¼Œä¸‹æ ‡index = top() = 0ï¼Œ31â„ƒæ¯”å®ƒä½ï¼Œå³31â„ƒæ²¡æœ‰é‡åˆ°æ›´çƒ­çš„å¤©ï¼Œ1ï¼ˆ31â„ƒï¼‰å…¥æ ˆ

i = 2æ—¶ï¼Œindex = top() = 1ï¼Œå¯¹åº”çš„31â„ƒé‡åˆ°äº†æ›´çƒ­çš„33â„ƒï¼Œæ›´æ–°ansä¸ºi - indexï¼Œå¹¶è®©1å‡ºæ ˆï¼›ç»§ç»­å¯¹æ¯”ï¼Œ35â„ƒä¸éœ€è¦æ›´æ–°ã€‚2ï¼ˆ33â„ƒï¼‰å…¥æ ˆ

i = 3æ—¶ï¼Œindex = top() = 2ï¼Œå¯¹åº”çš„33â„ƒé‡åˆ°äº†æ›´çƒ­çš„36â„ƒï¼Œæ›´æ–°ansï¼Œè®©2å‡ºæ ˆï¼›å¯¹æ¯”35â„ƒï¼Œæ›´æ–°ansï¼Œå¹¶è®©0å‡ºæ ˆã€‚æœ€å3ï¼ˆ36â„ƒï¼‰å…¥æ ˆ

i = 4æ—¶ï¼Œ4ï¼ˆ34â„ƒï¼‰å…¥æ ˆ

```cpp
vector<int> dailyTemperatures(vector<int>& temperatures) {
    std::vector<int> ans(temperatures.size(), 0);
    //å•è°ƒæ ˆä¸­è®°å½•çš„æ˜¯éå†è¿‡çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥ä¸ç®¡å½“å‰éå†å…ƒç´ æ¯”æ ˆé¡¶å…ƒç´ å¤§è¿˜æ˜¯å°ï¼Œ
    //æ ˆé¡¶å…ƒç´ éƒ½æ˜¯è¦å…¥æ ˆçš„ï¼Œä»£è¡¨å½“å‰å…ƒç´ è¢«éå†è¿‡äº†
    std::stack<int> s; //æ ˆä¸­ä¸æ˜¯å­˜æ”¾æ¸©åº¦ï¼Œè€Œæ˜¯ä¸‹æ ‡
    for (int i = 0; i < temperatures.size(); i++) {
        //ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œå› ä¸ºæ ˆä¸ºç©ºï¼Œtop()åœ¨&&åå¹¶ä¸ä¼šæŠ¥é”™ï¼ŒåŒæ—¶whileè·³è¿‡å…ˆæŠŠ0å…¥æ ˆ
        //å½“éå†å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ ï¼Œè¯´æ˜æ ˆé¡¶å…ƒç´ æ‰¾åˆ°æ¯”è‡ªå·±å¤§çš„å…ƒç´ äº†ï¼Œå°±å¯ä»¥æ›´æ–°anså¹¶ä¸”
        //å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¼¹å‡ºçš„åŸå› æ˜¯å› ä¸ºè‡ªå·±æ‰¾åˆ°æ›´å¤§çš„äº†ï¼Œè‡ªå·±æ²¡å¿…è¦å†ç•™åœ¨å•è°ƒæ ˆä¸­äº†
        while (!s.empty() && temperatures[i] > temperatures[s.top()]) {
            int index = s.top();
            //indexå¤„çš„ç»“æœæ‰¾åˆ°äº†ï¼Œæ ˆä¸­æ²¡å¿…è¦ç»§ç»­ä¿å­˜äº†ï¼Œå¯ä»¥å¼¹å‡º
            s.pop();
            ans[index] = i - index;
        }
        //ä¸ç®¡éå†å…ƒç´ æ¯”æ ˆé¡¶å…ƒç´ å¤§è¿˜æ˜¯å°ï¼Œéƒ½éœ€è¦å…¥æ ˆ
        //è¿™é‡ŒåŒ…å«äº†å¦ä¸€ç§æƒ…å†µï¼Œå½“éå†å…ƒç´ æ¯”æ ˆé¡¶å…ƒç´ å°ï¼Œè¯´æ˜æ ˆé¡¶å…ƒç´ æ²¡æ‰¾åˆ°æ¯”è‡ªå·±æ›´å¤§çš„å…ƒç´ 
        //éœ€è¦ç»§ç»­å¾€åèµ°ï¼Œä½†æ˜¯å½“å‰éå†å…ƒç´ çš„ä¸‹æ ‡è¯·å…¥æ ˆè¡¨ç¤ºè‡ªå·±è¢«éå†è¿‡äº†
        s.push(i);
    }
    return ans;
}
```

#### 42 æ¥é›¨æ°´

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/resource/Offer_Question_images/rainwatertrap.png" style="width:50%;">
</p>

è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]ï¼Œè¾“å‡ºï¼š6

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/resource/Offer_Answer_images/42ans_1.jpg" style="width:100%;">
</p>

```cpp
class Solution {
public:
    int trap(vector<int>& height) {
        for (int i = 0; i < height.size(); i++) {
            while (!s.empty() && height[i] > height[s.top()]) {
                //æ ˆé¡¶å…ƒç´ çš„å³è¾¹ç¬¬ä¸€ä¸ªæ¯”æ ˆé¡¶å…ƒç´ å¤§çš„å°±æ˜¯height[i]
                int mid = s.top(); //éœ€è¦è®°å½•ï¼Œä¸ç„¶å°±æ²¡äº†
                s.pop(); //å¼¹å‡ºæ ˆé¡¶å…ƒç´ åï¼Œæ–°çš„æ ˆé¡¶å…ƒç´ å°±æ˜¯midå·¦è¾¹çš„ç¬¬ä¸€å¤§å…ƒç´ 
                if (!s.empty()) { //é˜²å«å¼å£°æ˜
                    int high = min(height[i], height[s.top()]); //midå·¦å³ä¸¤ä¾§çš„ç»¼åˆç¬¬ä¸€ä¸ªå¤§çš„å…ƒç´ é«˜åº¦
                    int h = high - height[mid]; //é«˜åº¦
                    int w = i - s.top() - 1; //å®½åº¦
                    ans += h * w;
                }
            }
            //å¦‚æœå½“å‰å…ƒç´ å¤§äºç­‰äºæ ˆé¡¶å…ƒç´ ï¼Œå‹æ ˆï¼Œè¿™æ ·å°±å¾—åˆ°ä¸€ä¸ªå•è°ƒé€’å¢æ ˆ
            s.push(i);
        }
        return ans;
    }
    int ans{};
    std::stack<int> s{}; //å­˜å‚¨çš„æ˜¯ä¸‹æ ‡è€Œä¸æ˜¯æ•°å€¼ï¼Œä½†æ˜¯åœ¨ç†è§£çš„æ—¶å€™ï¼Œå¯ä»¥ä»£å…¥ä¸€ä¸ªpair
};
```

å†ä¸¾ä¸ªä¾‹å­ï¼Œè¾“å…¥ï¼šheight = [4,2,0,3,2,5]ï¼Œè¾“å‡ºï¼š9ã€‚å›¾ç¤ºï¼š

<p align="center"> 
    <img src="https://github.com/arqady01/Cpp-interface/blob/main/resource/Offer_Answer_images/42ans_2.jpg" style="width:100%;">
</p>

ã€Šæ¥é›¨æ°´ã€‹æ±‚çš„æ˜¯åŸºå‡†æ•°å­—å·¦ã€å³ä¸¤è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ ï¼›ã€ŠæŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ã€‹æ±‚çš„æ˜¯åŸºå‡†æ•°å­—å·¦å³ä¸¤è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å°çš„å…ƒç´ ã€‚

è®°å¿†æ–¹æ³•ï¼šã€Šæ¥é›¨æ°´ã€‹ï¼šé€’å¢æ ˆï¼Œé€’å¢å¯¹åº”å¤§ã€‚é€’å‡æ ˆï¼Œé€’å‡å¯¹åº”å°

<h1 id="database">ğŸ’¾ æ•°æ®åº“</h1>

## ğŸ”© Redis

- Rediså®Œå…¨åŸºäºå†…å­˜
- æ•°æ®ç»“æ„ç®€å•
- ä½¿ç”¨å¤šè·¯IOå¤ç”¨æ¨¡å‹ï¼Œéé˜»å¡IO
- å•çº¿ç¨‹æ¨¡å‹ï¼Œæ— éœ€è€ƒè™‘åŠ é”æ”¾é”æ“ä½œï¼Œä¸ä¼šå‡ºç°æ­»é”é—®é¢˜

### é€šç”¨å‘½ä»¤
- KEYS æŸ¥è¯¢
- DEL åˆ é™¤
- EXISTS åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨
- EXPIRE ç»™keyè®¾ç½®æœ‰æ•ˆæœŸï¼Œåˆ°æœŸè‡ªåŠ¨åˆ é™¤
- TTL æŸ¥è¯¢keyçš„æœ‰æ•ˆæœŸ

### redisè¿‡æœŸç­–ç•¥
keyçš„è¿‡æœŸæ—¶é—´ç”¨Unixæ—¶é—´æˆ³å­˜å‚¨<br>
redisä½¿ç”¨ï¼šå®šæœŸåˆ é™¤ + æƒ°æ€§åˆ é™¤

#### å®šæ—¶åˆ é™¤
åˆ›å»ºkeyçš„åŒæ—¶åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“å®šæ—¶å™¨ç»“æŸï¼Œç«‹å³åˆ é™¤
- ä¼˜ç‚¹ï¼šå¯¹å†…å­˜æœ€å‹å¥½ï¼Œkeyä¸€æ—¦è¿‡æœŸå°±å¯ä»¥ç«‹å³åˆ é™¤
- ç¼ºç‚¹ï¼šå¯¹CPUæœ€ä¸å‹å¥½ï¼Œå½“è¿‡æœŸkeyæ¯”è¾ƒå¤šï¼Œåˆ é™¤æ“ä½œä¼šå ç”¨CPU

#### å®šæœŸåˆ é™¤
redisæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆå¯åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼‰ï¼Œå°±åœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keysä¸­éšæœºæŠ½æŸ¥ï¼Œå¦‚æœè¿‡æœŸäº†å°±å°†å…¶åˆ é™¤
- ä¼˜ç‚¹ï¼šå¯ä»¥é€šè¿‡è®¾ç½®é¢‘ç‡æ¥å‡å°‘CPUè´Ÿè½½ï¼Œå¦å¤–å®šæœŸåˆ é™¤ï¼Œä¹Ÿèƒ½æœ‰æ•ˆé‡Šæ”¾è¿‡æœŸçš„key
- ç¼ºç‚¹ï¼šæ‰§è¡Œåˆ é™¤æ“ä½œçš„é¢‘ç‡ä¸å¯æ§ï¼Œå¤ªé¢‘ç¹æˆ–ç¨€ç–éƒ½ä¸å¥½

#### æƒ°æ€§åˆ é™¤
è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´åï¼Œä¸å†ç®¡ï¼Œå½“éœ€è¦è¯¥keyæ—¶ï¼Œå†æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤ï¼Œåä¹‹è¿”å›è¯¥key
- ä¼˜ç‚¹ï¼šå¯¹CPUå‹å¥½ï¼Œåªä¼šåœ¨ç”¨åˆ°è¯¥é”®æ—¶æ‰ä¼šåšè¿‡æœŸæ£€æŸ¥ï¼Œå¯¹äºç”¨ä¸åˆ°çš„keyå°±ä¸åšè¿‡æœŸæ£€æŸ¥
- ç¼ºç‚¹ï¼šå¯¹å†…å­˜ä¸å‹å¥½ã€‚è‹¥ä¸€ä¸ªkeyå·²è¿‡æœŸä½†æœªä½¿ç”¨ï¼Œé‚£ä¹ˆè¯¥keyä¸€ç›´å‚¨å­˜åœ¨å†…å­˜ä¸­ï¼›é‡ä¸€å¤šï¼Œå¤§é‡çš„è¿‡æœŸkeyåœ¨å†…å­˜ä¸­å¾—ä¸åˆ°é‡Šæ”¾ï¼Œé€ æˆæ³„éœ²ï¼ˆå¯è§å†…å­˜æ·˜æ±°ç­–ç•¥ï¼‰

### å†…å­˜æ·˜æ±°ç­–ç•¥

å½“rediså ç”¨å†…å­˜è¶…è¿‡maxmemoryæ—¶ï¼Œä¼šè§¦å‘ä¸»åŠ¨æ¸…ç†ç­–ç•¥
- é’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyå¤„ç†
	- volatile-ttl ç­›é€‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ï¼Œè¶Šæ—©è¿‡æœŸçš„è¶Šå…ˆè¢«åˆ é™¤
	- volatile-random ç­›é€‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹ï¼Œéšæœºåˆ é™¤
	- volatile-lru åˆ©ç”¨LRUç®—æ³•ç­›é€‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹è¿›è¡Œåˆ é™¤
	- volatile-lfu åˆ©ç”¨LFUç®—æ³•ç­›é€‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹è¿›è¡Œåˆ é™¤
- é’ˆå¯¹æ‰€æœ‰çš„keyåšå¤„ç†
	- allkeys-random åœ¨æ‰€æœ‰çš„é”®å€¼å¯¹ä¸­è¿›è¡Œéšæœºåˆ é™¤
	- allkeys-lru åˆ©ç”¨LRUç®—æ³•å¯¹æ‰€æœ‰æ•°æ®ç­›é€‰ååˆ é™¤
	- allkeys-lfu åˆ©ç”¨LFUç®—æ³•å¯¹æ‰€æœ‰æ•°æ®ç­›é€‰ååˆ é™¤
- ä¸å¤„ç†
	- noevent ä¸å‰”é™¤ä»»ä½•æ•°æ®ï¼Œæ‹’ç»æ‰€æœ‰å†™å…¥æ“ä½œå¹¶è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œæ­¤æ—¶redisåªå“åº”è¯»æ“ä½œ

#### LRU ï¼† LFU
- LRUï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨(least recently used)ï¼Œä»¥æœ€è¿‘ä¸€æ¬¡è®¿é—®æ—¶é—´ä½œä¸ºå‚è€ƒï¼Œæ·˜æ±°å¾ˆä¹…æ²¡è¢«è®¿é—®è¿‡çš„æ•°æ®
- LFUï¼Œæœ€ä¸ç»å¸¸ä½¿ç”¨(least frequently used)ï¼Œä»¥æ¬¡æ•°ä½œä¸ºå‚è€ƒï¼Œæ·˜æ±°æœ€è¿‘ä¸€æ®µäº‹ä»¶è¢«è®¿é—®æ¬¡æ•°æœ€å°‘çš„æ•°æ®
ç»å¤§å¤šæ•°æƒ…å†µä½¿ç”¨LRUï¼Œä½†å½“å­˜åœ¨å¤§é‡çƒ­ç‚¹ç¼“å­˜æ•°æ®æ—¶ï¼ŒLFUæ›´ä½³

### å¤šè·¯IOå¤ç”¨æ¨¡å‹
- selectï¼šåˆ©ç”¨æ•°ç»„å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦ï¼Œå®¹é‡å›ºå®šï¼Œéœ€è¦è½®è¯¢æ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†IOäº‹ä»¶
- pollï¼šé“¾è¡¨å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯æ‰©å±•ï¼Œä¹Ÿéœ€è¦è½®è¯¢
- epollï¼šçº¢é»‘æ ‘å­˜å‚¨ï¼Œåˆ©ç”¨äº‹ä»¶é€šçŸ¥ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰æ¨¡å‹ï¼Œåªæœ‰å‘ç”Ÿäº†IOäº‹ä»¶ï¼Œåº”ç”¨ç¨‹åºæ‰ä¼šè¿›è¡ŒIOæ“ä½œ

### rediså¯¹è±¡ç±»å‹
redisæ˜¯key-valueç±»å‹ï¼Œæ”¯æŒstring, list, hash, set, SortedSetï¼ˆæœ‰åºé›†åˆï¼‰

#### String
æ ¹æ®å­—ç¬¦ä¸²çš„æ ¼å¼ä¸åŒï¼Œå¯åˆ†ä¸ºä¸‰ç±»
| ç¼–ç ç±»å‹ | å«ä¹‰ |
| :----: | :----: |
| string | æ™®é€šå­—ç¬¦ä¸² |
| int | æ•´æ•°ç±»å‹ï¼Œå¯è‡ªå¢è‡ªå‡ |
| float | æµ®ç‚¹ç±»å‹ï¼Œå¯è‡ªå¢è‡ªå‡ |

| åº•å±‚å®ç° | å«ä¹‰ |
| :----: | :----: |
| int | å­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº20ä¸”èƒ½å¤Ÿè½¬ä¸ºæ•´æ•° |
| embstr | å­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº44 |
| raw | å­—ç¬¦ä¸²é•¿åº¦å¤§äº44 |

ä¸ºå•¥æ˜¯44å‘¢ï¼Ÿå› ä¸ºcpuä¸­æ¯ä¸€ä¸ªå¤šçº§ç¼“å­˜çš„ç¼“å­˜è¡Œ ä¸º64å­—èŠ‚ï¼Œå…¶ä»–é¢å¤–æ•°æ®å æ®19ï¼Œè½¬ä¹‰å­—ç¬¦å 1å­—èŠ‚

- SET æ·»åŠ æˆ–åˆ é™¤stringç±»å‹çš„é”®å€¼å¯¹
- GET æ ¹æ®keyè·å–å€¼
- MSET æ‰¹é‡æ·»åŠ å¤šä¸ªstringå‹çš„é”®å€¼å¯¹
- MGET æ ¹æ®å¤šä¸ªkeyè·å–å€¼
- INCR è®©intå‹æ•°æ®è‡ªå¢1
- INCRBY è®©intå‹è‡ªå¢æŒ‡å®šæ­¥é•¿
- INCRBYFLOAT è®©floatå‹è‡ªå¢æŒ‡å®šæ­¥é•¿
- SETNX æ·»åŠ ä¸€ä¸ªstringå‹çš„é”®å€¼å¯¹ï¼Œå‰ææ˜¯æ­¤keyä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ·»åŠ 
- SETEX æ·»åŠ ä¸€ä¸ªstringå‹çš„é”®å€¼å¯¹ï¼Œå¹¶æŒ‡å®šæœ‰æ•ˆæœŸ

#### keyç»“æ„
Rediså…è®¸æœ‰å¤šä¸ªå•è¯å½¢æˆå±‚çº§ç»“æ„ï¼Œå¤šä¸ªå•è¯ä¹‹é—´ç”¨'ï¼š'éš”å¼€ï¼Œæ¯”å¦‚ï¼š<br>
é¡¹ç›®åï¼šä¸šåŠ¡åï¼šç±»å‹ï¼šid<br>
å†å°†å€¼åºåˆ—åŒ–æˆjsonå¯¹è±¡å­˜å‚¨<br>
```cpp
SET Apple:iphone:A2022_1 '{"id":1, "name":"13pro", "color":"blue"}'
SET Apple:iphone:A2022_2 '{"id":2, "name":"13pro", "color":"white"}'
```

#### List

```
ä¸¤ç§åº•å±‚æ•°æ®ç»“æ„ï¼š
- quicklist åŒå‘é“¾è¡¨
- ziplist å‹ç¼©åˆ—è¡¨
```

- LPUSH key element å‘åˆ—è¡¨å·¦ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ 
- LPOP key ç§»é™¤å¹¶è¿”å›å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å›nil
- RPUSH key element å‘åˆ—è¡¨å³ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ 
- RPOP key ç§»é™¤å¹¶è¿”å›å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
- LRANGE key start end è¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ 
- BLPOPå’ŒBRPOP ä¸LPOPç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›nil


#### Hash
å€¼æ˜¯æ— åºå­—å…¸ï¼ˆè§„å®šå­—å…¸ä¸º field-valueå¯¹ï¼‰

```
å®ç°æ–¹å¼ï¼š
dict - å­—å…¸ï¼ˆèŠ‚ç‚¹æ•°é‡å¤§äº512æˆ–å­—ç¬¦ä¸²é•¿åº¦å¤§äº64ï¼‰
ziplist - å‹ç¼©åˆ—è¡¨ï¼ˆèŠ‚ç‚¹æ•°é‡å°äºç­‰äº512ä¸”å­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº64ï¼‰
```

- HSET key field valueï¼šæ·»åŠ æˆ–ä¿®æ”¹keyçš„fieldå€¼
- HGET key fieldï¼šè·å–hashç±»å‹keyçš„fieldçš„å€¼
- HMSETï¼šæ‰¹é‡æ·»åŠ å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼
- HMGETï¼šæ‰¹é‡è·å–å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼
- HGETALLï¼šè·å–hashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„fieldå’Œvalue
- HKEYSï¼šè·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„field
- HVALSï¼šè·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„value
- HINCRBYï¼šè®©ä¸€ä¸ªhashç±»å‹keyçš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿
- HSETNXï¼šæ·»åŠ ä¸€ä¸ªhashç±»å‹çš„keyçš„fieldå€¼ï¼Œå‰ææ˜¯è¿™ä¸ªfieldä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ

#### set
ç±»ä¼¼äºä¸€ä¸ªæ²¡æœ‰valueçš„æ— åºå­—å…¸

```
intset - æ•´æ•°æ•°ç»„ï¼ˆå…ƒç´ éƒ½ä¸ºæ•´æ•°ä¸”èŠ‚ç‚¹æ•°é‡å°äºç­‰äº512ï¼‰
dict - å­—å…¸ï¼ˆå…ƒç´ æœ‰ä¸€ä¸ªä¸ä¸ºæ•´æ•°æˆ–è€…æ•°é‡å¤§äº512ï¼‰
```

- SADD key member å‘setä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ 
- SREM key member ç§»é™¤setä¸­çš„æŒ‡å®šå…ƒç´ 
- SCARD key è¿”å›setä¸­å…ƒç´ çš„ä¸ªæ•°
- SISMEMBER key member åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºsetä¸­
- SMEMBERS è·å–setä¸­çš„æ‰€æœ‰å…ƒç´ 
- SINTER key1 key2 æ±‚key1ä¸key2çš„äº¤é›†
- SDIFF key1 key2 æ±‚key1ä¸key2çš„å·®é›†
- SUNION key1 key2 æ±‚key1å’Œkey2çš„å¹¶é›†

#### SortedSetï¼ˆweightæ˜¯æƒå€¼ï¼‰

```
skiplist - è·³è¡¨ï¼ˆæ•°é‡å¤§äº128æˆ–è€…æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²é•¿åº¦å¤§äº64ï¼‰
ziplist - å‹ç¼©åˆ—è¡¨
```

- ZADD key weight member æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ°SortedSetï¼Œè‹¥å­˜åœ¨å°±æ›´æ–°æƒå€¼
- ZREM key member å•æ¬¡åˆ é™¤SortedSetä¸­æŒ‡å®šå…ƒç´ 
- ZSCORE key member è·å–SortedSetçš„æŒ‡å®šå…ƒç´ çš„æƒå€¼
- ZRANK key member è·å–SortedSetçš„æŒ‡å®šå…ƒç´ çš„æ’å
- ZCARD key è·å–SortedSetä¸­å…ƒç´ ä¸ªæ•°
- ZCOUNT key left right ç»Ÿè®¡æƒå€¼åœ¨åŒºé—´å†…æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°
- ZINCRBY key increment member è®©SortedSetä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„incrementå€¼ 
- ZRANGE key num1 num2 æ’åºåè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´ ï¼ˆæ¯”å¦‚ç¬¬2å-ç¬¬10åï¼‰
- ZRANGEBYSCORE key min max æ’åºåï¼Œè·å–æŒ‡å®šæƒå€¼èŒƒå›´å†…çš„å…ƒç´ 

### ç›¸åŒæ•°é‡æƒ…å†µä¸‹ï¼Œåˆ†æhashå’Œzsetå ç”¨æƒ…å†µ
- å¦‚æœèŠ‚ç‚¹æ•°æ®â‰¤128ï¼Œhashå’Œzsetåº•å±‚å®ç°éƒ½æ˜¯å‹ç¼©åˆ—è¡¨
- å¦‚æœèŠ‚ç‚¹æ•°æ®âˆˆ(128,512)ï¼Œhashä½¿ç”¨å‹ç¼©åˆ—è¡¨ï¼Œzsetä½¿ç”¨è·³è¡¨ï¼Œè·³è¡¨æ—¶é—´å¤æ‚åº¦O(log2n)ï¼Œå‹ç¼©åˆ—è¡¨O(n)ï¼Œä½†è·³è¡¨ç©ºé—´å ç”¨æ›´é«˜
- å¦‚æœèŠ‚ç‚¹æ•°æ®>512ï¼Œhashä½¿ç”¨å­—å…¸ï¼Œzsetä½¿ç”¨è·³è¡¨

### å¤‡ä»½å¦‚ä½•æ‰§è¡Œ
Rdisä¼šå•ç‹¬åˆ›å»º(fork)ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œç­‰æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶

### æŒä¹…åŒ–
Rdisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ã€‚æ‰€ä»¥Redisæä¾›äº†æŒä¹…åŒ–åŠŸèƒ½

#### RDB
rediså°†å¿«ç…§snapshotä¿å­˜åœ¨dump.rdbæ–‡ä»¶ä¸­

![image](https://github.com/arqady01/cpp-interview/blob/main/database/image/RDB%E6%B5%81%E7%A8%8B.png)

##### RDBè§¦å‘æœºåˆ¶
- æ»¡è¶³configæ–‡ä»¶ä¸­saveè§„åˆ™
- æ‰§è¡Œflushallå‘½ä»¤
- é€€å‡ºredis

##### RDBä¼˜ç¼ºç‚¹
- ä¼˜ç‚¹
    - dump.rdbæ˜¯æŸä¸€æ—¶é—´ç‚¹ä¸Šçš„æ•°æ®å¿«ç…§ï¼Œéå¸¸é€‚åˆå¤§è§„æ¨¡æ•°æ®æ¢å¤
    - å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥å¤åˆ¶åˆ°ä»»ä½•åœ°æ–¹å¹¶åŠ è½½ï¼Œå¯¹ç¾éš¾æ¢å¤ã€æ•°æ®è¿ç§»å¾ˆå‹å¥½
    - ç›¸æ¯”AOFæ€§èƒ½æ›´é«˜ï¼Œæ•°æ®æ¢å¤é€Ÿåº¦æ›´å¿«
- ç¼ºç‚¹
    - éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›ç¨‹æ“ä½œï¼Œå¦‚æœredisæ„å¤–å®•æœºï¼Œå°†ä¸¢å¤±æœ€è¿‘å†™å…¥ä½†æœªä¿å­˜åˆ°å¿«ç…§ä¸­çš„é‚£äº›æ•°æ®
    - forkè¿›ç¨‹æ—¶ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼›è€Œä¸”çˆ¶è¿›ç¨‹è¶Šå¤šï¼Œforkæ—¶é—´ä¹Ÿè¶Šé•¿
    - é«˜å¹¶å‘æ—¶å¯èƒ½ä¼šé¢‘ç¹å‘½ä¸­configä¸­çš„saveè§„åˆ™ï¼Œå¯¼è‡´forkæ“ä½œå’Œå¤‡ä»½çš„é¢‘ç‡å˜å¾—ä¸å¯æ§

#### AOF
å°†æ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™å…¥åŠ¨ä½œä»¥æ—¥å¿—å½¢å¼è®°å½•ä¸‹æ¥ï¼ˆå› ä¸ºåªæœ‰å†™æ‰ä¼šå¯¹æ•°æ®åº“å‘ç”Ÿæ”¹å˜ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œrediså¯åŠ¨ä¹‹åˆä¼šè¯»å–appendonly.aofæ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®

##### AOFä¼˜ç¼ºç‚¹
- ä¼˜ç‚¹
    - å¯ä»¥é€‰æ‹©noï¼Œ every secondï¼Œ alwaysä¸‰ç§ç­–ç•¥
        - alwaysæ¯æ¬¡ä¿®æ”¹éƒ½ä¼šåŒæ­¥ï¼Œæ–‡ä»¶å®Œæ•´æ€§æ›´å¥½
        - every secondæ˜¯é»˜è®¤çš„ç­–ç•¥ï¼Œæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œæ€§èƒ½æ›´ä¼˜ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®
        - noï¼Œä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æœ€é«˜
- ç¼ºç‚¹
    - aofæ–‡ä»¶é€šå¸¸æ¯”rdbæ–‡ä»¶æ›´å¤§ï¼Œä¿®å¤é€Ÿåº¦ä¹Ÿæ›´æ…¢
    - å› ä¸ºaofæ˜¯å†™å…¥æ“ä½œï¼Œæ•ˆç‡æ¯”rdbä½ï¼Œæ‰€ä»¥redisé»˜è®¤æ˜¯ç”¨RDBåšæŒä¹…åŒ–

### ä¸»ä»å¤åˆ¶
å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼ˆä¸»èŠ‚ç‚¹masterï¼Œå†™ä¸ºä¸»ï¼‰ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ï¼ˆä»èŠ‚ç‚¹slaveï¼Œè¯»ä¸ºä¸»ï¼‰ï¼Œæ•°æ®çš„å¤åˆ¶åªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ï¼ˆå•å‘ï¼‰

- æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼
- æ•…éšœæ¢å¤ï¼šå½“ä¸»èŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”±ä»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤
- è´Ÿè½½å‡è¡¡ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥å¤§å¤§æé«˜RedisæœåŠ¡å™¨çš„å¹¶å‘é‡
- é«˜å¯ç”¨åŸºçŸ³ï¼šé™¤äº†ä¸Šè¿°ä½œç”¨ä»¥å¤–ï¼Œä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ï¼Œå› æ­¤ä¸»ä»å¤åˆ¶æ˜¯redisé«˜å¯ç”¨çš„åŸºç¡€

#### å¤åˆ¶åŸç†
slaveè¿æ¥åˆ°masteråä¼šå‘é€ä¸€ä¸ªsyncåŒæ­¥å‘½ä»¤ï¼Œmasterå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œmasterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°slaveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥<br>

- å…¨é‡å¤åˆ¶ï¼šsalveåœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚
- å¢é‡å¤åˆ¶ï¼šmasterç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™slave,å®ŒæˆåŒæ­¥

### å“¨å…µæ¨¡å¼
å½“masterå®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°slaveåˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ï¼Œæ‰€ä»¥ä¼˜å…ˆè€ƒè™‘å“¨å…µæ¨¡å¼<br>
å“¨å…µä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œé€šè¿‡å“¨å…µå‘é€å‘½ä»¤ï¼Œç­‰å¾…å„redisæœåŠ¡å™¨å“åº”ï¼Œä»è€Œç›‘æ§å¤šä¸ªrediså®ä¾‹

![image](https://github.com/arqady01/cpp-interview/blob/main/database/image/%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F.png)

### ç¼“å­˜é›ªå´©
**å¤§é‡ç¼“å­˜key**åŒä¸€æ—¶é—´å¤±æ•ˆï¼Œå¯¼è‡´è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ï¼Œé€ æˆåè€…å®•æœº<br>
<br>ä¸¾ä¾‹<br>
åŒåä¸€æœŸé—´ï¼Œæ‰€æœ‰ç”¨æˆ·æ‰“å¼€æ·˜å®å°±æ˜¯è¿›å…¥é¦–é¡µï¼Œé¦–é¡µå‹åŠ›å·¨å¤§ï¼Œä¸ºæé«˜å¹¶å‘ï¼Œå°†ç½‘ç«™é¦–é¡µæ•°æ®éƒ½ç¼“å­˜åˆ°redisé‡Œï¼Œæ‰€æœ‰çš„keyå¤±æ•ˆæ—¶é—´éƒ½æ˜¯2å°æ—¶ï¼Œå½“å¤©å¤§é‡ç”¨æˆ·è´­ç‰©ï¼Œç»“æœ2ä¸ªå°æ—¶è¿‡å»äº†ï¼Œredisä¸­keyç¼“å­˜å…¨éƒ¨å¤±æ•ˆï¼Œæ­¤æ—¶redisä¸­æŸ¥è¯¢ä¸åˆ°æ•°æ®ï¼Œåªèƒ½å»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œé€ æˆæ•°æ®åº“æ— æ³•å“åº”å®•æœº

#### è§£å†³æ–¹æ¡ˆ
- éšæœºè®¾ç½®keyå¤±æ•ˆæ—¶é—´ï¼Œé¿å…å¤§é‡keyé›†ä½“å¤±æ•ˆ
- é›†ç¾¤éƒ¨ç½²ä¸­ï¼Œå¯å°†çƒ­ç‚¹æ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒçš„redisåº“ä¸­ä¹Ÿèƒ½é¢„é˜²keyå…¨éƒ¨å¤±æ•ˆ
- å®šæ—¶å™¨ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆå‰å†™å…¥æ–°çš„ç¼“å­˜

### ç¼“å­˜ç©¿é€
redisç¼“å­˜å’Œæ•°æ®åº“ä¸­**æ²¡æœ‰ç›¸å…³æ•°æ®**ï¼ˆæ¯”å¦‚id < 0 çš„è¯·æ±‚ï¼‰ï¼Œredisä¸­æ²¡æœ‰è¿™æ ·çš„æ•°æ®ï¼Œæ— æ³•æ‹¦æˆªï¼Œç›´æ¥ç©¿é€åˆ°æ•°æ®åº“

#### è§£å†³æ–¹æ¡ˆ
- å°†ä¸å­˜åœ¨çš„æ•°æ®ç¼“å­˜åˆ°redisä¸­ï¼Œè®¾ç½®é”®å€¼å¯¹ä¸ºnullï¼Œå¹¶è®¾ç½®ä¸€ä¸ªçŸ­æœŸè¿‡æœŸæ—¶é—´ï¼Œé¿å…è¿‡æœŸæ—¶é—´è¿‡é•¿å½±å“æ­£å¸¸ç”¨æˆ·ä½¿ç”¨
- æ‹‰é»‘è¯¥Påœ°å€
- å¯¹å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œæ‹¦æˆªä¸åˆæ³•å‚æ•°
- å¸ƒéš†è¿‡æ»¤å™¨ å°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œæ˜ å°„åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapï¼ˆä½å›¾ï¼‰ä¸­ï¼Œä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«bitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›

##### å¸ƒéš†è¿‡æ»¤å™¨
å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—hashæ˜ å°„å‡½æ•°ã€‚å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå­˜åœ¨ä¸º1ï¼Œä¸å­˜åœ¨ä¸º0
- ä¼˜ç‚¹
    - å¯ä»¥é«˜æ•ˆæŸ¥è¯¢ï¼Œå³æŸæ ·ä¸œè¥¿ä¸€å®šä¸å­˜åœ¨ æˆ–è€… å¯èƒ½å­˜åœ¨
    - å¯ä»¥é«˜æ•ˆçš„è¿›è¡Œæ’å…¥
    - ç›¸æ¯”äºä¼ ç»Ÿçš„Listã€Setã€Mapç­‰æ•°æ®ç»“æ„ï¼Œå®ƒå ç”¨ç©ºé—´æ›´å°‘ï¼Œå› ä¸ºå…¶æœ¬èº«å¹¶ä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼ˆé‡ç‚¹ï¼‰
- ç¼ºç‚¹
    - è¿”å›çš„ç»“æœæ˜¯å­˜åœ¨è¯¯å·®çš„ï¼Œä½†å°†è¯¯å·®ç‡è®¾ç½®ä¸ºæ— ç©·å°å½±å“æ€§èƒ½
    - ä¸€èˆ¬ä¸æä¾›åˆ é™¤æ“ä½œ

### ç¼“å­˜å‡»ç©¿
**æŸä¸€ä¸ªçƒ­ç‚¹**keyï¼Œä¸åœçš„æ‰›ç€é«˜å¹¶å‘ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ä¸€ç¬é—´ï¼ŒæŒç»­çš„é«˜å¹¶å‘å°±å‡»ç ´ç¼“å­˜æ‰“åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´å®•æœº<br>
<br>ä¸¾ä¾‹<br>
é˜¿é‡Œæ‹å–ä¸€å—å®ç€æ‰‹è¡¨ï¼Œè®¾ç½®æœ‰æ•ˆæœŸ3å°æ—¶ï¼Œæƒ³ç€å¤Ÿæ‹å–äº†å§ï¼Œè°çŸ¥åˆ°2å°æ—¶59åˆ†ï¼Œè¿˜æœ‰å¾ˆå¤šäººåŠ ä»·ï¼Œçªç„¶è¯¥keyè¿‡æœŸï¼Œé«˜å¹¶å‘è¯·æ±‚ç›´æ¥åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´å®•æœº

#### è§£å†³æ–¹æ¡ˆ
- å¢å¤§çƒ­ç‚¹keyçš„æœ‰æ•ˆæœŸ
- äº’æ–¥é”ï¼Œåœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚ä¸Šç”¨mutexé”ä½ï¼Œå…¶ä»–è¯·æ±‚æ‹¿ä¸åˆ°é”å°±é˜»å¡ï¼Œç­‰ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæ¯•ï¼Œå†å°†æ•°æ®ç¼“å­˜åˆ°redisï¼Œåé¢çš„çº¿ç¨‹è§£é™¤é˜»å¡å‘ç°æœ‰äº†ç¼“å­˜ï¼Œç›´æ¥èµ°ç¼“å­˜

### redisç¼“å­˜ä¸æ•°æ®åº“åŒå†™ä¸€è‡´æ€§

å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ï¼ˆæœ‰ç¼ºé™·ï¼‰

![image](https://github.com/arqady01/cpp-interview/blob/main/database/image/%E5%85%88%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%8D%E6%9B%B4%E6%96%B0%E7%BC%93%E5%AD%98.png)

å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ï¼ˆæœ‰ç¼ºé™·ï¼‰

![image](https://github.com/arqady01/cpp-interview/blob/main/database/image/%E5%85%88%E5%88%A0%E7%BC%93%E5%AD%98%E5%86%8D%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E5%BA%93.png)

å…ˆæ›´æ–°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ï¼ˆæœ‰ç¼ºé™·ï¼‰<br>

**å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜**ï¼ˆåˆé€‚çš„æ–¹æ¡ˆï¼‰

## âš™ï¸ mysql
[mysql](https://github.com/arqady01/mysql-linux)

<h1 id="1">è®¾è®¡æ¨¡å¼</h1>

- ä¾èµ–å€’ç½®åŸåˆ™DIP

é«˜å±‚æ¨¡å—ï¼ˆç¨³å®šï¼‰ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼ˆå˜åŒ–ï¼‰ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼ˆç¨³å®šï¼‰ï¼ŒæŠ½è±¡ï¼ˆç¨³å®šï¼‰ä¸åº”è¯¥ä¾èµ–äºå®ç°ç»†èŠ‚ï¼ˆå˜åŒ–ï¼‰ï¼Œå®ç°ç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼ˆç¨³å®šï¼‰

- å•ä¸€èŒè´£åŸåˆ™SRP

ä¸€ä¸ªç±»åªåº”è¯¥åšä¸€ä»¶äº‹

- å¼€æ”¾å°é—­åŸåˆ™OCP

å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹æ›´æ”¹å°é—­ã€‚ç±»æ¨¡å—åº”è¯¥æ˜¯å¯æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ã€‚å¢åŠ åŠŸèƒ½æ˜¯é€šè¿‡å¢åŠ ä»£ç æ¥å®ç°ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æºä»£ç 

- é‡Œæ°æ›¿æ¢åŸåˆ™LSP

å­ç±»å¿…é¡»èƒ½å¤Ÿæ›¿æ¢ä»–ä»¬çš„çˆ¶ç±»is-aã€‚ç»§æ‰¿è¡¨è¾¾ç±»å‹æŠ½è±¡

## å•ä¾‹æ¨¡å¼

<h3>é¥¿æ±‰å¼</h3>
é¥¿æ±‰å¼ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œåªæœ‰æ‡’æ±‰å¼åœ¨å•çº¿ç¨‹ä¸‹æ‰ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é£é™©

```cpp
#include <iostream>
class Singoton {
public:
    //ç±»ä¸­çš„é™æ€å‡½æ•°åªèƒ½è®¿é—®ç±»ä¸­é™æ€æˆå‘˜å˜é‡
    static Singoton* getInstance() {
        return ptr;
    }
    void show() {
        std::cout << "hungry\n";
    }
    Singoton(const Singoton& s) = delete;
    Singoton& operator=(const Singoton& s) = delete;
private:
    Singoton() {};
    static Singoton* ptr; //é™æ€æˆå‘˜å˜é‡å£°æ˜
};
Singoton* Singoton::ptr = new Singoton; //é™æ€æˆå‘˜å˜é‡éœ€åœ¨ç±»å¤–å®šä¹‰

//æµ‹è¯•
int main() {
    Singoton* op = Singoton::getInstance();
    op->show();
}
```

<h3>æ‡’æ±‰å¼</h3>
æ‡’æ±‰å¼å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜

```cpp
#include <iostream>
class Singoton {
public:
    //ç±»ä¸­çš„é™æ€å‡½æ•°åªèƒ½è®¿é—®ç±»ä¸­é™æ€æˆå‘˜å˜é‡
    static Singoton* getInstance() {
        if (ptr == nullptr) {
            ptr = new Singoton();
        }
        return ptr;
    }
    void show() {
        std::cout << "lazy\n";
    }
    Singoton(const Singoton& s) = delete;
    Singoton& operator=(const Singoton& s) = delete;
private:
    Singoton() {};
    static Singoton* ptr; //å£°æ˜
};
Singoton* Singoton::ptr = nullptr; //é™æ€æˆå‘˜å˜é‡éœ€åœ¨ç±»å¤–å®šä¹‰

int main() { //æµ‹è¯•
    Singoton* op = Singoton::getInstance();
    op->show();
}
```

è¯•æƒ³ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨äº†Singoton::getInstance()æ–¹æ³•ï¼Œçº¿ç¨‹Aé¦–å…ˆè¿›è¡Œåˆ¤ç©ºæ“ä½œï¼Œäºæ˜¯newäº†ä¸€ä¸ªSingotonå¯¹è±¡ï¼Œæ­¤æ—¶å‘ç”Ÿäº†ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè°ƒåº¦æƒç»™åˆ°äº†çº¿ç¨‹Bï¼Œçº¿ç¨‹Bé¦–å…ˆä¹Ÿè¿›è¡Œåˆ¤ç©ºæ“ä½œï¼Œå‘ç°ä¸ºç©ºï¼Œäºæ˜¯ä¹Ÿnewäº†ä¸€ä¸ªSingotonå¯¹è±¡ï¼Œå°±å‘ç”Ÿäº†é—®é¢˜ã€‚<br>
* åŒé‡æ£€æŸ¥é”å®šè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜

```cpp
#include <mutex>
class Singoton {
public:
    //ç±»ä¸­çš„é™æ€å‡½æ•°åªèƒ½è®¿é—®ç±»ä¸­é™æ€æˆå‘˜å˜é‡
    static Singoton* getInstance() {
        mtx.lock();
        if (ptr == nullptr) {
            ptr = new Singoton();
        }
        mtx.unlock();
        return ptr;
    }
    void show() { std::cout << "lazy\n"; }
    Singoton(const Singoton& s) = delete;
    Singoton& operator=(const Singoton& s) = delete;
private:
    Singoton() {};
    static Singoton* ptr; //å£°æ˜
    static std::mutex mtx;
};
Singoton* Singoton::ptr = nullptr; //é™æ€å˜é‡éœ€åœ¨ç±»å¤–å®šä¹‰
std::mutex Singoton::mtx;
```

å‡æƒ³ç°åœ¨æœ‰ä¸‰ä¸ªçº¿ç¨‹A B Cï¼Œçº¿ç¨‹Aé¦–å…ˆåŠ é”ï¼Œå†åˆ¤æ–­ã€newå¯¹è±¡ï¼Œè‹¥æ­¤æ—¶å‘ç”Ÿäº†ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè°ƒåº¦æƒç»™äº†çº¿ç¨‹Bå’Œçº¿ç¨‹Cï¼Œä½†æ˜¯ä»–æ²¡æœ‰é”èµ„æºï¼Œè¿›å…¥é˜»å¡æ€ï¼Œæœ€ç»ˆè°ƒåº¦æƒå›å½’çº¿ç¨‹Aï¼Œå°†é”å¤´è§£é”ï¼Œäºæ˜¯çº¿ç¨‹Bå’Œçº¿ç¨‹Cè‡ªç„¶å°±è§£é™¤é˜»å¡ï¼Œè¿›è¡Œåˆ¤ç©ºæ“ä½œï¼Œæ­¤æ—¶å°±ä¼šå› ä¸ºåˆ¤ç©ºå¤±è´¥è€Œç›´æ¥è¿”å›ï¼Œçº¿ç¨‹å®‰å…¨

ä½†æ˜¯è¿™ç§å†™æ³•æ€§èƒ½éå¸¸ä½ä¸‹ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨getInstance()éƒ½ä¼šä¸Šé”/è§£é”ï¼Œè€Œè¿™ä¸ªæ­¥éª¤åªæœ‰åœ¨ç¬¬ä¸€æ¬¡new Singleton()æ‰æ˜¯æœ‰å¿…è¦çš„ï¼Œåªè¦ptrè¢«åˆ›å»ºå‡ºæ¥äº†ï¼Œä¸ç®¡å¤šå°‘çº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä½¿ç”¨if (ptr == nullptr)è¿›è¡Œåˆ¤æ–­éƒ½æ˜¯è¶³å¤Ÿçš„ï¼ˆåªæ˜¯è¯»æ“ä½œï¼Œä¸éœ€è¦åŠ é”ï¼‰ï¼Œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŠ äº†é”ä¹‹ååè€Œå­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚

```cpp
static Singoton* getInstance() {
    //åªæœ‰pträ¸ºç©ºæ‰è¿›è¡Œä¸Š/è§£é”æ“ä½œï¼Œå¦‚æœä¸ä¸ºç©ºç›´æ¥è¿”å›å‡ºå»
    if (ptr == nullptr) { //ç¬¬ä¸€æ¬¡æ£€æŸ¥
        mtx.lock();
        if (ptr == nullptr) { //ç¬¬äºŒæ¬¡æ£€æŸ¥
            ptr = new Singoton();
        }
        mtx.unlock();
    }
    return ptr;
}
```

* åŸå­æ“ä½œå¼¥è¡¥åŒé‡æ£€æŸ¥çš„bug
å› ä¸º`new`æ“ä½œç¬¦åœ¨æ±‡ç¼–ä¸­æ˜¯å¯¹åº”çš„æœºå™¨æŒ‡ä»¤å¯èƒ½ä¼šå‘ç”Ÿé‡æ’ï¼Œä¾æ—§ä¼šäº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨åŸå­æ“ä½œæ¥å¼¥è¡¥

```cpp
#include <iostream>
#include <mutex>
#include <atomic>
class Singoton {
public:
	static Singoton* getInstance() {
		Singoton* task = sptr.load(); //å°†spträ»åŸå­ä¸­å–å‡ºå¤‡ç”¨
		if (task == nullptr) {
			mtx.lock();
			task = sptr.load();
			if (task == nullptr) {
				task = new Singoton();
				sptr.store(task);
			}
			mtx.unlock();
		}
		task = sptr.load();
		return task;
	} //ç±»ä¸­çš„é™æ€å‡½æ•°åªèƒ½è®¿é—®ç±»ä¸­é™æ€æˆå‘˜å˜é‡
	void show() {
		std::cout << "lazy\n";
	}
	Singoton(const Singoton& s) = delete;
	Singoton& operator=(const Singoton& s) = delete;
private:
	Singoton() {};
	static std::mutex mtx;
	static std::atomic<Singoton*> sptr;
};
std::mutex Singoton::mtx;
std::atomic<Singoton*> Singoton::sptr = nullptr; //å®šä¹‰

int main() { //æµ‹è¯•
	Singoton* op = Singoton::getInstance();
	op->show();
}
```

* é™æ€å¯¹è±¡ï¼ˆéœ€è¦ç¼–è¯‘å™¨å…¼å®¹C++11æ ‡å‡†ï¼‰
```cpp
#include <iostream>
class Singoton {
public:
	static Singoton* getInstance() {
		static Singoton sn; //å¿…é¡»é™æ€ï¼Œä¸ç„¶å‡ºäº†å¤§æ‹¬å·å…¶ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸ
		return &sn; //å–åœ°å€å¹¶è¿”å›
	}
	void show() {
		std::cout << "lazy\n";
	}
	Singoton(const Singoton& s) = delete;
	Singoton& operator=(const Singoton& s) = delete;
private:
	Singoton() {};
};

int main() { //æµ‹è¯•
	Singoton* op = Singoton::getInstance();
	op->show();
}
```

C++11è§„å®šï¼Œå½“é€»è¾‘è¿›å…¥ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–çš„å£°æ˜å˜é‡ï¼Œæ‰€æœ‰çš„å¹¶å‘æ“ä½œéƒ½å¿…é¡»ç­‰å¾…è¯¥å˜é‡å®Œæˆåˆå§‹åŒ–ã€‚<br>
é™æ€å˜é‡åœ¨å…¨å±€/é™æ€åŒºï¼Œåªè¦åœ¨åˆ†åŒºå†…ï¼Œåªè¦æ•°æ®ç­‰äº0ï¼Œå°±æ˜¯æœªè¢«åˆå§‹åŒ–çš„ï¼Œæ¯”å¦‚`int a = 0;`ï¼Œ`int b;`ï¼›ä½†æ˜¯`int c = 1;`å°±æ˜¯åˆå§‹åŒ–è¿‡çš„å˜é‡<br>
æ‰€ä»¥`static Singoton sn;`ä¹Ÿæ˜¯æœªåˆå§‹åŒ–çš„é™æ€å±€éƒ¨å˜é‡ï¼Œäºæ˜¯æ‰€æœ‰çš„å¹¶å‘æ“ä½œéƒ½ä¼šè¢«é˜»å¡

## ç®€å•å·¥å‚æ¨¡å¼

![simple_factory](https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/simple_factory.png)

- ä¼˜ç‚¹
    - å°è£…æ€§
    - æ‰©å±•æ€§ï¼šå¢åŠ æ–°äº§å“ç±»å®¹æ˜“ï¼Œåªéœ€ä¿®æ”¹å·¥å‚ç±»ï¼Œå®¢æˆ·ç«¯ä»£ç æ— éœ€ä¿®æ”¹
- ç¼ºç‚¹
    - è¿åå¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹æ›´æ”¹å°é—­ã€‚å‡å¦‚æˆ‘æœ‰ä¸ªæ±½è½¦å·¥å‚ï¼Œä½†æ˜¯æƒ³åšå£ç½©ï¼Œæˆ‘æ˜¯ç”¨ç®€å•å·¥å‚çš„é€»è¾‘å»æ›´æ”¹è½¦å‚å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬åº”è¯¥æ–°å¢ä¸€æ¡å£ç½©ç”Ÿäº§çº¿

```cpp
#include <iostream>
#include <memory>
struct AbstractProtuct {
    virtual void show() = 0;
};
struct ProtuctA : public AbstractProtuct {
    virtual void show() override {
        std::cout << "äº§å“Aåˆ›å»º\n";
    }
};
struct ProtuctB : public AbstractProtuct {
    virtual void show() override {
        std::cout << "äº§å“Båˆ›å»º\n";
    }
};
struct Factory {
    static std::unique_ptr<AbstractProtuct> createProtuct(const std::string& type) {
        if (type == "A") {
            return std::make_unique<ProtuctA>();
        } else if(type == "B") {
            return std::make_unique<ProtuctB>();
        }
        return nullptr;
    }
};

int main() {
    std::unique_ptr<AbstractProtuct> ptr = Factory::createProtuct("A");
    ptr->show();
}
```

## å·¥å‚æ¨¡å¼

- ä¼˜ç‚¹ï¼šéµå¾ªå¼€é—­åŸåˆ™ï¼Œå®ç°äº†å¯æ‰©å±•å’Œæ›´å¤æ‚çš„å±‚æ¬¡ç»“æ„ã€‚æ˜ç¡®äº†èŒè´£ï¼Œå…·æœ‰å¤šæ€æ€§
- ç¼ºç‚¹ï¼šå¦‚æœä¸šåŠ¡å¢åŠ ï¼Œä¼šä½¿å¾—ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œæé«˜äº†ä»£ç çš„å¤æ‚åº¦

![factory](https://github.com/arqady01/Cpp-interface/blob/main/resource/cpp_images/factory.png)

```cpp
struct Product {
    virtual void show() = 0;
};
struct Car : public Product {
    virtual void show() override {
        std::cout << "ç”Ÿäº§æ±½è½¦\n";
    }
};
struct mask : public Product {
    virtual void show() override {
        std::cout << "ç”Ÿäº§å£ç½©\n";
    }
};

struct Factory {
    virtual Product* create() = 0;
};
struct Car_Factory : public Factory {
    virtual Product* create() override {
        return new Car;
    }
};
struct Mask_Factory : public Factory {
    virtual Product* create() override {
        return new mask;
    }
};

int main() {
    Factory* factory = new Car_Factory;
    Product* product = factory->create();
    product->show();
}
```

## æŠ½è±¡å·¥å‚æ¨¡å¼

- ä¼˜ç‚¹ï¼šå¢åŠ åˆ†ç»„æ¯”è¾ƒå®¹æ˜“ï¼Œèƒ½å¤§å¤§å‡å°‘å·¥å‚ç±»çš„æ•°é‡
- ç¼ºç‚¹ï¼šç±»ä¼¼äºå·¥å‚æ¨¡å¼ï¼Œä½†æ˜¯å®ƒæ¯ä¸ªå·¥å‚éƒ½èƒ½åšåˆ«çš„äº‹ï¼Œæ¯”å¦‚æ±½è½¦å·¥å‚ï¼Œå¯ä»¥åšåˆ°ä¸ä»…èƒ½ç”Ÿäº§æ±½è½¦ä¹Ÿèƒ½ç”Ÿäº§å£ç½©ã€‚æ‰€ä»¥æŠ½è±¡å·¥å‚æ·»åŠ æ–°äº§å“è¾ƒå¤æ‚ï¼Œéœ€è¦æ”¹åŠ¨AbstractFactoryå’Œè‡ªèº«å·¥å‚ï¼ŒæŠ½è±¡å·¥å‚çš„çº¯è™šå‡½æ•°ä¸€å˜ï¼Œå…¶ä»–å·¥å‚ä¹Ÿè¦è·Ÿç€æ”¹å˜

[æŠ½è±¡å·¥å‚æ¨¡å¼ç¤ºä¾‹](https://github.com/arqady01/cpp-interview/blob/main/design%20parton/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E7%A4%BA%E4%BE%8B)

## è§‚å¯Ÿè€…æ¨¡å¼

åŒ…å«æŠ½è±¡ã€å…·ä½“çš„è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…<br>
å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–ä»–çš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°äº‹ä»¶é€šçŸ¥

## é€‚é…å™¨æ¨¡å¼

åƒä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œ

## ç­–ç•¥æ¨¡å¼

ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒä½¿å¾—ä¸€ç»„ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶äº’ç›¸æ›¿æ¢ã€‚è¯¥æ¨¡å¼ä½¿ç”¨ç»„åˆæ–¹å¼å°†ç®—æ³•çš„ä½¿ç”¨å’Œå®ç°åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ã€‚æ”¯æŒå¼€é—­åŸåˆ™ã€‚

```cpp
struct Weapon {
    virtual void attack() = 0;
};
struct m416 : public Weapon {
    void attack() override {
        std::cout << "ä½¿ç”¨m416å°„å‡»\n";
    }
};
struct iron : public Weapon {
    void attack() override {
        std::cout << "æ‹¿èµ·é“é”¹æ”»å‡»\n";
    }
};

struct Person {
    Person() = default;
    Person(Weapon* p):pw (p) {
        pw->attack();
    }
    Weapon* pw;
};
int main() {
    Weapon* weapon = new m416;
    Person s(weapon); //ä½¿ç”¨m416å°„å‡»
}
```

## å¤–è§‚æ¨¡å¼

å°†å¤æ‚çš„å­ç³»ç»ŸæŠ½è±¡åˆ°ä¸€ä¸ªæ¥å£ä¸­ç®¡ç†ï¼Œå¤–ç•Œåªéœ€è¦é€šè¿‡è¯¥æ¥å£å®ç°ä¸å­ç³»ç»Ÿäº¤äº’ï¼Œä¸å¿…ç›´æ¥ä¸å­ç³»ç»Ÿäº¤äº’

<h1 id="2">GDBè°ƒè¯•</h1>

### è¿è¡Œ
- run(r)ï¼šè¿è¡Œç¨‹åºï¼Œå½“é‡åˆ°æ–­ç‚¹åï¼Œç¨‹åºä¼šåœ¨æ–­ç‚¹å¤„åœæ­¢è¿è¡Œï¼Œç­‰å¾…ä¸‹ä¸€æ­¥å‘½ä»¤
- continue(c)ï¼šç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ï¼ˆæˆ–è¿è¡Œç»“æŸï¼‰
- next(n)ï¼šå•æ­¥è·Ÿè¸ªç¨‹åºï¼Œå½“é‡åˆ°å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¹Ÿä¸è¿›å…¥æ­¤å‡½æ•°ä½“
- step(s)ï¼šå•æ­¥è°ƒè¯•å¦‚æœæœ‰å‡½æ•°è°ƒç”¨ï¼Œåˆ™è¿›å…¥å‡½æ•°ï¼›ä¸å‘½ä»¤nä¸åŒï¼Œnæ˜¯ä¸è¿›å…¥è°ƒç”¨çš„å‡½æ•°çš„
- untilï¼šå½“ä½ åŒå€¦äº†åœ¨ä¸€ä¸ªå¾ªç¯ä½“å†…å•æ­¥è·Ÿè¸ªæ—¶ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥è¿è¡Œç¨‹åºç›´åˆ°é€€å‡ºå¾ªç¯ä½“
- until+è¡Œå·ï¼š è¿è¡Œè‡³æŸè¡Œï¼Œä¸ä»…ä»…ç”¨æ¥è·³å‡ºå¾ªç¯
- finishï¼š è¿è¡Œç¨‹åºï¼Œç›´åˆ°å½“å‰å‡½æ•°å®Œæˆè¿”å›ï¼Œå¹¶æ‰“å°å‡½æ•°è¿”å›æ—¶çš„å †æ ˆåœ°å€å’Œè¿”å›å€¼åŠå‚æ•°å€¼ç­‰ä¿¡æ¯
- call å‡½æ•°(å‚æ•°)ï¼šè°ƒç”¨ç¨‹åºä¸­å¯è§çš„å‡½æ•°ï¼Œå¹¶ä¼ é€’â€œå‚æ•°â€ï¼Œå¦‚ï¼šcall gdb_test(55)
- quit(q)ï¼šé€€å‡ºgdb

### æ–­ç‚¹
- break n (ç®€å†™b n):åœ¨ç¬¬nè¡Œå¤„è®¾ç½®æ–­ç‚¹
- b fn1 if aï¼bï¼šæ¡ä»¶æ–­ç‚¹è®¾ç½®
- break func (b func)ï¼šåœ¨å‡½æ•°func()çš„å…¥å£å¤„è®¾ç½®æ–­ç‚¹
- delete nï¼šåˆ é™¤ç¬¬nä¸ªæ–­ç‚¹
- disable nï¼šæš‚åœç¬¬nä¸ªæ–­ç‚¹
- enable nï¼šå¼€å¯ç¬¬nä¸ªæ–­ç‚¹
- info bï¼šæ˜¾ç¤ºå½“å‰ç¨‹åºçš„æ–­ç‚¹è®¾ç½®æƒ…å†µ
- delete breakpointsï¼šæ¸…é™¤æ‰€æœ‰æ–­ç‚¹

### æŸ¥çœ‹è¿è¡Œä¿¡æ¯
- bt: å½“å‰è¿è¡Œçš„å †æ ˆåˆ—è¡¨
- bt backtrace: æ˜¾ç¤ºå½“å‰è°ƒç”¨å †æ ˆ
- up/down æ”¹å˜å †æ ˆæ˜¾ç¤ºçš„æ·±åº¦
- set args å‚æ•°:æŒ‡å®šè¿è¡Œæ—¶çš„å‚æ•°
- show argsï¼šæŸ¥çœ‹è®¾ç½®å¥½çš„å‚æ•°
- info programï¼šæ¥æŸ¥çœ‹ç¨‹åºçš„æ˜¯å¦åœ¨è¿è¡Œï¼Œè¿›ç¨‹å·ï¼Œè¢«æš‚åœçš„åŸå› 

### è°ƒè¯•æ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åº
æ–°å»ºä¸€ä¸ªçª—å£ï¼Œ`ps -ef|grep a.out`æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„a.outç¨‹åºçš„çº¿ç¨‹IDï¼Œ`gdb a.out -p IDå·`è¿›å…¥gdbè°ƒè¯•

### ç»“æŸè¿›ç¨‹
- killallæ ¹æ®åç§°ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œè€Œkillæ ¹æ®è¿›ç¨‹IDå·ï¼ˆPIDï¼‰ç»ˆæ­¢è¿›ç¨‹
- pidof a.outï¼šæ‰¾åˆ°è¿›ç¨‹çš„PIDï¼Œæˆ–è€…`ps -ef|grep a.out`
- kill -9 2551 2514 ï¼šä¸­æ­¢PIDä¸º2511å’Œ2514çš„è¿›ç¨‹ï¼Œæˆ–è€…`killall -9 a.out`




<h1 id="chrono">boost::chrono</h1>

ç³»ç»Ÿæ—¶é—´ï¼š`std::chrono::system_clock`<br>
è·å–å½“å‰ç³»ç»Ÿæ—¶é—´ï¼š
`std::chrono::time_point<std::chrono::system_clock> now = std::chrono::system_clock::now();`
time_pointä»£è¡¨è¿™æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹ç±»å‹ï¼Œæ¨¡æ¿å‚æ•°ä½¿ç”¨system_lockè¡¨æ˜è¿™ä¸ªæ—¶é—´ç‚¹æ˜¯åŸºäºsystem_lockæ¥è®¡æ—¶çš„<br>

## ç±»å‹è½¬æ¢å‡½æ•°

- æ—¶é—´ç‚¹ç±»å‹ï¼š`time_point_cast<>`
- æ—¶é•¿ç±»å‹ï¼š`duration_cast<>`

## æ—¶é’Ÿ

- system_clockï¼šå®æ—¶æ—¶é’Ÿçš„æŒ‚é’Ÿæ—¶é—´
- steady_clockï¼šç»ä¸ä¼šè°ƒæ•´çš„å•ä½æ—¶é’Ÿ
- high_resolution_clockï¼šæ‹¥æœ‰å¯ç”¨çš„æœ€çŸ­å˜€å—’å‘¨æœŸçš„æ—¶é’Ÿ

### å…±åŒæˆå‘˜

| æˆå‘˜ | è¯´æ˜ |
| :----: | :----: |
| now() | è¿”å›å½“å‰æ—¶é—´ï¼Œç±»å‹ä¸ºclock::time_point |
| time_point | å½“å‰æ—¶é’Ÿçš„æ—¶é—´ç‚¹ç±»å‹ |
| duration | æ—¶é’Ÿçš„æ—¶é•¿ç±»å‹ |
| is_ready | æ˜¯å¦ç¨³å®šæ—¶é’Ÿï¼Œå¯¹äºsteady_clockè¯¥å€¼ä¸€å®šä¸ºtrue |

## æ—¶é•¿ç±»å‹

- çº³ç§’ï¼šstd::chrono::nanoseconds
- å¾®ç§’ï¼šstd::chrono::microseconds
- æ¯«ç§’ï¼šstd::chrono::milliseconds
- ç§’ï¼šstd::chrono::seconds
- åˆ†ï¼šstd::chrono::minutes
- å°æ—¶ï¼šstd::chrono::hours

è°ƒç”¨count()å‡½æ•°æ¥è·å–å…·ä½“æ•°å€¼

## æ—¶é•¿è¿ç®—

- å‘ä¸‹å–æ•´ï¼šfloor
- å‘ä¸Šå–æ•´ï¼šceil
- å–ç»å¯¹å€¼ï¼šabs

```cpp
void translate() {
	std::chrono::hours h(2);
	std::chrono::minutes m(5);
	auto time = h + m;

	auto sec = std::chrono::duration_cast<std::chrono::seconds>(time);
	std::cout << sec.count() << std::endl;
}
```

#### æè¿°æ—¶é•¿

C++14æ”¯æŒ`std::chrono_literals`ä¸­çš„å­—é¢é‡æ¥æè¿°ï¼Œh-å°æ—¶ï¼Œmin-åˆ†é’Ÿï¼Œs-ç§’ï¼Œms-æ¯«ç§’ï¼Œus-å¾®ç§’ï¼Œns-çº³ç§’ï¼Œç¤ºä¾‹ä¸­çš„2å°æ—¶5åˆ†ä¹Ÿå¯ä»¥è¿™æ ·è¡¨è¿°ï¼š

```cpp
using namespace std::chrono_literals;
auto time = 2h + 5min;
```

## æ—¶é—´ç‚¹

æ—¶é—´ç‚¹åŒ…å«ä¸¤ä¸ªç±»å‹ï¼šæ—¶é’Ÿå’Œæ—¶é•¿ã€‚æ—¶é—´ç‚¹ + æ—¶é•¿ = æ—¶é—´ç‚¹

```cpp
int main() {
	//è®¡ç®—ç¨‹åºè¿è¡Œæ—¶é•¿
	auto start = std::chrono::steady_clock::now();
	double sum = 0;
	for (int i = 0; i < 1000000; i++) {
		sum += sqrt(i);
	}
	auto end = std::chrono::steady_clock::now();
	auto diff = std::chrono::duration_cast<std::chrono::milliseconds>(end - start);
	std::cout << diff.count() << std::endl;
}
```

<h1 id="Git">ğŸ”€ Git</h1>

gitçš„é‡è¦æ€§æƒ³å¿…ä¸è¨€è€Œå–»äº†ï¼Œä½†æ˜¯é¢è¯•ä¸€èˆ¬å¾ˆå°‘è€ƒå¯Ÿ

## å‡†å¤‡å·¥ä½œ

- é…ç½®ç”¨æˆ·åï¼š`git config --global user.name ç”¨æˆ·å`
- é…ç½®é‚®ç®±ï¼š`git config --global user.email é‚®ç®±`
- æŒä¹…åŒ–ä¿å­˜é…ç½®ï¼š`git config --global credential.helper store`
- æŸ¥çœ‹å¯†ç ï¼š`git config --global --list`

## githubé…ç½®ssh

ç”Ÿæˆssh keyï¼š`ssh-keygen -t rsa -b 4096`
ç§é’¥æ–‡ä»¶ï¼šid_rsa
å…¬é’¥æ–‡ä»¶ï¼šid_rsa.pub

## åˆ›å»ºä»“åº“

1. `git init`åˆå§‹åŒ–ä»“åº“

åœ¨åˆé€‚çš„ç›®å½•ä¸‹ï¼Œé€šè¿‡`git init`åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ä»“åº“

2. `git clone`å…‹éš†ä»“åº“

## å·¥ä½œåŒºåŸŸ

- å·¥ä½œåŒºï¼ˆ`.git`çš„æ‰€åœ¨ç›®å½•ï¼‰
    - å®é™…æ“ä½œçš„ç›®å½•ï¼ŒåŒ…å«é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶
- æš‚å­˜åŒºï¼ˆ.git/indexï¼‰
    - ä¸´æ—¶å­˜å‚¨åŒº
- æœ¬åœ°ä»“åº“ï¼ˆ.git/objectsï¼‰
    - å­˜å‚¨é¡¹ç›®çš„æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ï¼ŒåŒ…å«é¡¹ç›®çš„å®Œæ•´å†å²è®°å½•
    
**å·¥ä½œæµç¨‹**

å·¥ä½œåŒº --(`git add`)--> æš‚å­˜åŒº --(`git commit`)--> æœ¬åœ°ä»“åº“

## å¸¸è§å‘½ä»¤

- `git status`ï¼šæŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€
- `git add`ï¼šå°†å·¥ä½œåŒºçš„ä¿®æ”¹æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº
- `git commit -m "æäº¤ä¿¡æ¯"`ï¼šå°†æš‚å­˜åŒºçš„å†…å®¹æäº¤å‡ºå»
- `git log`ï¼šæŸ¥çœ‹ä»“åº“æäº¤å†å²è®°å½•
- `git reset`ï¼šå¯ä»¥åœ¨è¿™ä¸‰ä¸ªåŒºåŸŸä¹‹é—´ç§»åŠ¨æ–‡ä»¶
- `git checkout`ï¼šä»ä»“åº“æˆ–æš‚å­˜åŒºæ£€å‡ºæ–‡ä»¶åˆ°å·¥ä½œåŒº

### `git reset`

`git reset` å‘½ä»¤æœ‰ä¸‰ç§ä¸»è¦æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š

1. `--soft`
    - ä¿ç•™æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„ä¿®æ”¹
    - é€‚ç”¨åœºæ™¯ï¼šæƒ³è¦ä¿®æ”¹æœ€è¿‘çš„æäº¤ä¿¡æ¯æˆ–åˆå¹¶å¤šä¸ªæäº¤
2. `--mixed`ï¼šä¹Ÿæ˜¯é»˜è®¤æ¨¡å¼
    - é‡ç½®æš‚å­˜åŒºï¼Œä½†ä¿ç•™å·¥ä½œåŒºçš„ä¿®æ”¹
    - é€‚ç”¨åœºæ™¯ï¼šæƒ³è¦é‡æ–°ç»„ç»‡æš‚å­˜åŒºçš„æ–‡ä»¶
3. `--hard`
    - é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒº
    - é€‚ç”¨åœºæ™¯ï¼šæƒ³è¦å®Œå…¨æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ï¼Œå›åˆ°ä¹‹å‰çš„çŠ¶æ€
    
**git resetæ¡ˆä¾‹**

å‡è®¾åœ¨ master åˆ†æ”¯ä¸Šæœ‰ä»¥ä¸‹æäº¤å†å²ï¼š`A -> B -> C -> D -> E (HEAD -> master)`ï¼Œå…¶ä¸­ï¼š
- æäº¤Aï¼šåˆå§‹åŒ–é¡¹ç›®ï¼Œæ·»åŠ äº†åŸºç¡€æ–‡ä»¶
- æäº¤Bï¼šæ·»åŠ äº†ç”¨æˆ·ç™»å½•åŠŸèƒ½
- æäº¤Cï¼šæ·»åŠ äº†ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
- æäº¤Dï¼šæ·»åŠ äº†å¯†ç é‡ç½®åŠŸèƒ½
- æäº¤Eï¼šæœ€æ–°çš„æäº¤ï¼Œæ·»åŠ äº†é‚®ä»¶é€šçŸ¥åŠŸèƒ½

æ³¨æ„å„åœºæ™¯éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯æ¬¡åœºæ™¯éƒ½æ˜¯è¿™äº”æ¬¡æäº¤ç»„æˆçš„ï¼Œä¸Šä¸‹æ–‡æ²¡æœ‰å…³è”

1. åœºæ™¯1ï¼šæœ€æ–°çš„é‚®ä»¶é€šçŸ¥åŠŸèƒ½æœ‰bug

å‡è®¾æäº¤Eçš„é‚®ä»¶é€šçŸ¥åŠŸèƒ½æœ‰ä¸¥é‡bugï¼Œæƒ³è¦å®Œå…¨æ”¾å¼ƒè¿™æ¬¡ä¿®æ”¹ï¼š

`git reset --hard HEAD~1`

è¿™ä¼šå°†ä»£ç å®Œå…¨å›é€€åˆ°æäº¤Dçš„çŠ¶æ€ï¼Œé‚®ä»¶é€šçŸ¥åŠŸèƒ½çš„æ‰€æœ‰ä»£ç éƒ½ä¼šè¢«åˆ é™¤ï¼Œç°åœ¨çš„æäº¤å†å²ï¼š

`A -> B -> C -> D (HEAD -> master)`

2. åœºæ™¯2ï¼šæƒ³è¦ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤çš„ä¿¡æ¯

å‡è®¾å‘ç°åªæ˜¯æäº¤Dçš„æäº¤ä¿¡æ¯å†™é”™äº†ï¼Œæƒ³è¦ä¿®æ”¹ï¼š

`git reset --soft HEAD~1`

è¿™ä¼šæ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼Œä½†ä¿ç•™æ‰€æœ‰ä¿®æ”¹åœ¨æš‚å­˜åŒºã€‚ç„¶åä½ å¯ä»¥ï¼š

`git commit -m "æ·»åŠ äº†å¯†ç é‡ç½®åŠŸèƒ½ï¼ŒåŒ…å«é‚®ä»¶éªŒè¯"`

3. åœºæ™¯3ï¼šæƒ³è¦å°†æœ€åä¸¤æ¬¡æäº¤åˆå¹¶æˆä¸€ä¸ª

çªç„¶è§‰å¾—å¯†ç é‡ç½®å’Œé‚®ä»¶é€šçŸ¥åŠŸèƒ½åº”è¯¥åœ¨ä¸€ä¸ªæäº¤ä¸­ï¼š

`git reset --soft HEAD~2`

è¿™ä¼šä¿ç•™Då’ŒEçš„æ‰€æœ‰ä¿®æ”¹åœ¨æš‚å­˜åŒºï¼Œç„¶åï¼š

`git commit -m "æ·»åŠ å¯†ç é‡ç½®åŠŸèƒ½ï¼ˆåŒ…å«é‚®ä»¶é€šçŸ¥ï¼‰"`

ç°åœ¨çš„æäº¤å†å²ï¼š`A -> B -> C -> D' (HEAD -> master)`ï¼Œå…¶ä¸­DåŒ…å«äº†åŸæ¥Då’ŒEçš„æ‰€æœ‰ä¿®æ”¹

4. åœºæ™¯4ï¼šæš‚å­˜åŒºæ··ä¹±éœ€è¦é‡ç»„

ä¿®æ”¹äº†å¤šä¸ªæ–‡ä»¶ï¼Œä½†å‘ç° `git add . `æ·»åŠ äº†ä¸€äº›ä¸æƒ³è¦çš„æ–‡ä»¶ï¼š

`git reset HEAD  # æˆ– git reset --mixed HEAD`

è¿™ä¼šæ¸…ç©ºæš‚å­˜åŒºï¼Œä½†ä¿ç•™å·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œç„¶åä½ å¯ä»¥é‡æ–°é€‰æ‹©è¦æäº¤çš„æ–‡ä»¶

5. åœºæ™¯5ï¼šæ¢å¤è¯¯æ“ä½œ

å¦‚æœåœ¨ä½¿ç”¨ reset è¿‡ç¨‹ä¸­å‡ºç°è¯¯æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ `git reflog` æ‰¾å›ï¼š

```
git reflog  # æŸ¥çœ‹æ“ä½œå†å²
# å‡è®¾çœ‹åˆ°ä¹‹å‰çš„æäº¤åœ¨ b27e0cf
git reset --hard b27e0cf  # æ¢å¤åˆ°æ“ä½œä¹‹å‰çš„çŠ¶æ€
```

### åˆ é™¤

å¯ä»¥åœ¨å·¥ä½œåŒºæ‰§è¡Œåˆ é™¤æ–‡ä»¶ååœ¨æäº¤ï¼Œæ¯”å¦‚å·¥ä½œåŒºåˆ é™¤äº†file.txtï¼š`rm -rf file.txt`ï¼Œä¹‹åå†æäº¤ï¼š`git add file.txt`

### `.gitignore`

`.gitignore` å‘Šè¯‰Gitå“ªäº›æ–‡ä»¶å’Œç›®å½•ä¸éœ€è¦è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚è¿™å¯¹äºæ’é™¤ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€ä¾èµ–åŒ…ã€æ—¥å¿—æ–‡ä»¶ç­‰éå¸¸æœ‰ç”¨

```
# ç¼–è¯‘è¾“å‡º
/dist
/build
/out

# æ“ä½œç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db

# æ—¥å¿—æ–‡ä»¶
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# ä½†æ˜¯ä¿ç•™ç‰¹å®šæ–‡ä»¶
!.env.example
!.gitkeep
```

### åˆ†æ”¯

1. æŸ¥çœ‹åˆ†æ”¯
    - æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼š`git branch`
    - æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼š`git branch -r`
    - æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ˆæœ¬åœ°+è¿œç¨‹ï¼‰ï¼š`git branch -a`
    - æŸ¥çœ‹åˆ†æ”¯è¯¦ç»†ä¿¡æ¯ï¼š`git branch -v`
2. åˆ›å»ºåˆ†æ”¯
    - åˆ›å»ºæ–°åˆ†æ”¯ï¼š`git branch feature-name`
    - åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ï¼š`git checkout -b feature-name`
3. åˆ‡æ¢åˆ†æ”¯
    - åˆ‡æ¢åˆ°å·²æœ‰åˆ†æ”¯ï¼š`git checkout branch-name`
    - ä½¿ç”¨æ–°çš„ switch å‘½ä»¤åˆ‡æ¢åˆ†æ”¯ï¼š`git switch branch-name`

### `git checkout`

1. åˆ‡æ¢åˆ†æ”¯
    - åˆ‡æ¢åˆ°å·²å­˜åœ¨çš„åˆ†æ”¯ï¼š`git checkout branch-name`
2. ä»£ç å›æ»š
    - æ”¾å¼ƒå¯¹å•ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼š`git checkout -- file.txt`
    -  æ”¾å¼ƒæ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼š`git checkout -- .`

## å†²çªè§£å†³

1. åœºæ™¯1ï¼š`git push`å‡ºç°å†²çª

å½“æ‰§è¡Œ git merge æˆ– git pull æ—¶å‡ºç°å†²çªæ—¶ï¼Œå¯ä»¥ä½¿ç”¨`git status`  æŸ¥çœ‹å†²çªæ–‡ä»¶ï¼Œæ‰‹åŠ¨ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œ

```
# å†²çªæ ‡è®°å¦‚ä¸‹ï¼š
<<<<<<< HEAD
ä½ çš„ä¿®æ”¹
=======
åˆ«äººçš„ä¿®æ”¹
>>>>>>> branch-name
```

å†è§£å†³å†²çªåï¼Œ`git add .`  æ·»åŠ ï¼Œ`git commit -m "è§£å†³å†²çª"`  æäº¤

2. åœºæ™¯2ï¼šåˆå¹¶åˆ†æ”¯å‡ºç°å†²çª

æˆ‘ä»¬æƒ³å°† feature åˆ†æ”¯åˆå¹¶åˆ° masterï¼Œäºæ˜¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```
git checkout master #åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨git switch
git merge feature #åˆå¹¶
```

å¦‚æœå‘ç”Ÿå†²çªï¼š

1. ä½¿ç”¨ `git status` æŸ¥çœ‹å†²çªæ–‡ä»¶
2. ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œé€‰æ‹©è¦ä¿ç•™çš„ä»£ç 
3. `git add` æ ‡è®°è§£å†³
4. `git commit` å®Œæˆåˆå¹¶
